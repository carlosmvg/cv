sap.ui.define(["sap/base/util/deepExtend","sap/suite/ui/generic/template/lib/FeError"],function(d,F){"use strict";var c="js.preparationHelper";function g(m,o,D,e,E,l){var s=d({},o);s.tableType=s.tableType||(s.gridTable?"GridTable":undefined);s.tableType=s.tableType||(s.treeTable?"TreeTable":undefined);s.tableSettings=s.tableSettings||{};s.tableSettings.type=s.tableSettings.type||s.tableType;s.tableSettings.multiSelect=(s.tableSettings.multiSelect===undefined?s.multiSelect:s.tableSettings.multiSelect);s.tableSettings.selectAll=(s.tableSettings.selectAll===undefined?false:s.tableSettings.selectAll);s.tableSettings.inlineDelete=!!s.tableSettings.inlineDelete;s.tableSettings.multiSelect=!!s.tableSettings.multiSelect;s.tableSettings.selectionLimit=s.tableSettings.selectionLimit||200;var f=m.getODataEntitySet(e);var h=m.getODataEntityType(f.entityType);if(D.system.phone){s.tableSettings.type="ResponsiveTable";}else if(e){s.tableSettings.type=s.tableSettings.type||(h["sap:semantics"]==="aggregate"?"AnalyticalTable":"ResponsiveTable");if(s.tableSettings.type==="AnalyticalTable"&&!(h["sap:semantics"]==="aggregate")){s.tableSettings.type="GridTable";}}if(s.tableSettings.multiSelect&&s.tableSettings.inlineDelete){throw new F(c,"Both inlineDelete and multiSelect options for table are not possible");}if(s.tableSettings.type!=="ResponsiveTable"&&s.tableSettings.inlineDelete){throw new F(c,"InlineDelete property is not supported for "+s.tableSettings.type+" type table");}s.tableSettings.mode=(s.tableSettings.multiSelect?"MultiSelect":"SingleSelectLeft");s.tableSettings.onlyForDelete=true;if(Array.isArray(l)&&l.find(function(r){return!(r.Inline&&r.Inline.Bool)&&(r.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||(r.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&r.RequiresContext&&r.RequiresContext.Bool));})){s.tableSettings.onlyForDelete=false;}for(var A in E){if(E[A].requiresSelection!==false){s.tableSettings.onlyForDelete=false;break;}}if(s.tableSettings.onlyForDelete&&f["Org.OData.Capabilities.V1.DeleteRestrictions"]&&f["Org.OData.Capabilities.V1.DeleteRestrictions"].Deletable&&f["Org.OData.Capabilities.V1.DeleteRestrictions"].Deletable.Bool==="false"){s.tableSettings.mode="None";s.tableSettings.onlyForDelete=false;}if(s.tableSettings.type!=="ResponsiveTable"){if(s.tableSettings.mode==="SingleSelectLeft"){s.tableSettings.mode="Single";}else if(s.tableSettings.mode==="MultiSelect"){s.tableSettings.mode="MultiToggle";}}if(s.tableSettings.inlineDelete){s.tableSettings.mode="Delete";s.tableSettings.onlyForDelete=true;}delete s.gridTable;delete s.treeTable;delete s.tableType;delete s.multiSelect;return s.tableSettings;}function a(m,e,A,q){var p=[A];if(q){p.push(q);}var f=p.join("#");return m.getODataEntityType(e)[f];}function b(m,e,q){function f(P){if(P[0]!=="/"){P=m.getODataEntityType(e,true)+"/"+P;}return m.getObject(P.replace(/@/g,""));}function h(s){return s.PresentationVariant.Path?f(s.PresentationVariant.Path):s.PresentationVariant;}function i(p){var v=p.Visualizations&&p.Visualizations.find(function(v){return v.AnnotationPath.includes("com.sap.vocabularies.UI.v1.LineItem");});return v&&f(v.AnnotationPath);}var s=a(m,e,"com.sap.vocabularies.UI.v1.SelectionPresentationVariant",q);var p=s?h(s):a(m,e,"com.sap.vocabularies.UI.v1.PresentationVariant",q);return p&&i(p)||a(m,e,"com.sap.vocabularies.UI.v1.LineItem");}return{getNormalizedTableSettings:g,getAnnotation:a,getLineItemFromVariant:b};});
