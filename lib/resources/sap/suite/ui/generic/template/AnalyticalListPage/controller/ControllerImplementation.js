sap.ui.define(["sap/ui/generic/app/navigation/service/SelectionVariant","sap/suite/ui/generic/template/AnalyticalListPage/extensionAPI/ExtensionAPI","sap/suite/ui/generic/template/AnalyticalListPage/controller/FilterBarController","sap/suite/ui/generic/template/AnalyticalListPage/controller/ToolbarController","sap/suite/ui/generic/template/AnalyticalListPage/controller/VisualFilterBarController","sap/suite/ui/generic/template/AnalyticalListPage/controller/VisualFilterDialogController","sap/suite/ui/generic/template/AnalyticalListPage/controller/AnalyticGridController","sap/ui/table/AnalyticalTable","sap/ui/model/odata/AnnotationHelper","sap/ui/model/analytics/odata4analytics","sap/suite/ui/generic/template/AnalyticalListPage/controller/ContentAreaController","sap/suite/ui/generic/template/AnalyticalListPage/controller/IappStateHandler","sap/ui/Device","sap/m/SegmentedButtonItem","sap/m/SegmentedButton","sap/m/OverflowToolbar","sap/m/ToolbarSpacer","sap/m/library","sap/ui/model/Context","sap/suite/ui/generic/template/AnalyticalListPage/util/AnnotationHelper","sap/suite/ui/generic/template/lib/FeLogger","sap/suite/ui/generic/template/AnalyticalListPage/util/FilterUtil","sap/base/util/ObjectPath","sap/suite/ui/generic/template/lib/ShareUtils","sap/base/util/merge","sap/base/util/deepExtend","sap/suite/ui/generic/template/listTemplates/semanticDateRangeTypeHelper"],function(S,E,F,T,V,a,A,b,O,c,C,I,D,d,f,g,h,j,k,l,m,n,o,p,q,r,s){"use strict";var t=new m("AnalyticalListPage.controller.ControllerImplementation");var L=t.getLogger();var u=t.Level;var v="chart",w="visual",x="compact",y=900;return{getMethods:function(z,B,G){var H={};H.bVisualFilterInitialised=false;H._bIsStartingUp=true;function J(){var e=G.getOwnerComponent();var i=e.getModel("_templPriv");i.setProperty("/listReport/isLeaf",e.getIsLeaf());}function K(e,i){var Z=e&&e.property;return Z.filter(function($){return typeof $[i]!=="undefined";});}function M(e){var i=e.SelectOptions,Z=l.resolveParameterStringValue(e.Parameters);var $=new k(null,"/");var a1={};if(i){i.forEach(function(b1){b1.PropertyName=b1.PropertyName.PropertyPath;b1.Ranges.forEach(function(c1){c1.Sign=c1.Sign.EnumMember.split("/")[1];c1.Option=c1.Option.EnumMember.split("/")[1];c1.Low=n.resolveSelectOptionValue($,c1.Low);c1.High=n.resolveSelectOptionValue($,c1.High);});});a1.SelectOptions=i;}if(Z){Z.forEach(function(b1){b1.PropertyName=b1.PropertyName.PropertyPath;b1.PropertyValue=O.format($,b1.PropertyValue)||null;});a1.Parameters=Z;}return new S(a1);}function N(i){var Z=i.getModel(),$=Z&&Z.getMetaModel(),a1=$&&$.getODataEntityType(i.getEntityType()),b1,c1=$&&$.getODataEntityType(i.getEntityType(),true),d1=l.createSVAnnotation(a1,$,H.oController.getOwnerComponent().getQualifier());if(H.oController.getOwnerComponent().getFilterDefaultsFromSelectionVariant()&&d1){b1=M(q({},d1));}else{if(H.oController.getOwnerComponent().getFilterDefaultsFromSelectionVariant()&&!d1){L.warning("No SelectionVariant found in the annotation : No default values filled in FilterBar");}var e1=a1&&K(a1,"com.sap.vocabularies.Common.v1.FilterDefaultValue"),f1,g1,h1,i1,j1,k1=[];try{f1=new c.Model(new c.Model.ReferenceByModel(Z));j1=f1&&f1.findQueryResultByName(i.getEntitySet());g1=j1&&j1.getParameterization();h1=g1&&$.getODataEntitySet(g1.getEntitySet().getQName());i1=h1&&$.getODataEntityType(h1.entityType);k1=i1?K(i1,"defaultValue"):[];}catch(e){L.error(e);}if(e1.length>0||k1.length>0){b1=new S();e1.forEach(function(l1){var m1=$.createBindingContext(c1+"/property/[${path:'name'}===\'"+l1.name+"']/com.sap.vocabularies.Common.v1.FilterDefaultValue");b1.addSelectOption(l1.name,"I","EQ",O.format(m1));});k1.forEach(function(l1){b1.addParameter(l1.name,l1.defaultValue);});}}return b1;}function P(e){var i=e.getSource(),Z=N(i);if(Z){H.oIappStateHandler.fnSetFiltersUsingUIState(Z.toJSONObject(),true,false);}H.oIappStateHandler.onSmartFilterBarInitialise();G.onInitSmartFilterBarExtension(e);G.templateBaseExtension.onInitSmartFilterBar(e);}function Q(){H.oSmartFilterbar.setShowOldFilterDialog();var e=H.oIappStateHandler.onSmartFilterBarInitialized();e.then(function(){H._bIsStartingUp=false;if(H.bVisualFilterInitialised){H.oIappStateHandler.fnUpdateVisualFilterBar();}if(H.sNavType!==sap.ui.generic.app.navigation.service.NavType.iAppState){H.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();}},function(i){if(i instanceof Error){i.showMessageBox();}H.oIappStateHandler.fnOnError();H._bIsStartingUp=false;}).finally(function(){if(H.oSmartFilterableKPI){var i=H.oSmartFilterableKPI.getContent();i.forEach(function(Z){if(Z.getSmartFilterId){Z._bStopDataLoad=false;Z._updateKpiList(true);}});}});}function R(e){var i=e.getSource(),Z=e.getParameters().limitReached,$=i.getSelectedIndices(),a1,b1;if($.length>0){if(Z){a1="Your last selection was limited to the maximum of "+i.getLimit()+" items.";B.oServices.oApplication.showMessageToast(a1);}}b1=i.getParent();B.oCommonUtils.setEnabledToolbarButtons(b1);}function U(e){var i=e.getParameters();var Z=e.getSource();B.oCommonEventHandlers.onSemanticObjectLinkNavigationPressed(Z,i);}function W(e){var i,Z;i=e.getParameters();Z=e.getSource();B.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(Z,i,H,undefined,undefined);}function _(e){var i=H.oSmartFilterbar;var Z=[];if(e.fetchVariant()&&e.fetchVariant().filter&&e.fetchVariant().filter.filterItems){Z=e.fetchVariant().filter.filterItems;}var $={search:!!i.getBasicSearchValue(),filter:!!(Z.length||i.retrieveFiltersWithValues().length)};return $;}function X(e){var i=e.getId();var Z=_(e);var $="";if(Z.search||Z.filter){$=B.oCommonUtils.getContextText("NOITEMS_SMARTCHART_WITH_FILTER",i);}else{$=B.oCommonUtils.getContextText("NOITEMS_SMARTCHART",i);}e.getChartAsync().then(function(a1){a1.setCustomMessages({NO_DATA:$});});}function Y(e){var i={shareEmailPressed:function(){var $=B.oCommonUtils.getText("EMAIL_HEADER",[B.oServices.oApplication.getAppTitle()]);sap.m.URLHelper.triggerEmail(null,$,document.URL);},shareJamPressed:function(){p.openJamShareDialog(B.oServices.oApplication.getAppTitle());},getDownloadUrl:function(){var $=H.oSmartTable.getTable();var a1=$.getBinding("rows")||$.getBinding("items");return a1&&a1.getDownloadUrl()||"";},getServiceUrl:function(){var $="";var a1=B.oComponentUtils.getSettings();var b1=H.oSmartFilterbar&&H.oSmartFilterbar.getUseDateRangeType();if(!b1&&s.isServiceUrlAllowedBySemanticDateRangeFilter(a1,H.oSmartFilterbar)){$=i.getDownloadUrl();if($){$+="&$top=0&$inlinecount=allpages";}}var c1={serviceUrl:$};G.onSaveAsTileExtension(c1);return c1.serviceUrl;},getModelData:function(){var $=o.get("sap.ushell.Container.getUser");var a1=G.getOwnerComponent();var b1=a1.getAppComponent();var c1=b1.getMetadata();var d1=c1.getManifestEntry("sap.ui");var e1=(d1&&d1.icons&&d1.icons.icon)||"";var f1=c1.getManifestEntry("sap.app");var g1=(f1&&f1.title)||"";return{serviceUrl:i.getServiceUrl(),icon:e1,title:g1,isShareInJamActive:!!$&&$().isJamActive(),customUrl:p.getCustomUrl()};}};p.openSharePopup(B.oCommonUtils,e,i);var Z=this.getView().byId("bookmarkButton");Z.setBeforePressHandler(function(){e.focus();});}return{onInit:function(){var e=G.getOwnerComponent();L.setLevel(u.WARNING,"ALPSmartFilterBar");var Z=e.getModel("_templPriv");Z.setProperty("/alp",{filterMode:e.getHideVisualFilter()?x:e.getDefaultFilterMode(),contentView:e.getDefaultContentView(),autoHide:e.getAutoHide(),visibility:{hybridView:(D.system.phone||D.system.tablet&&!D.system.desktop)?false:true},filterChanged:false});H.hideVisualFilter=e.getHideVisualFilter();H.hideVisualFilter=(H.hideVisualFilter===undefined||H.hideVisualFilter!==true)?false:true;H.oSmartFilterbar=G.byId("template::SmartFilterBar");H.oSmartTable=G.byId("table");H.oSmartFilterableKPI=G.byId("template::KPITagContainer::filterableKPIs");H.oPage=G.byId("template::Page");H.oSmartChart=G.byId("chart");if(G.getOwnerComponent().getProperty("dshQueryName")){H.oAnalyticGridContainer=G.byId("template::AnalyticGridContainer");H.oAnalyticGridController=new A();H.oAnalyticGridController.setState(H);}H.alr_compactFilterContainer=G.byId("template::CompactFilterContainer");H.alr_visualFilterContainer=G.byId("template::VisualFilterContainer");H.alr_filterContainer=G.byId("template::FilterContainer");H.alr_visualFilterBar=G.byId("template::VisualFilterBar");H.alp_ColumnListItem=G.byId("template::responsiveHightlightCol");if(H.alr_visualFilterBar){H.alr_visualFilterBar.setSmartFilterId(H.oSmartFilterbar.getId());H.alr_visualFilterBar.attachOnFilterItemAdded(function(i){var l1=i.getParameters();l1.attachBeforeRebindVisualFilter(function(m1){var n1=m1.getParameters();var o1=n1.sEntityType;var p1=n1.sDimension;var q1=n1.sMeasure;var r1=n1.oContext;var h1=H.oController;h1.onBeforeRebindVisualFilterExtension(o1,p1,q1,r1);});});}H.oKpiTagContainer=G.byId("template::KPITagContainer::globalKPIs");H.oFilterableKpiTagContainer=G.byId("template::KPITagContainer::filterableKPIs");if(H.oKpiTagContainer||H.oFilterableKpiTagContainer){sap.ui.require(["sap/suite/ui/generic/template/AnalyticalListPage/controller/KpiTagController"],function(i){i.init(H);});}H.oContentArea=new C();H.oTemplateUtils=B;H.toolbarController=new T();H.oController=G;H.filterBarController=new F();H.filterBarController.init(H);H.oContentArea.createAndSetCustomModel(H);H.oContentArea.setState(H);if(!H.hideVisualFilter){H.visualFilterBarContainer=new V();H.visualFilterBarContainer.init(H);}if(H.alr_visualFilterBar){H.alr_visualFilterBar.addEventDelegate({onAfterRendering:function(){if(H.oSmartFilterbar.isInitialised()){H.oSmartFilterbar.setFilterData({_CUSTOM:H.oIappStateHandler.getFilterState()});}}});}H.oIappStateHandler=new I(H,G,B);J();G.byId("template::FilterText").attachBrowserEvent("click",function(){G.byId("template::Page").setHeaderExpanded(true);});Z.setProperty("/listReport/isHeaderExpanded",true);if(H.oSmartTable){var $=H.oSmartTable.getTable();}var a1="sapUiSizeCozy",b1="sapUiSizeCompact",c1="sapUiSizeCondensed";if(B.oCommonUtils.isUiTable($)||$ instanceof b){var d1=G.getView();var e1=document.body;if(e1.classList.contains(a1)||d1.hasStyleClass(a1)){H.oSmartTable.addStyleClass(a1);}else if(e1.classList.contains(b1)||d1.hasStyleClass(b1)){var f1=e.getCondensedTableLayout();if(f1===false){H.oSmartTable.addStyleClass(b1);}else{H.oSmartTable.addStyleClass(c1);}}}if(H.oSmartFilterableKPI){H.oSmartFilterableKPI.setModel(e.getModel("_templPriv"),"_templPriv");var g1=H.oSmartFilterableKPI.getContent(),h1=H.oController;g1.forEach(function(i){if(i.getSmartFilterId){i.attachBeforeRebindFilterableKPI(function(l1){var m1=l1.getParameters(),n1=m1.selectionVariant,o1=m1.entityType,p1=l1.getSource().getId();h1.onBeforeRebindFilterableKPIExtension(n1,o1,p1);},h1);}});}z.getUrlParameterInfo=function(){return H.oIappStateHandler.getUrlParameterInfo();};z.onComponentActivate=function(){};z.refreshBinding=function(){if(H.alr_visualFilterBar&&H.alr_visualFilterBar.updateVisualFilterBindings){H.alr_visualFilterBar.updateVisualFilterBindings();}if(H.oSmartChart&&H.oSmartChart.rebindChart){H.oSmartChart.rebindChart();}if(H.oSmartTable){B.oCommonUtils.refreshSmartTable(H.oSmartTable);}if(H.oKpiTagContainer){var l1=H.oKpiTagContainer.mAggregations.content;for(var i in l1){if(l1[i]._createGlobalKpi){l1[i]._createGlobalKpi();}}}if(H.oFilterableKpiTagContainer){var l1=H.oFilterableKpiTagContainer.mAggregations.content;for(var i in l1){if(l1[i]._createFilterableKpi){l1[i]._createFilterableKpi();}}}};if(H.alr_visualFilterBar){H.alr_visualFilterBar.attachInitialized(function(i){H.bVisualFilterInitialised=true;if(!H._bIsStartingUp){H.oIappStateHandler.fnUpdateVisualFilterBar(true);}});}H.oSmartFilterbar.attachFilterChange(function(i){var Z=e.getModel("_templPriv");H.oIappStateHandler.fnCheckMandatory();var l1=H.oSmartFilterbar.isDialogOpen();var m1=i.getSource(),n1;n1=r({},m1.getFilterData(true));if(l1&&H.visualFilterDialogContainer){var o1=H.visualFilterDialogContainer.oVerticalBox.getModel("_dialogFilter");o1.setData(n1);}else{var p1=H.oController.getOwnerComponent().getModel("_filter");p1.setData(n1);}if(i.getParameters().filterItem){if(!H.hideVisualFilter){H.filterBarController.changeVisibility(i);}Z.setProperty('/alp/_ignoreChartSelections',false);}H.filterBarController._updateFilterLink();if(!H.oSmartFilterbar.isLiveMode()&&!H.oSmartFilterbar.isDialogOpen()){if(H.oSmartFilterableKPI&&H.oSmartFilterableKPI.getEnabled()){Z.setProperty('/alp/filterChanged',true);}}});var d1=G.getView();var e1=document.body;var i1,j1;if(e1.classList.contains(a1)||d1.hasStyleClass(a1)){i1=true;}if(i1&&e.getTableType()!=="ResponsiveTable"){var k1=e.getModel("_templPriv");if(D.resize.height<=y){j1=k1.getProperty('/alp/contentView');k1.setProperty('/alp/enableHybridMode',false);k1.setProperty('/alp/contentView',j1==="charttable"?"chart":j1);}H.resizeHandler=function(i){var l1=i.height;if(l1<=y){j1=k1.getProperty('/alp/contentView');k1.setProperty('/alp/enableHybridMode',false);k1.setProperty('/alp/contentView',j1==="charttable"?"chart":j1);}else{k1.setProperty('/alp/enableHybridMode',true);}};D.resize.attachHandler(H.resizeHandler);}},onExit:function(){if(H.resizeHandler){D.resize.detachHandler(H.resizeHandler);}},handlers:{onBack:function(){B.oServices.oNavigationController.navigateBack();},addEntry:function(e){var i=e.getSource();B.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){B.oCommonEventHandlers.addEntry(i,false,H.oSmartFilterbar);},Function.prototype,H);},deleteEntries:function(e){B.oCommonEventHandlers.deleteEntries(e);},onSelectionChange:function(e){var Z=e.getSource(),$=Z.getModel(),a1=Z.getModel("_templPriv");var b1=$.getMetaModel(),c1=b1.getODataEntitySet(this.getOwnerComponent().getEntitySet()),d1=c1["Org.OData.Capabilities.V1.DeleteRestrictions"];var e1=(d1&&d1.Deletable&&d1.Deletable.Path)?d1.Deletable.Path:"";var f1=false;var g1=true;var h1=(e1&&e1!=="");var i1=B.oCommonUtils.getSelectedContexts(Z);if(i1.length>0){for(var i=0;i<i1.length;i++){var j1=$.getObject(i1[i].getPath());if(!(j1.IsActiveEntity&&j1.HasDraftEntity&&j1.DraftAdministrativeData&&j1.DraftAdministrativeData.InProcessByUser)){g1=false;}if(h1){if($.getProperty(e1,i1[i])){h1=false;}}if(!g1&&!h1){f1=true;break;}}}a1.setProperty("/listReport/deleteEnabled",f1);},onMultiSelectionChange:R,onChange:function(e){B.oCommonEventHandlers.onChange(e);},onSmartFieldUrlPressed:function(e){B.oCommonEventHandlers.onSmartFieldUrlPressed(e,H);},onContactDetails:function(e){B.oCommonEventHandlers.onContactDetails(e);},onSmartFilterBarInitialise:P,onSmartFilterBarInitialized:Q,onEditStateFilterChanged:function(e){e.getSource().fireChange();},onFilterPress:function(e){H.filterBarController.showDialog.call(H.filterBarController);},onClearPress:function(e){H.filterBarController.clearFilters();G.onClearFilterExtension(e);},onGoPress:function(e){H.filterBarController.fnCheckMandatory();var i=H.oSmartFilterbar.isDialogOpen();if(!i){H.filterBarController.onGoFilter();}},onBeforeSFBVariantSave:function(){if(H.oSmartFilterbar.isDialogOpen()&&!H.hideVisualFilter){H.visualFilterDialogContainer._updateFilterBarFromDialog.call(H.visualFilterDialogContainer);}var e=H.oIappStateHandler.getCurrentAppState();if(!this.getOwnerComponent().getProperty('smartVariantManagement')){delete e.customData["sap.suite.ui.generic.template.genericData"].contentView;}var i=H.oSmartFilterbar.getFilterData(true);var Z,$=H.oSmartFilterbar.getBasicSearchControl();if($&&$.getValue){Z=$.getValue();}i._CUSTOM=e.customData;H.oSmartFilterbar.setFilterData(i,true);if(Z){H.oSmartFilterbar.getBasicSearchControl().setValue(Z);}H.oSmartFilterbar.fireFilterChange();},onAfterSFBVariantLoad:function(e){if(!H.oSmartFilterbar.isDialogOpen()){H.filterBarController._afterSFBVariantLoad();if(H.oSmartFilterableKPI&&!H.oSmartFilterbar.isLiveMode()){var i=H.oSmartFilterableKPI.getContent();i.forEach(function(Z){if(Z.getSmartFilterId){if(e.getParameter("executeOnSelect")){Z.bSearchTriggred=true;}}});}}},onBeforeRebindChart:function(e){var i=e.getSource();X(i);},onListNavigate:function(e){B.oCommonEventHandlers.onListNavigate(e,H);},onCallActionFromToolBar:function(e){var i=B.oCommonUtils.getParentTable;B.oCommonUtils.getParentTable=function(){return H.oSmartTable;};B.oCommonEventHandlers.onCallActionFromToolBar(e,H);B.oCommonUtils.getParentTable=i;i=null;},onCallActionFromList:function(e){},onDataFieldForIntentBasedNavigation:function(e){B.oCommonEventHandlers.onDataFieldForIntentBasedNavigation(e,H);},onDataFieldWithIntentBasedNavigation:function(e){B.oCommonEventHandlers.onDataFieldWithIntentBasedNavigation(e,H);},onBeforeSemanticObjectLinkPopoverOpens:function(e){var i=e.getParameters();B.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var Z=H.oSmartFilterbar.getUiState({allFilters:false}).getSelectionVariant();B.oCommonUtils.semanticObjectLinkNavigation(i,Z,G);},Function.prototype,H,Function.prototype);},onAssignedFiltersChanged:function(e){if(e&&e.getSource()){if(H&&H.oSmartFilterbar&&H.filterBarController){G.byId("template::FilterText").setText(H.oSmartFilterbar.retrieveFiltersWithValuesAsText());}}},onToggleFiltersPressed:function(){var e=G.getOwnerComponent();var i=e.getModel("_templPriv");i.setProperty("/listReport/isHeaderExpanded",(i.getProperty("/listReport/isHeaderExpanded")===true)?false:true);},onSearchButtonPressed:function(){if(D.system.phone&&H.oPage.getHeaderExpanded()){H.oPage.setHeaderExpanded(false);}var e=G.getOwnerComponent().getModel();if(H.oSmartFilterableKPI&&!H.oSmartFilterableKPI.getEnabled()){H.oController.getOwnerComponent().getModel("_templPriv").setProperty('/alp/filterChanged',false);}e.attachEventOnce("requestSent",function(){if(!H._bIsStartingUp){H.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();}else{H.oIappStateHandler.fnResolveStartUpPromise();}});H.oController.getOwnerComponent().getModel("_templPriv").setProperty('/alp/_ignoreChartSelections',true);B.oCommonUtils.refreshModel(H.oSmartTable);},onSemanticObjectLinkPopoverLinkPressed:function(e){B.oCommonEventHandlers.onSemanticObjectLinkPopoverLinkPressed(e,H);},onSemanticObjectLinkNavigationPressed:U,onSemanticObjectLinkNavigationTargetObtained:W,onAfterTableVariantSave:function(){H.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onAfterApplyTableVariant:function(){H.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onAfterChartVariantSave:function(e){H.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();B.oCommonUtils.setEnabledToolbarButtons(e.getSource());},onAfterApplyChartVariant:function(){H.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onFilterModeSegmentedButtonChange:function(e){H.filterBarController.handleFilterSwitch(e.getParameter("key"),e.oSource._bApplyingVariant);H.oController._templateEventHandlers.onSegmentButtonPressed();},onContentViewSegmentButtonPressed:function(e){if(e.getParameter("key")==="crosstable"&&!H.oAnalyticGrid){H.oAnalyticGridController.initAnalyticGrid();}if(!H.oSmartFilterableKPI&&!H.oController.getOwnerComponent().getContentTitle()){var i=H.oController.getView(),Z;if(e.getSource().getSelectedKey()==="customview1"){Z="template::contentViewExtensionToolbar";}else if(e.getSource().getSelectedKey()==="customview2"){Z="template::contentViewExtension2Toolbar";}else if(e.getSource().getSelectedKey()==="chart"||e.getSource().getSelectedKey()==="charttable"){Z=i.byId("template::masterViewExtensionToolbar")?"template::masterViewExtensionToolbar":"template::ChartToolbar";}else if(e.getSource().getSelectedKey()==="table"){Z="template::TableToolbar";}H.oController._templateEventHandlers.setFocusOnContentViewSegmentedButtonItem(i,Z);}H.oController._templateEventHandlers.onSegmentButtonPressed(!H.oController.getOwnerComponent().getProperty('smartVariantManagement'));},setFocusOnContentViewSegmentedButtonItem:function(e,i){var Z=e.byId(i);if(Z){var $=Z.getContent().length,a1=Z.getContent()[$-1];if(a1){a1.addEventDelegate({onAfterRendering:function(b1){b1.srcControl.focus();}});}}},onSegmentButtonPressed:function(i){if(!i){H.oController.byId('template::PageVariant').currentVariantSetModified(true);H.oSmartFilterbar.setFilterData({_CUSTOM:H.oIappStateHandler.getFilterState()});}H.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onShareListReportActionButtonPress:function(e){B.oCommonUtils.executeIfControlReady(Y,"template::Share");},onDeterminingDataFieldForAction:function(e){var i=H.oController.getOwnerComponent().getModel("_templPriv");var Z=i.getProperty('/alp/contentView');var $=(Z===v)?H.oSmartChart:H.oSmartTable;B.oCommonEventHandlers.onDeterminingDataFieldForAction(e,$);},onDeterminingDataFieldForIntentBasedNavigation:function(e){var i=e.getSource();var Z=H.oController.getOwnerComponent().getModel("_templPriv");var $=Z.getProperty('/alp/contentView');var a1=($===v)?H.oSmartChart:H.oSmartTable.getTable();B.oCommonEventHandlers.onDeterminingDataFieldForIntentBasedNavigation(i,a1,H);},onInlineDataFieldForAction:function(e){B.oCommonEventHandlers.onInlineDataFieldForAction(e,H);},onInlineDataFieldForIntentBasedNavigation:function(e){B.oCommonEventHandlers.onInlineDataFieldForIntentBasedNavigation(e.getSource(),H);},onAutoHideToggle:function(){H.oSmartTable.getModel("_tableHighlight").setProperty("/highlightMode","eyeModeSwitch");H.chartController&&H.chartController._updateTable();H.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onFullScreenToggled:function(e){var i=e.getParameter("fullScreen");var Z=e.getSource().getModel("_templPriv");Z.setProperty("/alp/fullScreen",i);},onDialogClosed:function(e){H.visualFilterDialogContainer._closeDialog.call(H.visualFilterDialogContainer);},onDialogOpened:function(e){var i=H.oSmartFilterbar.getFilterDialogContent();if(!H.visualFilterDialogContainer){H.visualFilterDialogContainer=new a();H.visualFilterDialogContainer.init(H);}if(i.length<2){H.filterBarController.fnCheckMandatory();var Z=[new d({icon:"sap-icon://filter-fields",width:"inherit",key:x,tooltip:"{i18n>FILTER_COMPACT}"}),new d({icon:"sap-icon://filter-analytics",width:"inherit",key:w,tooltip:"{i18n>FILTER_VISUAL}",enabled:"{_templPriv>/alp/searchable}"})];var $=new f({width:"inherit",selectedKey:x,items:Z,select:function(e){var d1=e.getSource();d1.setSelectedKey(x);H.visualFilterDialogContainer._toggle.call(H.visualFilterDialogContainer);}}).addEventDelegate({onAfterRendering:function(e){if(e.srcControl.getCustomData()[0]&&e.srcControl.getCustomData()[0].getValue()){e.srcControl.focus();e.srcControl.removeAllCustomData();}}});var a1=H.visualFilterDialogContainer._createForm();H.oSmartFilterbar.addFilterDialogContent(a1);var b1=new g({design:j.ToolbarDesign.Transparent,content:[new h(),$]}).addStyleClass("sapSmartTemplatesAnalyticalListPageFilterDialogToolbar");i[0].setToolbar(b1);$.setModel(H.oController.getView().getModel("_templPriv"),"_templPriv");}var c1=H.oController.getView().getModel("_templPriv");if(c1.getProperty("/alp/searchable")){if(c1.getProperty("/alp/filterMode")===w){H.oSmartFilterbar.addFilterDialogContent(i[1]);if(D.system.desktop&&(!D.system.phone||!D.system.tablet)){H.oSmartFilterbar.setContentWidth(790);H.oSmartFilterbar.setContentHeight(685);}else if(D.system.tablet){if(D.orientation.portrait){H.oSmartFilterbar.setContentWidth(400);H.oSmartFilterbar.setContentHeight(720);}else if(D.orientation.landscape){H.oSmartFilterbar.setContentWidth(512);H.oSmartFilterbar.setContentHeight(861);}}}else{H.oSmartFilterbar.addFilterDialogContent(i[0]);}}else{H.oSmartFilterbar.addFilterDialogContent(i[0]);}},onSearchForFilters:function(e){H.visualFilterDialogContainer._triggerSearchInFilterDialog.call(H.visualFilterDialogContainer,e);},onDialogSearch:function(e){H.visualFilterDialogContainer._searchDialog.call(H.visualFilterDialogContainer);},onDialogClear:function(e){G.onClearFilterExtension(e);},onRestore:function(e){H.visualFilterDialogContainer._restoreDialog.call(H.visualFilterDialogContainer);},onDialogCancel:function(e){H.visualFilterDialogContainer._cancelDialog.call(H.visualFilterDialogContainer);},onDataReceived:function(e){H.oContentArea.enableToolbar();B.oCommonEventHandlers.onDataReceived(e);},onRowSelectionChange:function(e){var i=e.getSource();B.oCommonUtils.setEnabledToolbarButtons(i);}},extensionAPI:new E(B,G,H)};}};});
