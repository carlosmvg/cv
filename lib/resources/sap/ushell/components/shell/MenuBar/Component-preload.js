//@ui5-bundle sap/ushell/components/shell/MenuBar/Component-preload.js
// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.predefine('sap/ushell/components/shell/MenuBar/Component',["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ushell/Config"],function(U,J,C){"use strict";return U.extend("sap.ushell.components.shell.MenuBar.Component",{metadata:{manifest:"json",library:"sap.ushell"},init:function(){U.prototype.init.apply(this,arguments);var m=new J();this.setModel(m,"menu");sap.ushell.Container.getServiceAsync("Menu").then(function(M){return Promise.all([M.isMenuEnabled(),M.getMenuEntries()]);}).then(function(r){var c;var i=r[0];var M=r[1];if(i){c=sap.ui.getCore().byId("menuBarComponentContainer");}if(c){m.setProperty("/",this._limitListDepth(M,3));c.setComponent(this);}if(C.last("/core/shell/model/currentState/stateName")!=="home"){c.setVisible(false);}}.bind(this));},_limitListDepth:function(l,d){if(d===0){return[];}return l.reduce(function(e,E){if(E.menuEntries){E.menuEntries=this._limitListDepth(E.menuEntries,d-1);}e.push(E);return e;}.bind(this),[]);}});});
sap.ui.predefine('sap/ushell/components/shell/MenuBar/controller/MenuBar.controller',["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/base/util/ObjectPath","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils/WindowUtils","sap/m/IconTabFilter","sap/ushell/utils"],function(C,J,O,E,r,W,I,S){"use strict";return C.extend("sap.ushell.components.shell.MenuBar.controller.MenuBar",{onInit:function(){this.oContainerRouter=sap.ushell.Container.getRenderer().getRouter();this.oContainerRouter.getRoute("home").attachMatched(this._selectIndexAfterRouteChange,this);this.oContainerRouter.getRoute("openFLPPage").attachMatched(this._selectIndexAfterRouteChange,this);this.oEventHubListener=E.on("enableMenuBarNavigation").do(function(e){this.getView().getModel("viewConfiguration").setProperty("/enableMenuBarNavigation",e);}.bind(this));var v=new J({selectedKey:"None Existing Key",enableMenuBarNavigation:true,ariaTexts:{headerLabel:r.i18n.getText("SpacePageNavgiationRegion")}});this.getView().setModel(v,"viewConfiguration");this.oURLParsingService=sap.ushell.Container.getServiceAsync("URLParsing");this.oSpacesPagesHierarchy=sap.ushell.Container.getServiceAsync("Menu").then(function(m){return m.getSpacesPagesHierarchy();});this._selectIndexAfterRouteChange();},onMenuItemSelection:function(e){var s=e.getParameter("key");var m=this.getView().getModel("menu");var M=m.getProperty("/");var d=this._getNestedMenuEntryByUid(M,s);if(d.type==="IBN"){this._performCrossApplicationNavigation(d.target);}if(d.type==="URL"){this._openURL(d.target);}},_getNestedMenuEntry:function(m,c){return m.reduce(function(s,M){if(s){return s;}if(c(M)){return M;}if(M.menuEntries){return this._getNestedMenuEntry(M.menuEntries,c);}}.bind(this),undefined);},_getNestedMenuEntryByUid:function(m,u){function c(M){return M.uid===u;}return this._getNestedMenuEntry(m,c);},_performCrossApplicationNavigation:function(d){return sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(c){var p={};d.parameters.forEach(function(P){if(P.name&&P.value){p[P.name]=[P.value];}});c.toExternal({target:{semanticObject:d.semanticObject,action:d.action},params:p});});},_openURL:function(d){W.openURL(d.url,"_blank");},_selectIndexAfterRouteChange:function(){var v=this.getView().getModel("viewConfiguration");return Promise.all([this.oURLParsingService,this.oSpacesPagesHierarchy]).then(function(R){var u=R[0];var s=R[1];var a;var h=window.hasher.getHash();var H=u.parseShellHash(h);var m=this.getView().getModel("menu").getProperty("/");if(S.isRootIntent(h)){var o=s.spaces.find(function(d){return(!!(d.id&&d.pages&&d.pages[0]&&d.pages[0].id));});a=(o)?this._getMenuUID(m,o.id,o.pages[0].id)||"":"";v.setProperty("/selectedKey",a);}else{var b=O.get("params.spaceId.0",H);var p=O.get("params.pageId.0",H);var c=v.getProperty("/selectedKey");var M=this._getNestedMenuEntryByUid(m,c);if(this._hasSpaceIdAndPageId(M,b,p)){a=M.uid;}else{a=this._getMenuUID(m,b,p);}if(a){v.setProperty("/selectedKey",a);}else{v.setProperty("/selectedKey","None Existing Key");}}}.bind(this));},_getMenuUID:function(m,s,p){function c(o){return this._hasSpaceIdAndPageId(o,s,p);}var M=this._getNestedMenuEntry(m,c.bind(this));return M&&M.uid;},_hasSpaceIdAndPageId:function(m,s,p){var P=O.get("target.parameters",m)||[];var o=P.find(function(b){return b.name==="spaceId"&&b.value===s;});var a=P.find(function(b){return b.name==="pageId"&&b.value===p;});return o!==undefined&&a!==undefined;},_menuFactory:function(i,c){var o=new I({key:c.getProperty("uid"),text:c.getProperty("title"),enabled:{path:"viewConfiguration>/enableMenuBarNavigation"}});if(c.getProperty("menuEntries")){o.bindAggregation("items",{path:"menu>menuEntries",factory:this._menuFactory.bind(this)});}return o;},onExit:function(){this.oEventHubListener.off();}});});
sap.ui.require.preload({
	"sap/ushell/components/shell/MenuBar/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell.components.shell.MenuBar","applicationVersion":{"version":"1.82.2"},"i18n":{"bundleUrl":"../../../renderers/fiori2/resources/resources.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"type":"component","title":"{{Component.MenuBar.Title}}","resources":"resources.json"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"rootView":{"viewName":"sap.ushell.components.shell.MenuBar.view.MenuBar","type":"XML","async":true},"dependencies":{"minUI5Version":"1.72","libs":{"sap.m":{}}},"models":{},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/shell/MenuBar/view/MenuBar.view.xml":'<View xmlns="sap.m" xmlns:core="sap.ui.core" controllerName="sap.ushell.components.shell.MenuBar.controller.MenuBar" displayBlock="true"><IconTabHeader class="sapUshellShellTabBar" ariaTexts="{viewConfiguration&gt;/ariaTexts}" mode="Inline" showOverflowSelectList="true" items="{menu&gt;/}" selectedKey="{viewConfiguration&gt;/selectedKey}" select=".onMenuItemSelection"><items><IconTabFilter text="{menu&gt;title}" key="{menu&gt;uid}" enabled="{viewConfiguration&gt;/enableMenuBarNavigation}" items="{path:\'menu&gt;menuEntries\',factory:\'._menuFactory\'}"/></items><customData><core:CustomData xmlns:core="sap.ui.core" key="sap-ui-fastnavgroup" value="true" writeToDom="true"/></customData></IconTabHeader></View>'
},"sap/ushell/components/shell/MenuBar/Component-preload"
);
//# sourceMappingURL=Component-preload.js.map