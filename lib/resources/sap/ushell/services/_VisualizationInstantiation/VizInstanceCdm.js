// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/m/library","sap/ui/core/Component","sap/base/util/ObjectPath","sap/base/util/deepExtend"],function(V,m,C,O,d){"use strict";var L=m.LoadState;var a=V.extend("sap.ushell.ui.launchpad.VizInstanceCdm",{metadata:{library:"sap.ushell"},fragment:"sap.ushell.services._VisualizationInstantiation.VizInstanceCdm"});a.prototype.load=function(){var c=this._getComponentConfiguration();var s=this.getInstantiationData().vizType["sap.flp"].tileSize;this._setSize(s);return C.create(c).then(function(o){this._oComponent=o;this._setContent(o.getRootControl());}.bind(this)).catch(function(e){this.setState(L.Failed);return Promise.reject(e);}.bind(this));};a.prototype._getComponentConfiguration=function(){var v=this.getInstantiationData().vizType;var o=this.getVizConfig();var c={name:v["sap.ui5"].componentName,componentData:{properties:this._getComponentProperties()},url:O.get(["sap.platform.runtime","componentProperties","url"],v),manifest:O.get(["sap.platform.runtime","componentProperties","manifest"],v)};var i=O.get(["sap.platform.runtime","includeManifest"],v);var I=O.get(["sap.platform.runtime","includeManifest"],o);if(i||I){c.manifest=d({},v,o);}return c;};a.prototype._getComponentProperties=function(){return{title:this.getTitle(),subtitle:this.getSubtitle(),icon:this.getIcon(),info:this.getInfo(),indicatorDataSource:this.getIndicatorDataSource(),contentProviderId:this.getContentProviderId(),targetURL:this.getTargetURL()};};a.prototype.setActive=function(b,r){if(this._oComponent&&typeof this._oComponent.tileSetVisible==="function"){this._oComponent.tileSetVisible(b);}if(r){this.refresh();}return this.setProperty("active",b,false);};a.prototype.refresh=function(){if(this._oComponent&&typeof this._oComponent.tileRefresh==="function"){this._oComponent.tileRefresh();}};return a;});
