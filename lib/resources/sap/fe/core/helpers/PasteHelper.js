/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2020 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/core/util/PasteHelper","sap/m/MessageBox"],function(C,M){"use strict";var p={_getColumnInfoForPaste:function(t){var c=[],m=t.getRowBinding().getModel(),o=m.getMetaModel(),r=m.resolve(t.getRowBinding().getPath(),t.getRowBinding().getContext()),a=o.getMetaContext(r);t.getColumns().forEach(function(b){var d=b.getDataProperties();if(d.length===0){c.push({property:"unused",type:null,ignore:true});}else{var P=a.getProperty(d[0]),f={parseKeepsEmptyString:true},T=P&&o.getUI5Type(r+"/"+d[0],f),i=!P||a.getProperty(d[0]+"@Org.OData.Core.V1.Computed");c.push({property:d[0],type:T,ignore:i});var A=a.getProperty(d[0]+"@Org.OData.Measures.V1.Unit/$Path")||a.getProperty(d[0]+"@Org.OData.Measures.V1.ISOCurrency/$Path");if(A){var e=a.getProperty(A),g=e&&o.getUI5Type(r+"/"+A);c.push({property:A,type:g,ignore:i,additionalProperty:true});}}});return c;},parseDataForTablePaste:function(r,t){var P=this._getColumnInfoForPaste(t);var i=r.length?r[0].length:0;var f=-1;for(var I=0;I<P.length&&f<0;I++){if(!P[I].ignore){f=I;}}if(f<0||f>i-1){return Promise.resolve([]);}else{return C.parse(r,P).then(function(o){if(o.errors){var e=o.errors.map(function(a){return a.message;});var R=sap.ui.getCore().getLibraryResourceBundle("sap.fe.core"),s,E=R.getText("C_PASTE_HELPER_SAPFE_PASTE_ERROR_CORRECTION_MESSAGE"),n=R.getText("C_PASTE_HELPER_SAPFE_PASTE_ERROR_CORRECTION_NOTE");if(e.length>1){s=R.getText("C_PASTE_HELPER_SAPFE_PASTE_ERROR_MESSAGE_PLURAL",[e.length]);}else{s=R.getText("C_PASTE_HELPER_SAPFE_PASTE_ERROR_MESSAGE_SINGULAR");}e.unshift("");e.unshift(n);e.unshift(E);M.error(s,{icon:M.Icon.ERROR,title:R.getText("C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_TITLE_ERROR"),details:e.join("<br>")});return[];}else{return o.parsedData?o.parsedData:[];}});}}};return p;});
