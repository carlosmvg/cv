sap.ui.define(["../../ManifestSettings","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/annotations/DataField","../../helpers/ID","sap/fe/core/converters/helpers/ConfigurableObject"],function(M,A,D,I,C){"use strict";var _={};var a=C.insertCustomElements;var F=I.FilterBarID;var b=I.ChartID;var c=D.isDataFieldForActionAbstract;var g=A.getActionsFromManifest;var d=M.ActionType;var V=M.VisualizationType;function e(n,i){return l(n)||k(n,i)||h(n,i)||f();}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function h(o,i){if(!o)return;if(typeof o==="string")return j(o,i);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(o,i);}function j(n,o){if(o==null||o>n.length)o=n.length;for(var i=0,s=new Array(o);i<o;i++){s[i]=n[i];}return s;}function k(n,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(n)))return;var o=[];var s=true;var t=false;var u=undefined;try{for(var v=n[Symbol.iterator](),w;!(s=(w=v.next()).done);s=true){o.push(w.value);if(i&&o.length===i)break;}}catch(x){t=true;u=x;}finally{try{if(!s&&v["return"]!=null)v["return"]();}finally{if(t)throw u;}}return o;}function l(i){if(Array.isArray(i))return i;}function m(i,v,n){var o=[];if(i){var s=n.getAbsoluteAnnotationPath(v);var t=i.Actions||[];t.forEach(function(u,w){var x,y;var z;if(c(u)&&!(((x=u.annotations)===null||x===void 0?void 0:(y=x.UI)===null||y===void 0?void 0:y.Hidden)===true)&&!u.Inline&&!u.Determining){var B=s+"/Actions/"+w;switch(u.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":z={type:d.DataFieldForAction,annotationPath:B,key:"DataFieldForAction::"+u.Action.replace(/\//g,"::")};break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":z={type:d.DataFieldForIntentBasedNavigation,annotationPath:B,key:"DataFieldForIntentBasedNavigation::"+u.SemanticObject+"::"+u.Action+(u.RequiresContext?"::RequiresContext":"")};break;}}if(z){o.push(z);}});}return o;}function p(i,v,n){return a(m(i,v,n),g(n.getManifestControlConfiguration(v).actions),{enableOnSelect:"overwrite"});}_.getChartActions=p;function q(v,i){var n;var o=i.getManifestWrapper();var s=i.getManifestControlConfiguration(v);var t=["Page","Control"].indexOf(o.getVariantManagement())>-1;var u=true;var P=[];if((s===null||s===void 0?void 0:(n=s.chartSettings)===null||n===void 0?void 0:n.personalization)!==undefined){u=s.chartSettings.personalization;}if(t&&u){if(u===true){return"Sort,Type,Item";}else if(typeof u==="object"){if(u.type){P.push("Type");}if(u.item){P.push("Item");}if(u.sort){P.push("Sort");}return P.join(",");}}return undefined;}_.getP13nMode=q;function r(i,v,n){var o=p(i,v,n);var s=v.split("@"),t=e(s,1),u=t[0];if(u.lastIndexOf("/")===u.length-1){u=u.substr(0,u.length-1);}var w=n.getEntitySet();var x=u.length===0;var y=x?w.name:w.navigationPropertyBinding[u].name;var z=x?F(y):undefined;var B={"legendGroup":{"layout":{"position":"bottom"}}};return{type:V.Chart,id:b(x?y:u,V.Chart),collection:"/"+w.name+(!x?"/"+u:""),entityName:y,p13nMode:q(v,n),navigationPath:u,annotationPath:n.getAbsoluteAnnotationPath(v),filterId:z,vizProperties:JSON.stringify(B),actions:o};}_.createChartVisualization=r;return _;},false);
