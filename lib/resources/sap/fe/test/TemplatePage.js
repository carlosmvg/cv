sap.ui.define(["sap/ui/test/OpaBuilder","sap/ui/test/Opa5","sap/ui/core/util/ShortcutHelper","sap/fe/test/Utils","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/MdcFieldBuilder","sap/fe/test/builder/MdcTableBuilder","sap/fe/test/builder/DialogBuilder","sap/fe/test/api/TableAssertions","sap/fe/test/api/TableActions","sap/fe/test/builder/MdcFilterBarBuilder","sap/fe/test/api/FilterBarAssertions","sap/fe/test/api/FilterBarActions","sap/base/util/deepEqual","sap/ushell/resources"],function(O,a,S,U,F,b,T,D,c,d,e,f,g,h,r){"use strict";function _(o,t){var j=T.create(o);if(U.isOfType(t,String)){j.hasProperties({header:t});}else{j.hasId(t.id);}return j;}function i(o,v){return e.create(o).hasId(v.id);}return{create:function(v,E){var R=sap.ui.getCore().getLibraryResourceBundle("sap.fe.templates"),o=sap.ui.getCore().getLibraryResourceBundle("sap.fe.core");return{viewId:v,actions:{_onTable:function(t){return new d(_(this,t),t);},_onFilterBar:function(j){return new g(i(this,j),j);},iCloseMessageErrorDialog:function(){return O.create(this).isDialogElement().hasType("sap.m.Bar").hasAggregation("contentMiddle",O.Matchers.properties({text:"Error"})).do(O.create(this).isDialogElement().hasType("sap.m.Dialog").doOnAggregation("beginButton",O.Matchers.resourceBundle("text","sap.fe.core","C_COMMON_SAPFE_CLOSE"),O.Actions.press())).description("Closing message error dialog").execute();},iNavigateBackInDialog:function(){return O.create(this).isDialogElement().hasType("sap.m.Bar").doOnAggregation("contentLeft",O.Matchers.properties({icon:"sap-icon://nav-back",visible:true}),O.Actions.press()).description("Navigating back in dialog").execute();},iOpenVHOnActionDialog:function(s){var j="APD_::"+s+"-inner-vhi";return O.create(this).hasId(j).isDialogElement().doPress().description("Opening value help for '"+s+"'").execute();},_iPressKeyboardShortcut:function(I,s,p,t){return O.create(this).hasId(I).hasProperties(p?p:{}).hasType(t).do(function(j){var n=S.parseShortcut(s);n.type="keydown";j.$().trigger(n);}).description("Execute keyboard shortcut "+s).execute();},iConfirmDialogWithButtonText:function(t){return D.create(this).doPressFooterButton(O.Matchers.properties({text:t})).description("Clicking dialog footer button '"+t+"'").execute();},iCancelActionDialog:function(){return this.iConfirmDialogWithButtonText(o.getText("C_COMMON_ACTION_PARAMETER_DIALOG_CANCEL"));},iConfirmCustomAction:function(t){return O.create(this).hasType("sap.m.Button").hasProperties({text:t}).doPress().description("Custom Action in Table ToolBar").execute();},iConfirmDialog:function(){return this.iConfirmDialogWithButtonText(o.getText("C_COMMON_DIALOG_OK"));},iConfirmDelete:function(){return this.iConfirmDialogWithButtonText(R.getText("C_COMMON_OBJECT_PAGE_DELETE"));},iConfirmActionVHDialog:function(s,A,j){return O.create(this).hasId(s+"."+A+"::"+j+"-ok").isDialogElement().doPress().description("Confirming value help dialog for action "+A).execute();},iCancelActionVHDialog:function(s,A,j){return O.create(this).hasId(s+"."+A+"::"+j+"-cancel").isDialogElement().doPress().description("Cancelling value help dialog for action "+A).execute();},iCollapseExpandPageHeader:function(C){var j=O.Matchers.resourceBundle("tooltip","sap.f","COLLAPSE_HEADER_BUTTON_TOOLTIP"),k=O.Matchers.resourceBundle("tooltip","sap.f","EXPAND_HEADER_BUTTON_TOOLTIP");return O.create(this).hasType("sap.m.Button").has(O.Matchers.some(j,k)).doConditional(C?j:k,O.Actions.press()).description("Resizing of the Page Header").execute();},iCloseMessageBox:function(){return this.iConfirmDialogWithButtonText(o.getText("C_COMMON_SAPFE_CLOSE"));}},assertions:{_onTable:function(t){return new c(_(this,t),t);},_onFilterBar:function(j){return new f(i(this,j),j);},iSeeThisPage:function(){return O.create(this).hasId(v).viewId(null).viewName(null).description(U.formatMessage("Seeing the page '{0}'",v)).execute();},iSeeFilterDefinedOnActionDialogValueHelp:function(A,V,s,j){return O.create(this).hasId(A+"::"+V+"::FilterBar::FilterField::"+s+"-inner").isDialogElement().hasAggregationProperties("tokens",{text:j}).description("Seeing filter for '"+s+"' set to '"+j+"'").execute();},_iSeeTheMessageToast:function(t){return F.createMessageToastBuilder(t).execute(this);},iSeeMessageErrorDialog:function(){return O.create(this).isDialogElement().hasType("sap.m.Bar").hasAggregation("contentMiddle",O.Matchers.properties({"text":"Error"})).description("Seeing message error dialog").execute();},_iSeeButtonWithText:function(t,B){return F.create(this).hasType("sap.m.Button").hasProperties({text:t}).hasState(B).checkNumberOfMatches(1).description(U.formatMessage("Seeing Button with text '{0}'"+(B?" with state: '{1}'":""),t,B)).execute();},_iSeeElement:function(I,j){return F.create(this).hasId(I).hasState(j).description(U.formatMessage("Seeing Element '{0}'"+(j?" with state: '{1}'":""),I,j)).execute();},iSeeActionParameterDialog:function(s){return O.create(this).hasType("sap.m.Dialog").hasProperties({title:s}).isDialogElement().description("Seeing Action Parameter Dialog with title '"+s+"'").execute();},iSeeActionCustomDialog:function(s){return O.create(this).hasType("sap.m.Text").hasProperties({text:s}).isDialogElement().description("Seeing Action Custom Dialog '"+s+"'").execute();},iSeeActionDefaultDialog:function(){return(O.create(this).hasType("sap.m.Text").has(O.Matchers.resourceBundle("text","sap.fe.core","C_OPERATIONS_ACTION_CONFIRM_MESSAGE")).isDialogElement().description("Seeing Action Default Dialog ").execute());},iSeeActionParameterContent:function(s,C){var j="APD_::"+s+"-inner",B=O.create(this).hasId(j).isDialogElement().description("Seeing Action parameter '"+s+"' with content '"+C+"'");if(C){B.hasProperties({value:C});}return B.execute();},iSeeActionVHDialog:function(s,A,j){return O.create(this).hasId(s+"."+A+"::"+j+"-dialog").isDialogElement().description("Seeing Action Value Help dialog for field "+j).execute();},iSeeActionVHDialogFilterBar:function(s,A,j){return O.create(this).hasId(s+"."+A+"::"+j+"::FilterBar").isDialogElement().description("Seeing Action Value Help FilterBar for field "+j).execute();},iSeeActionVHDialogTable:function(s,A,j){return O.create(this).hasId(s+"."+A+"::"+j+"::Table").isDialogElement().description("Seeing Action Value Help Table for field "+j).execute();},iSeePageHeaderButton:function(C){return O.create(this).hasType("sap.m.Button").has(O.Matchers.resourceBundle("tooltip","sap.f",C?"COLLAPSE_HEADER_BUTTON_TOOLTIP":"EXPAND_HEADER_BUTTON_TOOLTIP")).description("Seeing the "+(C?"Collapse":"Expand")+" Page Header Button").execute();},iSeeTileCreationMessage:function(){return this._iSeeTheMessageToast(r.i18n.getText("tile_created_msg"));},iSeeErrorMessage:function(s){var j=O.create(this).hasType("sap.m.Dialog").isDialogElement(true).hasProperties({icon:"sap-icon://message-error",title:"Error"});if(s){j=j.hasAggregationProperties("content",{text:s});}return j.doOnChildren(O.create(this).hasType("sap.m.Button").hasProperties({text:"Close"}).checkNumberOfMatches(1).doPress().error("Cannot close the dialog ")).description("Seeing error message dialog open").execute();},iSeeMessageBoxWithTitle:function(t){return O.create(this).hasType("sap.m.Dialog").isDialogElement(true).hasProperties({title:t}).description("Seeing error message dialog open").execute();},iSeeBackButtonInDialog:function(V){if(V===undefined){V=true;}return O.create(this).isDialogElement().hasType("sap.m.Bar").hasAggregation("contentLeft",O.Matchers.properties({icon:"sap-icon://nav-back",visible:V})).description(U.formatMessage("Seeing back button in dialog in '{0}' state",V?"visible ":"invisible ")).execute();},iSeeMessageViewInDialog:function(m){return O.create(this).isDialogElement().hasType("sap.m.MessageView").hasAggregation("items",O.Matchers.properties(m)).description(U.formatMessage("Seeing message '{0}' in Message View dialog",m)).execute();}}};}};});
