sap.ui.define(["./BaseAPI","sap/fe/test/Utils","sap/ui/test/OpaBuilder","sap/ui/test/actions/Action","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/MdcFilterBarBuilder","sap/fe/test/builder/MdcFilterFieldBuilder","sap/fe/core/model/DraftEditState"],function(B,U,O,A,F,a,b,E){"use strict";var c=function(f,v){if(!U.isOfType(f,a)){throw new Error("oFilterBarBuilder parameter must be a FilterBarBuilder instance");}return B.call(this,f,v);};c.prototype=Object.create(B.prototype);c.prototype.constructor=c;c.EditState={All:E.ALL.id,Unchanged:E.UNCHANGED.id,OwnDraft:E.OWN_DRAFT.id,Locked:E.LOCKED.id,UnsavedChanges:E.UNSAVED_CHANGES.id};c.prototype.createFilterFieldBuilder=function(f){var o=this.getBuilder(),v;if(U.isOfType(f,String)){v=O.Matchers.properties({label:f});}else{v=F.Matchers.id(RegExp(U.formatMessage("::FilterField::{0}$",f.property)));}o.hasField(v,true);return b.create(this.getOpaInstance()).options(o.build());};c.prototype.iOpenFilterAdaptation=function(){var f=this.getBuilder();return this.prepareResult(f.doOpenSettings().description(U.formatMessage("Opening the filter bar adaptation dialog for '{0}'",this.getIdentifier())).execute());};c.prototype.iCloseFilterAdaptation=function(){return this.prepareResult(F.createClosePopoverBuilder(this.getOpaInstance(),O.Matchers.resourceBundle("title","sap.ui.mdc","filterbar.ADAPT_TITLE")).description(U.formatMessage("Closing the filter bar adaptation dialog for '{0}'",this.getIdentifier())).execute());};c.prototype.filterFieldAdaptation=function(f,s,v,d){var e=U.parseArguments([[String,Object],Object,[Function,Array,A],String],arguments),o=F.create(this.getOpaInstance()),p,g=F.create(this.getOpaInstance()).hasType("sap.m.ColumnListItem").isDialogElement(),P=F.createPopoverBuilder(this.getOpaInstance(),O.Matchers.resourceBundle("title","sap.ui.mdc","filterbar.ADAPT_TITLE"));f=e[0];if(U.isOfType(f,String)){g.has(O.Matchers.bindingProperties(undefined,{label:f}));}else{g.has(O.Matchers.bindingProperties(undefined,{name:f.property}));}s=e[1];if(!U.isOfType(s,[null,undefined])){if("filtered"in s){g.has(O.Matchers.bindingProperties(undefined,{isFiltered:s.filtered}));delete s.filtered;}g.hasState(s);}v=e[2];if(!U.isOfType(v,[null,undefined])){P.do(v);}d=e[3];return this.prepareResult(o.success(function(){p=F.controlsExist(P);if(!p){this.iOpenFilterAdaptation();}if(!p){P.success(this.iCloseFilterAdaptation.bind(this));}return P.has(O.Matchers.children(g)).has(F.Matchers.atIndex(0)).checkNumberOfMatches(1).description(d).execute();}.bind(this)).execute());};return c;});
