sap.ui.define(["./FormAPI","sap/fe/test/Utils","sap/ui/test/OpaBuilder","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/MacroFieldBuilder"],function(F,U,O,a,M){"use strict";var b=function(f,v){return F.call(this,f,v);};b.prototype=Object.create(F.prototype);b.prototype.constructor=b;b.prototype.isAction=false;function _(o,s,S){var f=o.getBuilder(),g,B=s?"--seeMore":"--seeLess";f.has(function(E){g=E.getId().substring(E.getId().lastIndexOf("::")+2);return true;}).execute();return o.prepareResult(a.create(o).hasId(new RegExp(U.formatMessage("{0}$",B))).has(function(E){return E.getId().substring(E.getId().lastIndexOf("::")+2)===g+B;}).hasState(S).description(U.formatMessage("Checking '{0}' action with state='{1}'",B,S)).execute());}function c(o,f){return M.create(o).hasSome(o.createFieldMatcher(f,"DataField"),o.createFieldMatcher(f,"DataFieldWithUrl"),a.Matchers.type("sap.m.Link")).has(function(E){return E.getId().substring(E.getId().lastIndexOf("::")+2)!=="Field-inner";});}function d(o,f){return a.create(o).hasType("sap.ui.layout.form.FormElement").hasSome(o.createFormElementMatcher(f,"DataField"),o.createFormElementMatcher(f,"DataFieldWithNavigationPath"),o.createFormElementMatcher(f,"DataFieldWithUrl"));}function e(o,f){return a.create(o).hasType("sap.ui.layout.form.FormContainer").has(o.createFieldGroupMatcher(f));}b.prototype.iCheckState=function(f){var o=this.getBuilder();return this.prepareResult(o.hasState(f).description(U.formatMessage("Checking Form '{0}'{1}",this.getIdentifier(),f?U.formatMessage(" having state '{0}'",f):"")).execute());};b.prototype.iCheckAction=function(A,s){var f=U.parseArguments([[Object,String],Object],arguments),o=this.getBuilder();return this.prepareResult(o.hasAggregation("actions",[this.createActionMatcher(A),a.Matchers.states(s)]).description(U.formatMessage("Checking custom action '{0}' with state='{1}'",f[0],f[1])).execute());};b.prototype.iCheckShowMore=function(s){return _(this,true,s);};b.prototype.iCheckShowLess=function(s){return _(this,false,s);};b.prototype.iCheckField=function(f,v,s){var A=U.parseArguments([[Object,String],[String,Array,Object],Object],arguments),o=this.getBuilder();return this.prepareResult(o.has(O.Matchers.childrenMatcher(f.fieldGroup?e(this,f).has(O.Matchers.childrenMatcher(d(this,f).has(O.Matchers.childrenMatcher(c(this,f).hasValue(v).hasState(s))))):d(this,f).has(O.Matchers.childrenMatcher(c(this,f).hasValue(v).hasState(s))))).description(U.formatMessage("Checking field '{0}' with value '{1}' and state='{2}'",A[0].dataField?A[0].dataField:A[0],A[1],A[2])).execute());};b.prototype.iCheckLink=function(l,s){var A=U.parseArguments([[Object,String],Object],arguments),f=this.getBuilder();function g(C,l,s){return d(C,l).has(O.Matchers.childrenMatcher(M.create().hasType("sap.m.Link").hasState(s)));}function h(C,l,s){if(!U.isOfType(l,String)){return l.fieldGroup?e(C,l).has(O.Matchers.childrenMatcher(g(this,l,s))):g(C,l,s);}else{return a.create(C).hasType("sap.m.Link").hasProperties({text:l}).hasState(s);}}return this.prepareResult(f.has(O.Matchers.childrenMatcher(h(this,l,s))).description(U.formatMessage("Checking link of field '{0}' with state='{1}'",A[0].dataField?A[0].dataField:A[0],A[1])).execute());};return b;});
