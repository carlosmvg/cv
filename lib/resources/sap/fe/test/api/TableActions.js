sap.ui.define(["./TableAPI","sap/fe/test/Utils","sap/ui/test/OpaBuilder","sap/fe/test/builder/FEBuilder","sap/ui/test/matchers/Interactable","sap/fe/test/builder/VMBuilder","sap/ui/core/SortOrder","sap/ui/core/Core","sap/fe/test/builder/MdcFilterFieldBuilder"],function(T,U,O,F,I,V,S,C,a){"use strict";var A=function(b,t){return T.call(this,b,t);};A.prototype=Object.create(T.prototype);A.prototype.constructor=A;A.prototype.isAction=true;A.prototype.iPressCell=function(r,c){var t=this.getBuilder();return this.prepareResult(t.checkNumberOfMatches(1).doClickOnCell(this.createRowMatchers(r),c).description(U.formatMessage("Pressing cell of table '{0}' with row value = '{1}' and column {2} = '{3}' ",this.getIdentifier(),r,isNaN(c)?"header":"index",c)).execute());};A.prototype.iSelectRows=function(r,R){var b=U.parseArguments([Object,Object],arguments),t=this.getBuilder();return this.prepareResult(t.doSelect(this.createRowMatchers(b[0],b[1])).description(U.formatMessage("Selecting rows of table '{0}' with values='{1}' and state='{2}'",this.getIdentifier(),b[0],b[1])).execute());};A.prototype.iPressRow=function(r){var t=this.getBuilder();return this.prepareResult(t.checkNumberOfMatches(1).doNavigate(this.createRowMatchers(r)).description(U.formatMessage("Pressing row of table '{0}' with values='{1}'",this.getIdentifier(),r)).execute());};A.prototype.iChangeRow=function(r,t){var o=this.getBuilder(),i=false;if(arguments.length===1){i=true;t=r;}if(!i){o.checkNumberOfMatches(1).doEditValues(this.createRowMatchers(r),t);}else{o.checkNumberOfMatches(1).doEditCreationRowValues(t);}return this.prepareResult(o.description(U.formatMessage("Changing row values of table '{0}' with old values='{1}' to new values='{2}'",this.getIdentifier(),i?"<CreationRow>":r,t)).execute());};A.prototype.iExecuteAction=function(v){var b=U.parseArguments([[Object,String]],arguments),t=this.getBuilder();return this.prepareResult(t.doExecuteAction(this.createActionMatcher(v)).description(U.formatMessage("Executing table action '{0}'",b[0])).execute());};A.prototype.iExecuteDelete=function(){var t=this.getBuilder(),d="::StandardAction::Delete";return this.prepareResult(t.doExecuteAction(F.Matchers.id(new RegExp(U.formatMessage("{0}$",d)))).description(U.formatMessage("Pressing delete action of table '{0}'",this.getIdentifier())).execute());};A.prototype.iSelectQuickFilterItem=function(i){var p;if(U.isOfType(i,String)){p={text:i};}else if(U.isOfType(i,Object)){p={key:i.annotationPath};}return this.prepareResult(this.getBuilder().doSelectQuickFilter(O.Matchers.properties(p)).description(U.formatMessage("Selecting on table '{0}' quickFilter Item  with text '{1}'",this.getIdentifier(),i)).execute());};A.prototype.iExecuteCreate=function(){var t=this.getBuilder(),c="::StandardAction::Create";return this.prepareResult(t.doExecuteAction(F.Matchers.id(new RegExp(U.formatMessage("{0}$",c)))).description(U.formatMessage("Pressing create action of table '{0}'",this.getIdentifier())).execute());};A.prototype.iExecutePaste=function(){var t=this.getBuilder(),p="::StandardAction::Paste";return this.prepareResult(t.doExecuteAction(F.Matchers.id(new RegExp(U.formatMessage("{0}$",p)))).description(U.formatMessage("Pressing paste action of table '{0}'",this.getIdentifier())).execute());};A.prototype.iExecuteInlineCreate=function(){var t=this.getBuilder();return this.prepareResult(t.doOnChildren(O.create(this).hasType("sap.ui.table.CreationRow").has(F.Matchers.bound()).checkNumberOfMatches(1).doPress("applyBtn")).description(U.formatMessage("Pressing inline create action of table '{0}'",this.getIdentifier())).execute());};A.prototype.iExecuteInlineAction=function(r,c){var b=U.parseArguments([Object,[String,Number]],arguments),t=this.getBuilder();return this.prepareResult(t.checkNumberOfMatches(1).doExecuteInlineAction(this.createRowMatchers(b[0]),b[1]).description(U.formatMessage("Pressing inline action of table '{0}' for row '{1}' and action "+(U.isOfType(b[1],Number)?"with column index '{2}'":"'{2}'"),this.getIdentifier(),b[0],b[1])).execute());};A.prototype.iExecuteKeyboardShortcut=function(s,r,c){return this.prepareResult(this.getBuilder().doPressKeyboardShortcut(s,r,c).description(U.formatMessage(r&&c?"Execute keyboard shortcut '{1}' on column '{3}' of row with values '{2}' of table '{0}'":"Execute keyboard shortcut '{1}' on table '{0}'",this.getIdentifier(),s,r,c)).execute());};A.prototype.iSaveVariant=function(v){var s=U.isOfType(v,String)?function(t){return V.create(this).hasId(t.getId?t.getId()+"::VM":t[0].getId()+"::VM").doSaveAs(v).description(U.formatMessage("Saving variant for '{0}' as '{1}'",this.getIdentifier(),v)).execute();}:function(t){return V.create(this).hasId(t.getId?t.getId()+"::VM":t[0].getId()+"::VM").doSave().description(U.formatMessage("Saving current variant for '{0}'",this.getIdentifier())).execute();};return this.prepareResult(this.getBuilder().success(s.bind(this)).execute());};A.prototype.iRemoveVariant=function(v){return this.prepareResult(this.getBuilder().success(function(t){return V.create(this).hasId(t.getId()+"::VM").doRemoveVariant(v).description(U.formatMessage("Removing variant '{1}' for '{0}'",this.getIdentifier(),v)).execute();}.bind(this)).execute());};A.prototype.iSelectVariant=function(v){return this.prepareResult(this.getBuilder().success(function(t){return V.create(this).hasId(t.getId()+"::VM").doSelectVariant(v).description(U.formatMessage("Selecting variant '{1}' for '{0}'",this.getIdentifier(),v)).execute();}.bind(this)).execute());};A.prototype.iSetDefaultVariant=function(v){return this.prepareResult(this.getBuilder().success(function(t){return v?V.create(this).hasId(t.getId?t.getId()+"::VM":t[0].getId()+"::VM").doSetVariantAsDefault(v).description(U.formatMessage("Setting variant '{1}' as default for '{0}'",this.getIdentifier(),v)).execute():V.create(this).hasId(t.getId?t.getId()+"::VM":t[0].getId()+"::VM").doResetDefaultVariant().description(U.formatMessage("Setting Standard variant as default for '{0}'",this.getIdentifier())).execute();}.bind(this)).execute());};A.prototype.iAddAdaptationColumn=function(c){return this.columnAdaptation(c,{selected:false},O.Actions.press("selectMulti"),U.formatMessage("Adding column '{1}' to table '{0}'",this.getIdentifier(),c));};A.prototype.iRemoveAdaptationColumn=function(c){return this.columnAdaptation(c,{selected:true},O.Actions.press("selectMulti"),U.formatMessage("Removing field '{1}' to table '{0}'",this.getIdentifier(),c));};A.prototype.iChangeSortOrder=function(c,s){var o=this.getOpaInstance(),b=[],m=C.getLibraryResourceBundle("sap.ui.mdc"),f=function(d){var e=O.create(o).hasType("sap.m.Select"),v=O.Matchers.children(e)(d);return O.Actions.executor(O.Actions.enterText(s===S.Ascending?m.getText("sort.PERSONALIZATION_DIALOG_OPTION_ASCENDING"):m.getText("sort.PERSONALIZATION_DIALOG_OPTION_DESCENDING")))(v);};s=s||S.Ascending;switch(s){case S.Ascending:b.push(O.Actions.conditional(O.Matchers.properties({selected:false}),O.Actions.press("selectMulti")));b.push(f);break;case S.Descending:b.push(O.Actions.conditional(O.Matchers.properties({selected:false}),O.Actions.press("selectMulti")));b.push(f);break;case S.None:b.push(O.Actions.conditional(O.Matchers.properties({selected:true}),O.Actions.press("selectMulti")));break;default:throw new Error("unhandled switch case: "+s);}return this.columnSorting(c,undefined,b,U.formatMessage("Setting sort of '{1}' from table '{0}' to '{2}'",this.getIdentifier(),c,s));};A.prototype.iChangeFilterField=function(c,v,b){var f=a.create(this.getOpaInstance()).isDialogElement().hasType("sap.ui.mdc.filterbar.p13n.FilterColumnLayout").hasAggregation("cells",F.Matchers.states({text:c,controlType:"sap.m.Label"})).has(O.Matchers.aggregationAtIndex("cells",1)),d,D=U.formatMessage("Changing the filter field '{0}' of table '{1}' by adding '{2}' (was cleared first: {3})",c,this.getIdentifier(),v,b),o=this.iOpenFilterDialog.bind(this),e=this.iConfirmFilterDialog.bind(this);return this.prepareResult(F.create(this.getOpaInstance()).success(function(){d=F.controlsExist(f);if(!d){o();f.success(e);}return f.doChangeValue(v,b).description(D).execute();}).execute());};A.prototype.iPasteData=function(d){return this.prepareResult(this.getBuilder().doPasteData(d).description(U.formatMessage("Pasting {0} rows on table '{1}'",d.length,this.getIdentifier())).execute());};return A;});
