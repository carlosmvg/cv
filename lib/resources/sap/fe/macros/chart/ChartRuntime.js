/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/model/json/JSONModel","sap/fe/macros/CommonHelper","sap/fe/macros/chart/ChartUtils","sap/fe/macros/DelegateUtil"],function(J,C,a,D){"use strict";var b={fnUpdateChart:function(e){var m=e.getSource(),I=m.getAggregation("_chart"),s,A,c,d;m.getCustomData().forEach(function(p){if(p.getKey()==="selectedContextsModel"){s=p.getValue();}else if(p.getKey()==="operationAvailableMap"){A=JSON.parse(D.getCustomData(m,"operationAvailableMap")&&D.getCustomData(m,"operationAvailableMap").customData);}else if(p.getKey()==="multiSelectDisabledActions"){c=p.getValue();d=c?c.split(","):[];}});if(s){var o=m.getModel(s);var f="/$contexts/"+m.getId().substr(m.getId().indexOf("fe::Chart"),m.getId().length);if(!o.getProperty("/$contexts")){o.setProperty("/$contexts",{});}if(!o.getProperty(f)){o.setProperty(f,{});}var S=[];var M;var g=a.getChartSelectedData(I);for(var i=0;i<g.length;i++){S.push(g[i].context);}o.setProperty(f+"/selectedContexts",S);o.setProperty(f+"/numberOfSelectedContexts",I.getSelectedDataPoints().count);for(var j=0;j<S.length;j++){var h=S[j];var k=h.getObject();for(var l in k){if(l.indexOf("#")===0){var n=l;n=n.substring(1,n.length);M=o.getProperty(f);M[n]=true;o.setProperty(f,M);}}M=o.getProperty(f);}this.setActionEnablement(o,A,f,S);if(S.length>1){this.disableAction(o,d,f);}}},setActionEnablement:function(c,A,s,S){for(var d in A){c.setProperty(s+"/"+d,false);var p=A[d];for(var i=0;i<S.length;i++){var o=S[i];var e=o.getObject();if(p===null&&!!e["#"+d]){c.setProperty(s+"/"+d,true);break;}else if(!!o.getObject(p)){c.setProperty(s+"/"+d,true);break;}}}},disableAction:function(c,A,s){A.forEach(function(d){c.setProperty(s+"/"+d,false);});}};return b;},true);
