/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/fe/macros/ResourceModel","sap/fe/macros/CommonHelper","sap/fe/core/CommonUtils","sap/ui/mdc/odata/v4/TypeUtil","sap/ui/model/odata/v4/AnnotationHelper","sap/ui/base/ManagedObject","sap/base/Log","sap/base/strings/formatMessage","sap/ui/model/json/JSONModel","sap/ui/mdc/condition/FilterOperatorUtil","sap/fe/core/helpers/StableIdHelper","sap/fe/macros/library","sap/fe/core/helpers/ValueListHelper"],function(R,C,a,T,A,M,L,f,J,F,S,b,V){"use strict";var c=b.SemanticKeyStyle;var I="@Org.OData.Measures.V1.ISOCurrency",U="@Org.OData.Measures.V1.Unit",d={};d[I]={ui5Type:"sap.ui.model.type.Currency",formatOptions:"parseAsString : true"};function _(i){var m=i.getModel(),o=i.getSetting("sap.fe.macros.Field"),s=o.sideEffects;if(s){return Promise.resolve(s);}s={};return m.requestObject("/$").then(function(E){var g=function(k){return E[k]["$kind"]==="EntityType";},h=function(k,l,n){var q=(l.indexOf("#")>-1&&l.substr(l.indexOf("#")))||"",p=n.SourceProperties||[],r=n.SourceEntities||[],P=[];p.forEach(function(t){var u=t["$PropertyPath"],N=u.indexOf("/")>0?"/"+k+"/"+u.substr(0,u.lastIndexOf("/")+1)+"@sapui.name":false,v=!N?Promise.resolve(k):m.requestObject(N);u=N?u.substr(u.lastIndexOf("/")+1):u;P.push(v.then(function(O){s[O]=s[O]||[[],{}];s[O][1][u]=s[O][1][u]||[];s[O][1][u].push(k+q+((p.length===1&&"$$ImmediateRequest")||""));}));});r.forEach(function(t){var N=t["$NavigationPropertyPath"],u;if(N===""){u=Promise.resolve(k);}else{u=m.requestObject("/"+k+"/"+N+"/@sapui.name");}P.push(u.then(function(O){s[O]=s[O]||[[],{}];s[O][0].push(k+q+"$$ImmediateRequest");}));});return Promise.all(P);},j=function(k){return m.requestObject("/"+k+"@").then(function(l){var n=Object.keys(l).filter(function(p){return p.indexOf("@com.sap.vocabularies.Common.v1.SideEffects")>-1;}).map(function(p){return h(k,p,l[p]);});return Promise.all(n);});};return Promise.all(Object.keys(E).filter(g).map(j)).then(function(){o.sideEffects=s;return s;});});}var e={displayMode:function(p,o){var t=p["@com.sap.vocabularies.Common.v1.Text"],g=t&&((p&&p["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"])||(o&&o["@com.sap.vocabularies.UI.v1.TextArrangement"]));if(g){if(g.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"){return"Description";}else if(g.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast"){return"ValueDescription";}return"DescriptionValue";}return t?"DescriptionValue":"Value";},isRequiredInFilter:function(p,D){var E,P,i=false,o,m=D.context.getModel(),s=D.context.getPath();E=C._getEntitySetPath(m,s);if(typeof p==="string"){P=p;}else{P=m.getObject(s+"@sapui.name");}o=m.getObject(E+"@Org.OData.Capabilities.V1.FilterRestrictions");if(o&&o.RequiredProperties){i=o.RequiredProperties.some(function(g){return g.$PropertyPath===P;});}return i;},maxConditions:function(p,D){var E,P,o,m=-1,g=D.context.getModel(),s=D.context.getPath();E=C._getEntitySetPath(g,s);if(typeof p==="string"){P=p;}else{P=g.getObject(s+"@sapui.name");}o=g.getObject(E+"@Org.OData.Capabilities.V1.FilterRestrictions");var h=g.getObject(E+"/"+P);if(!h){h=g.getObject(s);}if(h.$Type==="Edm.Boolean"){m=1;}else if(o&&o.FilterExpressionRestrictions&&o.FilterExpressionRestrictions.some(function(i){return(i.Property.$PropertyPath===P&&(i.AllowedExpressions==="SingleValue"||i.AllowedExpressions==="SingleRange"));})){m=1;}return m;},getValueFormatted:function(i,p,v){if(!p.$Path){return p;}var g=i.getInterface(0);var m=g.getModel();var P=g.getPath();var o=m.createBindingContext(P);if(v){var r=A.format({$Path:p.$Path},{arguments:[null,{style:v}],context:o});return r;}else{return A.format({$Path:p.$Path},{arguments:[],context:o});}},buildExpressionForCriticalityIcon:function(s){if(s){var E="{= (${"+s+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Negative') || (${"+s+"} === '1') || (${"+s+"} === 1) ? 'sap-icon://status-negative' : "+"(${"+s+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Critical') || (${"+s+"} === '2') || (${"+s+"} === 2) ? 'sap-icon://status-critical' : "+"(${"+s+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Positive') || (${"+s+"} === '3') || (${"+s+"} === 3) ? 'sap-icon://status-positive' : "+"'sap-icon://status-inactive' }";return E;}return undefined;},buildExpressionForCriticalityColor:function(D){var s=sap.ui.core.ValueState.None;var E;var o=D.Criticality;if(o){E="'{'= ({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Negative'') || ({0} === ''1'') || ({0} === 1) ? ''"+sap.ui.core.ValueState.Error+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Critical'') || ({0} === ''2'') || ({0} === 2) ? ''"+sap.ui.core.ValueState.Warning+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Positive'') || ({0} === ''3'') || ({0} === 3) ? ''"+sap.ui.core.ValueState.Success+"'' : "+"''"+sap.ui.core.ValueState.None+"'' '}'";if(o.$Path){var g="${"+o.$Path+"}";s=f(E,g);}else if(o.$EnumMember){var h="'"+o.$EnumMember+"'";s=f(E,h);}else{L.warning("Case not supported, returning the default sap.ui.core.ValueState.None");}}else{L.warning("Case not supported, returning the default sap.ui.core.ValueState.None");}return s;},buildExpressionForTextValue:function(p,D){var m=D.context.getModel(),P=D.context.getPath(),t=m.createBindingContext(P+"@com.sap.vocabularies.Common.v1.Text"),o=t.getProperty(),s=o?A.value(o,{context:t}):undefined,E="";p=A.getNavigationPath(p);if(p.indexOf("/")>-1&&s){E="{"+p.substr(0,p.indexOf("/")+1)+s.substr(1,s.length-2)+"}";}else{E=s;}if(E){E="{ path : '"+E.substr(1,E.length-2)+"', parameters: {'$$noPatch': true}}";}return E;},buildFieldBindingExpression:function(i,p,P,s,o,D,v){return Promise.resolve(e.getValueFormatted(i,p,v)).then(function(g){var h=e.displayMode(P,o);if(h!=="Description"&&s==="VHTable"){h="Value";}var E;switch(h){case"Description":E=D;break;case"ValueDescription":E="{ parts:["+g+", "+D+"], formatter:'FieldRuntime.formatWithBrackets'}";break;case"DescriptionValue":E="{ parts:["+D+", "+g+"], formatter:'FieldRuntime.formatWithBrackets'}";break;default:E=g;}return E;});},_buildExpressionForTextProperty:function(p,i){var m=i.context.getModel(),P=i.context.getPath(),g=P.split("/"),t=m.createBindingContext(P+"@com.sap.vocabularies.Common.v1.Text"),o=t.getProperty(),s=o?A.value(o,{context:t}):undefined,E="";if(s){E=s;s=s.substr(1,s.length-2);if(g.length>2){g.shift();g.shift();g.pop();E="{"+(g.length>0?g.join("/")+"/":"")+s+"}";}}if(E){E="{ path : '"+E.substr(1,E.length-2)+"', parameters: {'$$noPatch': true}}";}return E;},isNotAlwaysHidden:function(D,o){var g=o.context,i=false;if(D.Value&&D.Value.$Path){i=g.getObject("Value/$Path@com.sap.vocabularies.UI.v1.Hidden");}if(!i||i.$Path){i=g.getObject("@com.sap.vocabularies.UI.v1.Hidden");if(!i||i.$Path){i=false;}}return!i;},isSemanticKey:function(s,v){return((v&&s&&!s.every(function(k){return k["$PropertyPath"]!==v["$Path"];}))||false);},isLineItem:function(p,i){if(i.context.getPath().indexOf("@com.sap.vocabularies.UI.v1.LineItem")>-1){return true;}return false;},getRequiredForDataField:function(o,E){var s;if(E==="Display"||E==="ReadOnly"||E==="Disabled"){return false;}if(o&&E){if(E.indexOf("{")>-1){s="%"+E+" === 'Editable'";}if(o.indexOf("{")>-1){var g="%"+o+" === 7";return E==="Editable"?"{="+g+"}":"{= "+g+" && "+s+"}";}else{return E==="Editable"?o=="com.sap.vocabularies.Common.v1.FieldControlType/Mandatory":o=="com.sap.vocabularies.Common.v1.FieldControlType/Mandatory"&&"{= "+s+"}";}}return false;},isRequired:function(o,E){if(E==="Display"||E==="ReadOnly"||E==="Disabled"){return false;}if(o){if(M.bindingParser(o)){var s="{= %"+o+" === 7}";return s;}else{return o=="com.sap.vocabularies.Common.v1.FieldControlType/Mandatory";}}return false;},_getDraftAdministrativeDataType:function(m,E){return m.requestObject("/"+E+"/DraftAdministrativeData/");},getBindingForDraftAdminBlockInline:function(i,E){return e._getDraftAdministrativeDataType(i.getModel(),E).then(function(D){var B=[];if(D.InProcessByUserDescription){B.push("${DraftAdministrativeData/InProcessByUserDescription}");}B.push("${DraftAdministrativeData/InProcessByUser}");if(D.LastChangedByUserDescription){B.push("${DraftAdministrativeData/LastChangedByUserDescription}");}B.push("${DraftAdministrativeData/LastChangedByUser}");return"{= %{HasDraftEntity} ? ("+B.join(" || ")+") : '' }";});},propertyName:function(p,i){var P;if(typeof p==="string"){if(i.context.getPath().indexOf("$Path")>-1||i.context.getPath().indexOf("$PropertyPath")>-1){P=p;}}else if(p.$Path||p.$PropertyPath){var s=p.$Path?"/$Path":"/$PropertyPath";var g=i.context.getPath();P=i.context.getObject(g+s+"/$@sapui.name");}else{P=i.context.getObject("@sapui.name");}return P;},getConditionsBinding:function(g,p,E,s){var m=g.getInterface(0).getModel();if(!s){s=typeof p==="string"?p:e.propertyName(p,{context:m.createBindingContext(g.getInterface(0).getPath())});}if(s.indexOf("/")>-1){var t,h=s.split("/");for(var i=0;i<h.length-1;i++){var P=m.getObject("/"+E+"/"+h.slice(0,i+1).join("/"));if(P&&P.$kind==="NavigationProperty"&&P.$isCollection){h[i]=h[i]+"*";t=true;}}if(t){s=h.join("/");}}return"{$filters>/conditions/"+s+"}";},_context:function(p,i){return i;},constraints:function(p,i){var v=A.format(p,i),m=v&&v.match(/constraints:.*?({.*?})/),s=m&&m[1];if(v.indexOf("sap.ui.model.odata.type.DateTimeOffset")>-1){if(s){s=s.substr(0,m[1].indexOf("}"))+", V4: true}";}else{s="{V4: true}";}}return s||undefined;},formatOptions:function(p,i){var v=A.format(p,i),m=v&&v.match(/formatOptions:.*?({.*?})/);return(m&&m[1])||undefined;},getFieldGroupIds:function(o,p,E){if(!p){return undefined;}var i=o.getInterface(0);return _(i).then(function(s){var m=i.getModel(),P=p,n=P.indexOf("/")>0?"/"+E+"/"+P.substr(0,P.lastIndexOf("/")+1)+"@sapui.name":false,g=!n?Promise.resolve(E):m.requestObject(n),h,j;P=n?P.substr(P.lastIndexOf("/")+1):P;return g.then(function(O){h=(s[O]&&s[O][0].concat(s[O][1][P]||[]))||[];if(h.length){j=h.reduce(function(r,k){return(r&&r+","+k)||k;});}return j;});});},fieldControl:function(p,i){var m=i&&i.context.getModel();var P=i&&i.context.getPath();var o=m&&m.createBindingContext(P+"@com.sap.vocabularies.Common.v1.FieldControl");var g=o&&o.getProperty();if(g){if(g.hasOwnProperty("$EnumMember")){return g.$EnumMember;}else if(g.hasOwnProperty("$Path")){return A.value(g,{context:o});}}else{return undefined;}},getNavigationEntity:function(p,o){var g=(o&&o.context)||p,n=A.getNavigationPath(g.getPath())+"/",P=g.getObject().$Path,N="",s=P.split("/").pop();if(P.indexOf("/")>-1){N=P.substring(0,P.lastIndexOf("/"))+"/";n+=N;}var E=g.getObject(n),k=Object.keys(E),l=k.length,i=0;for(;i<l;i++){if(E[k[i]].$kind==="NavigationProperty"&&E[k[i]].$ReferentialConstraint&&E[k[i]].$ReferentialConstraint.hasOwnProperty(s)){return o?A.getNavigationBinding(N+k[i]):n+k[i];}}},getNavigationPath:function(i,E,p){var o=i.getModel(1).createBindingContext(i.getPath(1));var P=o.getObject("@sapui.name");var s=i.getPath(1);var g=s.split("/");var h=g.indexOf(E);g.splice(h,1);h=g.indexOf(P);g.splice(h,1);var j=g.filter(function(l){return l!=="";});var k=j.join("/");return"{"+k+"}";},valueHelpProperty:function(p,i){var s=p.getPath(),o=p.getObject()||{},P=o.$Path?s+"/$Path":s,g=P+"@",h=p.getObject(g),j;if(h){j=(h.hasOwnProperty(I)&&I)||(h.hasOwnProperty(U)&&U);if(j&&!i){P=P+j+"/$Path";}}return P;},valueHelpPropertyForFilterField:function(p){return e.valueHelpProperty(p,true);},getIDForFieldValueHelp:function(s,i,o,p){if(s){return s;}var P=p;if(o!==p){P=o+"::"+p;}return S.generate([i,P]);},isValidInput:function(o,p){return(o&&(o["@Org.OData.Measures.V1.Unit"]||o["@Org.OData.Measures.V1.ISOCurrency"]))||(p&&(p["@com.sap.vocabularies.Common.v1.ValueListWithFixedValues"]||p["@com.sap.vocabularies.Common.v1.IsCurrency"]||p["@com.sap.vocabularies.Common.v1.IsUnit"]))?true:false;},isValueHelp:function(p){if(p){return(p["@com.sap.vocabularies.Common.v1.ValueListReferences"]||p["@com.sap.vocabularies.Common.v1.ValueListMapping"]||p["@com.sap.vocabularies.Common.v1.ValueList"]);}},getFieldHelpPropertyForFilterField:function(p,v,P,s){if(p==="Edm.Boolean"){return undefined;}var g=s;if(P!==s){g=P+"::"+s;}return S.generate([v||"FilterFieldValueHelp",g]);},getDisplayPropertyForFilterField:function(p,o){if(!p){return"Value";}return e.isValueHelp(p)?e.displayMode(p,o):"Value";},getDelegatePropertyForFieldValueHelp:function(E,p,s){var P="/"+E+"/"+p;var n="sap/fe/macros/FieldValueHelpDelegate";var D="{name:'"+n+"'"+", payload: {propertyPath: '"+P+"'"+", conditionModel: '"+s+"'}}";return D;},getSemanticKeyTitle:function(p,P,D,t,s,o){var n=R.getText("M_FIELD_HELPER_NEW_OBJECT");var u=R.getText("M_FIELD_HELPER_UNNAMED_OBJECT");var N,g;var h;var i=function(v){N="($"+v+" === '' || $"+v+" === undefined || $"+v+" === null ? '"+n+"': $"+v+")";g="($"+v+" === '' || $"+v+" === undefined || $"+v+" === null ? '"+u+"': $"+v+")";return("(!%{IsActiveEntity} ? !%{HasActiveEntity} ? "+N+" : "+g+" : "+g+")");};var j=function(v,l){var E;if(o){E=i(v);return l?"{= "+E+"}":E;}else{return l?v:"$"+v;}};if(p){if(t&&s!==c.ObjectIdentifier){var k=t.$EnumMember;if(k==="com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst"){h=j(p,false);return("{= "+h+" +' (' + "+"($"+P+(D?" || ${"+D+"}":"")+") +')' }");}else if(k==="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast"){h=j(p,false);return("{= ($"+P+(D?" || ${"+D+"}":"")+")"+" + ' (' + "+h+" +')' }");}else{return j(p,true);}}else{return j(p,true);}}else{return j(P,true);}},getObjectIdentifierText:function(t,o,p,D){if(t){if(o.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"||o.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"){return undefined;}else{return p||"{"+D+"}";}}return undefined;},buildExpressionForProgressIndicatorPercentValue:function(v,t,u){var p="0";var E;v=v.charAt(0)==="{"?"$"+v:v;t=t&&t.charAt(0)==="{"?"$"+t:t;var s="(({0} > 100) ? 100 : (({0} < 0) ? 0 : ({0} * 1)))";var g="(({1} > 0) ? (({0} > {1}) ? 100 : (({0} < 0) ? 0 : ({0} / {1} * 100))) : 0)";if(u){u="'"+u+"'";E="'{'= ({2} === ''%'') ? "+s+" : "+g+" '}'";p=f(E,[v,t,u]);}else{E="'{'= "+g+" '}'";p=f(E,[v,t]);}return p;},buildExpressionForProgressIndicatorDisplayValue:function(v,t,u){var D="";if(v){if(u){if(u==="%"){D=v+" %";}else if(t){D=R.getText("T_COMMON_PROGRESS_INDICATOR_DISPLAY_VALUE_NO_UOM",[v,t])+" "+u;}else{D=v+" "+u;}}else if(t){D=R.getText("T_COMMON_PROGRESS_INDICATOR_DISPLAY_VALUE_NO_UOM",[v,t]);}else{D=v;}}else{L.warning("Value property is mandatory, the default (empty string) will be returned");}return D;},getFieldEditModeInValueHelp:function(v,p){var P=(v&&v.Parameters)||[],E="Editable",o;if(P.length){for(var i in P){o=P[i];if(o.ValueListProperty===p){if(o.$Type.indexOf("Out")>48){return"Editable";}else if(o.$Type.indexOf("In")>48){E="ReadOnly";}}}}return E;},joinArray:function(s){return s.join(",");},getSemanticObjectsList:function(p){var g=p;var s=[];for(var k in g.getObject()){if(k.indexOf("com.sap.vocabularies.Common.v1.SemanticObject")>-1&&k.indexOf("com.sap.vocabularies.Common.v1.SemanticObjectMapping")===-1&&k.indexOf("com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions")===-1){var h=g.getObject()[k];if(s.indexOf(h)===-1){s.push(h);}}}var o=new J(s);o.$$valueAsPromise=true;return o.createBindingContext("/");},getSemanticObjectsQualifiers:function(p){var g=p;var q=[];var h=function(l){return q.find(function(o){return o.qualifier===l;});};for(var k in g.getObject()){if(k.indexOf("com.sap.vocabularies.Common.v1.SemanticObject#")>-1||k.indexOf("com.sap.vocabularies.Common.v1.SemanticObjectMapping#")>-1||k.indexOf("com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions#")>-1){var i=g.getObject()[k],j=k.split("#")[0],l=k.split("#")[1],m=h(l);if(!m){m={qualifier:l};m[j]=i;q.push(m);}else{m[j]=i;}}}q=q.filter(function(o){return!!o["@com.sap.vocabularies.Common.v1.SemanticObject"];});var Q=new J(q);Q.$$valueAsPromise=true;return Q.createBindingContext("/");},getSemanticObjectsWithAnnotations:function(p){var g=p;var s=[];var h=function(q){return s.find(function(m){return m.qualifier===q;});};for(var k in g.getObject()){if(k.indexOf("com.sap.vocabularies.Common.v1.SemanticObject")>-1||k.indexOf("com.sap.vocabularies.Common.v1.SemanticObjectMapping")>-1||k.indexOf("com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions")>-1){if(k.indexOf("#")>-1){var i=g.getObject()[k],j=k.split("#")[0],q=k.split("#")[1],l=h(q);if(!l){l={qualifier:q};l[j]=i;s.push(l);}else{l[j]=i;}}else{var i=g.getObject()[k],j,q;if(k.indexOf("com.sap.vocabularies.Common.v1.SemanticObjectMapping")>-1){j="@com.sap.vocabularies.Common.v1.SemanticObjectMapping";}else if(k.indexOf("com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions")>-1){j="@com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions";}else if(k.indexOf("com.sap.vocabularies.Common.v1.SemanticObject")>-1){j="@com.sap.vocabularies.Common.v1.SemanticObject";}var l=h("main");if(!l){l={qualifier:"main"};l[j]=i;s.push(l);}else{l[j]=i;}}}}s=s.filter(function(Q){return!!Q["@com.sap.vocabularies.Common.v1.SemanticObject"];});var o=new J(s);o.$$valueAsPromise=true;return o.createBindingContext("/");},computeLinkParameters:function(g,h,s,i,j,k,m){return Promise.resolve().then(function(v){var l=[],n=[],o=[],p=[];if(i){i.forEach(function(r){if(r["@com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"]){var t={semanticObject:r["@com.sap.vocabularies.Common.v1.SemanticObject"],actions:r["@com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"]};n.push(t);}if(r["@com.sap.vocabularies.Common.v1.SemanticObjectMapping"]){var w=[];r["@com.sap.vocabularies.Common.v1.SemanticObjectMapping"].forEach(function(y){w.push({key:y.LocalProperty.$PropertyPath,value:y.SemanticObjectProperty});});var x={semanticObject:r["@com.sap.vocabularies.Common.v1.SemanticObject"],items:w};l.push(x);}});if(s){var u=sap.ushell&&sap.ushell.Container;var q=u&&u.getService("CrossApplicationNavigation");s.forEach(function(r){if(typeof r==="string"){p.push(q.getPrimaryIntent(r,{}));}});}return Promise.all(p).then(function(o){return JSON.stringify({name:g,payload:{semanticObjects:s,entityType:h,semanticObjectUnavailableActions:n,semanticObjectMappings:l,semanticPrimaryActions:o,mainSemanticObject:m,dataField:j,contact:k}});});}else{return JSON.stringify({name:g,payload:{semanticObjects:s,entityType:h,semanticObjectUnavailableActions:n,semanticObjectMappings:l,semanticPrimaryActions:o,mainSemanticObject:m,dataField:j,contact:k}});}});},checkPrimaryActions:function(s){var p=s.semanticPrimaryActions[s.semanticObjects.indexOf(s.mainSemanticObject)];var u=sap.ushell&&sap.ushell.Container;var x=u&&u.getService("CrossApplicationNavigation");var g=x.hrefForExternal();if(s.mainSemanticObject&&p!==null&&p.intent!==g){for(var i=0;i<s.semanticObjectUnavailableActions.length;i++){if(s.mainSemanticObject.indexOf(s.semanticObjectUnavailableActions[i].semanticObject)===0){for(var j=0;j<s.semanticObjectUnavailableActions[i].actions.length;j++){if(p.intent.split("-")[1].indexOf(s.semanticObjectUnavailableActions[i].actions[j])===0){return false;}}}}return true;}else{return false;}},getPrimaryAction:function(s){return s.semanticPrimaryActions[s.semanticObjects.indexOf(s.mainSemanticObject)].intent?s.semanticPrimaryActions[s.semanticObjects.indexOf(s.mainSemanticObject)].intent:s.primaryIntentAction;},getmyvaluePlease:function(t){var v=t;return v;},operators:function(p,i){var o=i.context,m=o.getModel(),P=o.getPath(),E=C._getEntitySetPath(m,P);return a.getOperatorsForProperty(p,E,m);},isFilterRestrictedToOnlySingleOrMultiValue:function(p,i){var o=i.context,m=o.getModel(),P=o.getPath(),E=C._getEntitySetPath(m,P),g=m.getObject(E+"@Org.OData.Capabilities.V1.FilterRestrictions");if(g&&g.FilterExpressionRestrictions){var r=g.FilterExpressionRestrictions.filter(function(h){return h.Property.$PropertyPath===p;});return r.some(function(h){return h.AllowedExpressions==="SingleValue"||h.AllowedExpressions==="MultiValue";});}return false;},getPropertyContextForQuickViewForm:function(D){var t=D.getObject("$Type");if(t==="com.sap.vocabularies.UI.v1.DataField"||t==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){var i=D.getInterface(),m=i.getModel(),p=i.getPath();p=p+(p.endsWith("/")?"Value":"/Value");return m.createBindingContext(p);}else{return D;}},getPropertyPathForQuickViewForm:function(p){if(p&&p.getObject("$Path")){var i=p.getInterface(),m=i.getModel(),P=i.getPath();P=P+(P.endsWith("/")?"$Path":"/$Path");return m.createBindingContext(P);}return p;},isDataFieldActionButtonVisible:function(t,D,i,o){return(t.onCallAction&&D["@com.sap.vocabularies.UI.v1.Hidden"]!==true&&(i!==true||o!==false));},getPressEventForDataFieldActionButton:function(t,D){var i="Isolated";if(D.InvocationGrouping&&D.InvocationGrouping.$EnumMember==="com.sap.vocabularies.UI.v1.OperationGroupingType/ChangeSet"){i="ChangeSet";}var g=t.navigateAfterAction;g=g==="false"?false:true;var p={contexts:"${$source>/}.getBindingContext()",invocationGrouping:C.addSingleQuotes(i),model:"${$source>/}.getModel()",label:C.addSingleQuotes(D.Label),isNavigable:g};return C.generateFunction(t.onCallAction,C.addSingleQuotes(D.Action),C.objectToString(p));},isNumericDataType:function(D){var g=D;if(g!==undefined){var n=["Edm.Int16","Edm.Int32","Edm.Int64","Edm.Byte","Edm.SByte","Edm.Single","Edm.Decimal","Edm.Double"];return n.indexOf(g)===-1?false:true;}else{return false;}},isDateTimeDataType:function(D){var g=D;if(g!==undefined){var h=["Edm.DateTimeOffset","Edm.Date","Edm.TimeOfDay"];return h.indexOf(g)===-1?false:true;}else{return false;}},getDataFieldAlignment:function(D,t){var E=t.collection.sPath;if(D["$Type"]==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){if(D.Target["$AnnotationPath"]&&D.Target["$AnnotationPath"].indexOf("com.sap.vocabularies.UI.v1.FieldGroup")>=0){var s=D.Target.$AnnotationPath,o=t.collection.oModel.getObject(E+"/"+s),g="Begin",h;for(var i=0;i<o.Data.length;i++){h=t.collection.oModel.getObject(E+"/"+s+"/Data/"+i.toString()+"/Value/$Path/$Type");if(this.isNumericDataType(h)||this.isDateTimeDataType(h)){g="End";}else{g="Begin";break;}}return g;}else{var s=D.Target.$AnnotationPath,g="Begin",h=t.collection.oModel.getObject(E+"/"+s+"/$Type");if(h==="com.sap.vocabularies.UI.v1.DataPointType"){h=t.collection.oModel.getObject(E+"/"+s+"/Value/$Path/$Type");}if(this.isNumericDataType(h)||this.isDateTimeDataType(h)){g="End";}else{g="Begin";}return g;}}else{var s=D.Value.$Path,g="Begin",h;h=t.collection.oModel.getObject(E+"/"+s+"/$Type");if(!(t.collection.oModel.getObject(E+"/")["$Key"].indexOf(s)===0)&&(this.isNumericDataType(h)||this.isDateTimeDataType(h))){g="End";}else{g="Begin";}return g;}},getTypeAlignment:function(t,p){return p==="Table"&&(this.isNumericDataType(t)||this.isDateTimeDataType(t))?"End":"Begin";},getImportance:function(D){if(!D["@com.sap.vocabularies.UI.v1.Importance"]){return"None";}switch(D["@com.sap.vocabularies.UI.v1.Importance"].$EnumMember){case"com.sap.vocabularies.UI.v1.ImportanceType/High":return"High";case"com.sap.vocabularies.UI.v1.ImportanceType/Medium":return"Medium";case"com.sap.vocabularies.UI.v1.ImportanceType/Low":return"Low";default:return"None";}},isDataFieldActionButtonEnabled:function(D,i,o,s){if(i!==true){return"true";}return(o===null?"{= !${#"+D.Action+"} ? false : true }":o.$Path)?s:"true";},getPressEventForDataFieldForIntentBasedNavigationButton:function(t,D){if(t.onDataFieldForIBN){return C.generateFunction(t.onDataFieldForIBN,"$controller",C.addSingleQuotes(D.SemanticObject),C.addSingleQuotes(D.Action),C.addSingleQuotes(JSON.stringify(D.Mapping)),"${$source>/}.getBindingContext()",C.addSingleQuotes(D.RequiresContext),C.addSingleQuotes(D.Inline));}},getLabelTextForDataField:function(E,p,P,s,u,g){var r;var D=E["@com.sap.vocabularies.Common.v1.DraftRoot"];r=e.getSemanticKeyTitle(p["@com.sap.vocabularies.Common.v1.Text"]&&P,s,u,p["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"],g,D);return r;},getFieldHelpForDataField:function(t,v,p,s){var i=t._flexId?t._flexId+"_FieldValueHelp":S.generate([t.vhIdPrefix||"FieldValueHelp",p!==s?p+"::"+s:s]);return v["@com.sap.vocabularies.Common.v1.ValueListReferences"]||v["@com.sap.vocabularies.Common.v1.ValueListMapping"]||v["@com.sap.vocabularies.Common.v1.ValueList"]?i:undefined;},getMultipleLinesForDataField:function(t,p,P){if(t.wrap==="false"){return false;}if(p!=="Edm.String"){return P;}if(t.editMode==="Display"){return true;}if(t.editMode.indexOf("{")>-1){return"{= $"+t.editMode+" === 'Display' ? true : "+P+"}";}return P;},getMultipleLinesForPropertyField:function(t,p){if(t.wrap==="false"){return false;}if(p["$Type"]!=="Edm.String"){return p["@com.sap.vocabularies.UI.v1.MultiLineText"];}if(t.editMode==="Display"){return true;}if(t.editMode.indexOf("{")>-1){return("{= $"+t.editMode+" === 'Display' ? true : "+p["@com.sap.vocabularies.UI.v1.MultiLineText"]+"}");}return p["@com.sap.vocabularies.UI.v1.MultiLineText"];},getIconForDataPoint:function(D){var g=D.CriticalityRepresentation&&D.CriticalityRepresentation["$EnumMember"]==="com.sap.vocabularies.UI.v1.CriticalityRepresentationType/WithoutIcon",s=D.Criticality&&D.Criticality["$Path"],i="";if(!g){i=e.buildExpressionForCriticalityIcon(s);}return i;},checkFieldHelp:function(o){return(o["@com.sap.vocabularies.Common.v1.ValueListReferences"]||o["@com.sap.vocabularies.Common.v1.ValueListMapping"]||o["@com.sap.vocabularies.Common.v1.ValueList"]);},getActionParameterDialogDisplay:function(o){return this.checkFieldHelp(o)?"DescriptionValue":"Value";},getActionParameterDialogFieldHelp:function(o,s,p){return this.checkFieldHelp(o)?S.generate([s,p]):undefined;},getFieldValueHelpDelegate:function(i,E,s,p){return C.objectToString({name:C.addSingleQuotes("sap/fe/macros/FieldValueHelpDelegate"),payload:{propertyPath:C.addSingleQuotes(V.getPropertyPath({UnboundAction:!i,EntitySet:E,Action:s,Property:p}))}});},_getEntitySetFromMultiLevel:function(o,p,s,g,D){var n=p.split("/").filter(Boolean);n=n.filter(function(P){return P!=="$NavigationPropertyBinding";});if(n.length>0){for(var i=g;i<n.length-D;i++){s="/"+o.getObject(s+"/$NavigationPropertyBinding/"+n[i]);}}return s;},getPropertyCollection:function(o){var p=o.getPath(),m=p.split("/").filter(Boolean),s=m[0],P=o.getObject("$Path"),g="/"+s;if(p.indexOf("/@com.sap.vocabularies.")>-1){var i=p.indexOf("/@com.sap.vocabularies.");var h=p.substring(0,i);g=e._getEntitySetFromMultiLevel(o,h,g,1,0);}if(P&&P.indexOf("/")>-1){g=e._getEntitySetFromMultiLevel(o,P,g,0,1);}return g;}};e.getConditionsBinding.requiresIContext=true;e.buildExpressionForTextValue.requiresIContext=true;e.getRequiredForDataField.requiresIContext=true;e.getBindingForDraftAdminBlockInline.requiresIContext=true;e.getFieldGroupIds.requiresIContext=true;e.fieldControl.requiresIContext=true;e.getValueFormatted.requiresIContext=true;e.buildFieldBindingExpression.requiresIContext=true;e.getNavigationPath.requiresIContext=true;return e;},true);
