/*
 * ! SAPUI5

		(c) Copyright 2009-2020 SAP SE. All rights reserved
	
 */
sap.ui.define(['sap/ui/core/library','sap/m/Bar','sap/m/Button','sap/m/CheckBox','sap/m/Label','sap/m/Link','sap/m/List','sap/m/Panel','sap/m/SearchField','sap/m/Text','sap/m/Toolbar','sap/m/ToolbarSpacer','sap/ui/Device','sap/ui/comp/state/UIState','./VariantConverterFrom','./VariantConverterTo','sap/ui/comp/library','sap/ui/comp/smartvariants/PersonalizableInfo','sap/ui/comp/smartvariants/SmartVariantManagementUi2','sap/ui/comp/variants/VariantManagement','sap/ui/core/InvisibleText','sap/ui/core/Icon','sap/ui/core/Title','sap/ui/layout/Grid','sap/ui/layout/GridRenderer','sap/ui/layout/GridData','sap/ui/layout/HorizontalLayout','sap/ui/layout/VerticalLayout','sap/ui/layout/AlignedFlowLayout','sap/ui/comp/util/IdentifierUtil','sap/m/library','sap/ui/model/json/JSONModel','sap/ui/comp/filterbar/FilterGroupItem','sap/base/Log','sap/base/util/merge','sap/ui/base/ManagedObject','sap/ui/core/ShortcutHintsMixin'],function(c,B,a,C,L,b,d,P,S,T,e,f,D,U,V,g,l,h,k,m,I,o,p,G,q,r,H,s,A,t,u,J,F,v,w,M,x){"use strict";var y=c.ValueState;var z=c.TextAlign;var E=u.ListSeparators;var K=u.ButtonType;var N;var O;var Q;var R;var W;var X;var Y;var Z;var $;var _;var a1=u.OverflowToolbarPriority;var b1=u.ListMode;var c1=G.extend("sap.ui.comp.filterbar.FilterBar",{metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/filterbar/FilterBar.designtime",properties:{persistencyKey:{type:"string",group:"Misc",defaultValue:""},advancedMode:{type:"boolean",group:"Misc",defaultValue:false},expandAdvancedArea:{type:"boolean",group:"Misc",defaultValue:false,deprecated:true},searchEnabled:{type:"boolean",group:"Misc",defaultValue:true},filterBarExpanded:{type:"boolean",group:"Misc",defaultValue:true},considerGroupTitle:{type:"boolean",group:"Misc",defaultValue:false},showClearButton:{type:"boolean",group:"Misc",defaultValue:false},showRestoreButton:{type:"boolean",group:"Misc",defaultValue:true},showGoOnFB:{type:"boolean",group:"Misc",defaultValue:true},showRestoreOnFB:{type:"boolean",group:"Misc",defaultValue:false},showClearOnFB:{type:"boolean",group:"Misc",defaultValue:false},showGoButton:{type:"boolean",group:"Misc",defaultValue:null,deprecated:true},deltaVariantMode:{type:"boolean",group:"Misc",defaultValue:true},filterContainerWidth:{type:"string",group:"Misc",defaultValue:"12rem"},useToolbar:{type:"boolean",group:"Misc",defaultValue:true},header:{type:"string",group:"Misc",defaultValue:""},showFilterConfiguration:{type:"boolean",group:"Misc",defaultValue:true},useSnapshot:{type:"boolean",group:"Misc"}},aggregations:{filterItems:{type:"sap.ui.comp.filterbar.FilterItem",multiple:true,singularName:"filterItem"},filterGroupItems:{type:"sap.ui.comp.filterbar.FilterGroupItem",multiple:true,singularName:"filterGroupItem"},_parameters:{type:"sap.ui.comp.filterbar.FilterGroupItem",multiple:true,singularName:"_parameter",visibility:"hidden"}},associations:{basicSearch:{type:"sap.m.SearchField",multiple:false}},events:{cancel:{},reset:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"}}},search:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"}}},beforeVariantSave:{parameters:{context:{type:"string"}}},beforeVariantFetch:{},afterVariantLoad:{parameters:{context:{type:"string"},executeOnSelect:{type:"boolean"}}},filterChange:{added:{type:"sap.ui.core.Control"},deleted:{type:"sap.ui.core.Control"},filterItem:{type:"sap.ui.comp.filterbar.FilterGroupItem"}},clear:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"}}},initialise:{},initialized:{},afterVariantSave:{},filtersDialogClosed:{parameters:{context:{type:"string"}}},filtersDialogBeforeOpen:{},filtersDialogCancel:{},filtersDialogSearch:{},filtersDialogSearchForFilters:{parameters:{newValue:{type:"string"}}},assignedFiltersChanged:{}}},renderer:q.render});c1.INTERNAL_GROUP="__$INTERNAL$";c1.prototype.init=function(){var i=this.getFilterContainerWidth();G.prototype.init.apply(this,arguments);this._filterGroupItemChange=this._filterGroupItemChange.bind(this);this._filterItemChange=this._filterItemChange.bind(this,null);this._oBasicAreaLayout=null;this._oVariantManagement=null;this._oCollectiveSearch=null;this._aBasicAreaSelection=null;this._mAdvancedAreaFilter=null;this._fRegisteredFetchData=null;this._fRegisteredApplyData=null;this._fRegisterGetFiltersWithValues=null;this._oHideShowButton=null;this._oSearchButton=null;this._oFiltersButton=null;this._oClearButtonOnFB=null;this._oRestoreButtonOnFB=null;this._oDialog=null;this._oFilterDialog=null;this._bIsInitialized=false;this._aFields=null;this._oBasicSearchField=null;this._oVariant={};this._filterChangeSemaphore=true;this._triggerFilterChangeState=true;this._fRegisteredFilterChangeHandlers=null;this._fInitialiseVariants=null;this._bHostedVariantManagement=false;this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");this.setHSpacing(0);this.addStyleClass("sapUiCompFilterBar sapUiCompFilterBarMarginBottom sapUiCompFilterBarPaddingPanel sapContrastPlus");this.addStyleClass(this._isPhone()?"sapUiCompFilterBarPhone":"sapUiCompFilterBarNonPhone");this._oToolbar=this._createToolbar();this.addContent(this._oToolbar);this._bDelayRendering=true;this._oBasicAreaLayout=new A();this._oBasicAreaLayout.setVisible(false);this._oBasicAreaLayout.setLayoutData(new r({span:"L12 M12 S12"}));this._oBasicAreaLayout.setMinItemWidth(i);this._oBasicAreaLayout.setMaxItemWidth(i);this.addContent(this._oBasicAreaLayout);this._oAdvancedPanel=new P();this._oAdvancedPanel.setLayoutData(new r({span:"L12 M12 S12"}));this._oAdvancedPanel.setVisible(false);this.addContent(this._oAdvancedPanel);this.oModel=new J({});this.setModel(this.oModel,"FilterBar");this._oHintText=new T({text:this._oRb.getText("FILTER_BAR_NO_FILTERS_ON_FB"),textAlign:z.Center});this._oHintText.setVisible(false);this._oHintText.addStyleClass("sapUiCompFilterBarHint");if(this._isTablet()||this._isPhone()){this.setFilterBarExpanded(false);}};c1.prototype.setFilterContainerWidth=function(i){this._oBasicAreaLayout.setMinItemWidth(i);if(this.getUseToolbar()){this._oBasicAreaLayout.setMaxItemWidth(this._oBasicAreaLayout.getMinItemWidth());}else{this._setMaxItemWidth2();}this.setProperty("filterContainerWidth",i);return this;};c1.prototype._setMaxItemWidth2=function(){var j,n,k1=this._oBasicAreaLayout.getMinItemWidth();["rem","%","px","em"].some(function(l1){var i=k1.indexOf(l1);if(i>0){k1=k1.substring(0,i);j=l1;return true;}return false;});if(j){n=parseInt(k1);if(!isNaN(n)){n*=2;this._oBasicAreaLayout.setMaxItemWidth(n+j);}}};c1.prototype._hasAnyVisibleFiltersOnFB=function(){var j=this._retrieveVisibleAdvancedItems();for(var i=0;i<j.length;i++){if(j[i].filterItem.getVisibleInFilterBar()){return true;}}return false;};c1.prototype._showHintText=function(){var i=0;if(!this._oHintText){return;}if(this._isNewFilterBarDesign()){return;}if(!this.getAdvancedMode()&&!this._isPhone()){var j=!this._hasAnyVisibleFiltersOnFB();if(j){i=this._oAdvancedPanel.indexOfContent(this._oHintText);if(i<0){this._oAdvancedPanel.insertContent(this._oHintText,0);}}this._oHintText.setVisible(j);this._oAdvancedPanel.setVisible(j);if(!this._bDelayRendering){this._oBasicAreaLayout.setVisible(!j&&this.getFilterBarExpanded());}}};c1.prototype._hasRelevantFilters=function(){var i,n=null,j;if(!this._mAdvancedAreaFilter||(Object.keys(this._mAdvancedAreaFilter)<1)){return false;}if(this.getAdvancedMode()){for(n in this._mAdvancedAreaFilter){var k1=this._mAdvancedAreaFilter[n];if(k1&&k1.items){for(i=0;i<k1.items.length;i++){j=k1.items[i];if(j){if(this._determineVisibility(j.filterItem)){return true;}}}}}return false;}return true;};c1.prototype._adaptButtonsEnablement=function(){var i=false||!!this._mAdvancedAreaFilter;if(this._oHideShowButton){this._oHideShowButton.setEnabled(i);if(this.getAdvancedMode()&&!this._isPhone()){this._oHideShowButton.setVisible(this._hasRelevantFilters());}}this._oClearButtonOnFB.setEnabled(i);this._oRestoreButtonOnFB.setEnabled(i);this._oFiltersButton.setEnabled(i);var j=true;if(this._isPhone()&&this.getUseToolbar()){j=false;}if(i&&this.getFilterBarExpanded()&&j&&!this.getAdvancedMode()){this._oBasicAreaLayout.setVisible(true);}};c1.prototype.getVariantManagement=function(){return this._oVariantManagement;};c1.prototype.setShowClearOnFB=function(i){if(!this._isPhone()){this.setProperty("showClearOnFB",i);this._oClearButtonOnFB.setVisible(i);}return this;};c1.prototype.setShowRestoreOnFB=function(i){if(!this._isPhone()){this.setProperty("showRestoreOnFB",i);this._oRestoreButtonOnFB.setVisible(i);}return this;};c1.prototype.setShowGoOnFB=function(i){this.setProperty("showGoOnFB",i);this._calcVisibilityGoButton();return this;};c1.prototype._calcVisibilityGoButton=function(){var i=this.getShowGoOnFB();if(i&&!this._isPhone()&&this.isLiveMode&&this.isLiveMode()){i=false;}this._oSearchButton.setVisible(i);};c1.prototype.setShowGoButton=function(i){this.setShowGoOnFB(i);return this;};c1.prototype.getShowGoButton=function(){return this.getShowGoOnFB();};c1.prototype.hideGoButton=function(){this._oSearchButton.setVisible(false);};c1.prototype.restoreGoButton=function(){this._oSearchButton.setVisible(this.getShowGoOnFB());};c1.prototype.setShowFilterConfiguration=function(i){this.setProperty("showFilterConfiguration",i);if(this._oFiltersButton&&!this._isPhone()){this._oFiltersButton.setVisible(i);}return this;};c1.prototype.isCurrentVariantStandard=function(){var i;if(this._oVariantManagement){i=this._oVariantManagement.getCurrentVariantId();if(i===""){return true;}return(i===this._oVariantManagement.getStandardVariantKey());}return undefined;};c1.prototype.setCurrentVariantId=function(i,j){if(this._oVariantManagement){this._oVariantManagement.setCurrentVariantId(i,j);}};c1.prototype.getCurrentVariantId=function(){var i="";if(this._oVariantManagement){i=this._oVariantManagement.getCurrentVariantId();}return i;};c1.prototype.getDataSuiteFormat=function(i){return this._getDataSuiteFormat(i,null);};c1.prototype._getDataSuiteFormat=function(i,j){var n=null,k1,l1,m1,n1,o1;if(this._oVariantManagement){k1=this.getCurrentVariantId();if(this.getFilterDataAsString){m1=this._determineVariantFiltersInfo(i,true);if(this.getFilterContextUrl){o1=this.getFilterContextUrl();}if(this.getParameterContextUrl){n1=this.getParameterContextUrl();}l1=this.getFilterDataAsString(i);if(l1){var p1=new g();n=p1.convert(k1,m1,l1,this,j,n1,o1);}}}return n;};c1.prototype.getBasicSearchName=function(){var i=null;if(this._oBasicSearchField&&this.getEntitySet){i="$"+this.getEntitySet()+".basicSearch";}return i;};c1.prototype.getBasicSearchValue=function(){return this._getBasicSearchValue();};c1.prototype.setUiStateAsVariant=function(i){var j={replace:true,strictMode:true};this.setUiState(i,j);this.fireAfterVariantLoad("SPV_VARIANT",false);this._applyVisibility(i.getSelectionVariant());};c1.prototype._applyVisibility=function(i){var j=function(k1){if(k1&&k1.getVisible()&&!k1.getHiddenFilter()){if(!k1.getVisibleInFilterBar()){k1.setVisibleInFilterBar(true);}if(!k1.getPartOfCurrentVariant()){k1.setPartOfCurrentVariant(true);}}};if(this._bIsInitialized){for(var n in this._mAdvancedAreaFilter){if(n){this._mAdvancedAreaFilter[n].items.forEach(function(k1){if(k1&&k1.filterItem&&k1.filterItem.getMandatory()){j(k1.filterItem);}else if(k1&&k1.filterItem){if(k1.filterItem.getVisibleInFilterBar()){k1.filterItem.setVisibleInFilterBar(false);}if(k1.filterItem.getPartOfCurrentVariant()){if(n===c1.INTERNAL_GROUP){k1.filterItem.setPartOfCurrentVariant(true);}else{k1.filterItem.setPartOfCurrentVariant(false);}}}});}}if(i&&i.Parameters){i.Parameters.forEach(function(k1){var l1=this.determineFilterItemByName(k1.PropertyName);j(l1);}.bind(this));}if(i&&i.SelectOptions){i.SelectOptions.forEach(function(k1){var l1=this.determineFilterItemByName(k1.PropertyName);j(l1);}.bind(this));}}};c1.prototype.getUiState=function(i){var j,n,k1=false,l1=null,m1,n1;if(i){k1=(i.allFilters===true);}n=this._getDataSuiteFormat(k1,"13.0");j=new U();j.selectionVariant=JSON.parse(n);j.setSelectionVariant(j.selectionVariant);var o1=j.getSelectionVariant();if(o1){if(this.getModelData&&this.getModelData()){l1=this.getModelData();}n1=U.calcSemanticDates(o1,l1);j.setSemanticDates(n1);m1=U.calculateValueTexts(o1,l1);j.setValueTexts(m1);window.sessionStorage.setItem(this.getId(),JSON.stringify(m1));window.sessionStorage.setItem("semanticDates",JSON.stringify(n1));}return j;};c1.prototype.setUiState=function(i,j){var n,k1,l1=null,m1=false,n1=true,o1;if(j&&typeof j.replace==="boolean"){m1=j.replace;}if(j&&typeof j.strictMode==="boolean"){n1=j.strictMode;}if(i){l1=i.getSelectionVariant();if(l1){k1=JSON.stringify(l1);}n=i.getValueTexts();o1=i.getSemanticDates();}if(!n){n=JSON.parse(window.sessionStorage.getItem(this.getId()));}if(!o1){o1=JSON.parse(window.sessionStorage.getItem("semanticDates"));}this._setDataSuiteFormat(k1,m1,n1,n,o1);this._enhanceFilterItemsWithTextValue(n,l1);};c1.prototype.getDescriptionForKeys=function(i){};c1.prototype._enhanceFilterItemsWithTextValue=function(i,j){var n=U.determineFiltersWithOnlyKeyValues(i,j,[this.getBasicSearchName()]);this.getDescriptionForKeys(n);};c1.prototype.setDataSuiteFormat=function(i,j){this._setDataSuiteFormat(i,j,true);};c1.prototype._setDataSuiteFormat=function(i,j,n,k1,l1){var m1,n1,o1;if(i){m1=new V();n1=m1.convert(i,this,n);if(n1){this._clearErrorState();if(n1.variantId&&this._oVariantManagement){if(this._bIsInitialized){if(this._oVariantManagement.isPageVariant()){this._oVariantManagement._selectVariant(n1.variantId,"DATA_SUITE");}else{this._setFilterVisibility(n1.variantId);}}this._oVariantManagement.setInitialSelectionKey(n1.variantId);}if(n1.payload&&(j||(Object.keys(JSON.parse(n1.payload)).length>0))&&this.setFilterDataAsString){o1=n1.payload;if(k1){o1=U.enrichWithValueTexts(o1,k1);}if(l1){o1=U.enrichWithSemanticDates(o1,l1);}this.setFilterDataAsString(o1,j);}if(n1.basicSearch&&this._oBasicSearchField&&this._oBasicSearchField.setValue){this._oBasicSearchField.setValue(""||n1.basicSearch);this._updateToolbarText();}}}};c1.prototype._setFilterVisibility=function(i){if(this._oVariantManagement.getSelectionKey()!==i){this._oVariantManagement.setInitialSelectionKey(i);var j=this._getStandardVariant();if(j){var n=this._oVariantManagement.getVariantContent(this,i);if(n&&n.filterbar){if(n.hasOwnProperty("version")){n=this.mergeVariant(j,n);}this._reapplyVisibility(n.filterbar);}}}};c1.prototype.applySettings=function(j){if(this._possibleToChangeVariantManagement()){if(j&&j.customData){for(var i=0;i<j.customData.length;i++){var n=j.customData[i];if(n&&n.mProperties&&n.mProperties.key==="pageVariantPersistencyKey"){this._oVariantManagement.setPersistencyKey(n.mProperties.value);this._oVariantManagement.setVisible(true);this._bHostedVariantManagement=true;}}}}if(j&&j.persistencyKey){this._bHostedVariantManagement=true;}this._applyLayoutDataToToolbarButtons();G.prototype.applySettings.apply(this,arguments);if(!this.getUseToolbar()&&!this.getFilterBarExpanded()){this.setFilterBarExpanded(true);}this._afterVariantsLoad();};c1.prototype._applyLayoutDataToToolbarButtons=function(i){if(this._isPhone()||this._isTablet()||this.getAdvancedMode()||!this.getUseToolbar()){return;}if(!N&&!this._bToolbarLayoutDataRequested){N=sap.ui.require("sap/m/ToolbarLayoutData");if(!N){sap.ui.require(["sap/m/ToolbarLayoutData"],d1.bind(this));this._bToolbarLayoutDataRequested=true;}}if(!N){return;}this._oHideShowButton.setLayoutData(new N({shrinkable:true}));this._oClearButtonOnFB.setLayoutData(new N({shrinkable:true}));this._oRestoreButtonOnFB.setLayoutData(new N({shrinkable:true}));this._oFiltersButton.setLayoutData(new N({shrinkable:true}));this._oSearchButton.setLayoutData(new N({shrinkable:false}));};function d1(i){N=i;this._bToolbarLayoutDataRequested=false;if(!this._bIsBeingDestroyed){this._applyLayoutDataToToolbarButtons();}}c1.prototype.setPersistencyKey=function(i){this.setProperty("persistencyKey",i);if(this._possibleToChangeVariantManagement()){this._oVariantManagement.setVisible(true);}return this;};c1.prototype._possibleToChangeVariantManagement=function(){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){return true;}return false;};c1.prototype.clearVariantSelection=function(){if(this._oVariantManagement){this._oVariantManagement.clearVariantSelection();}};c1.prototype.setSearchEnabled=function(i){this.setProperty("searchEnabled",i);if(this._oSearchButton){this._oSearchButton.setEnabled(i);}return this;};c1.prototype.setSearchButtonEmphType=function(i){};c1.prototype.setSimplifiedMode=function(i){};c1.prototype.getSimplifiedMode=function(){if(this.getAdvancedMode()){return false;}return true;};c1.prototype.setExpandAdvancedArea=function(i){this.setFilterBarExpanded(i);return this;};c1.prototype.getExpandAdvancedArea=function(){return this.getFilterBarExpanded();};c1.prototype.setAdvancedMode=function(i){this.setProperty("advancedMode",i);this.toggleStyleClass("sapContrastPlus",!i);if(i){if(!this._oAdvancedAreaForm){this._oAdvancedAreaForm=this._createAdvancedAreaForm();}if(this._possibleToChangeVariantManagement()){this._oVariantManagement.setVisible(false);}if(this._oToolbar){this._oToolbar.addStyleClass("sapUiCompFilterBarToolbarBasicSearchNoVariant");if(this._oBasicSearchField){if(this._oToolbar.indexOfContent(this._oBasicSearchField)<0){this._oToolbar.insertContent(this._oBasicSearchField,1);}}}}else{if(this.getPersistencyKey()&&this._possibleToChangeVariantManagement()){if(this._oVariantManagement){this._oVariantManagement.setVisible(true);}if(this._oToolbar){this._oToolbar.removeStyleClass("sapUiCompFilterBarToolbarBasicSearchNoVariant");}}}this._oFiltersButton.setVisible(!i);if(this._oHideShowButton){this._oHideShowButton.setVisible((i&&this._isPhone())?false:true);if(this._oHideShowButton.getVisible()){if(this.getFilterBarExpanded()){this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_VH_HIDE"));this._oHideShowButton.setTooltip(this._oRb.getText("FILTER_BAR_VH_HIDE"));}else{this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_VH_SHOW"));this._oHideShowButton.setTooltip(this._oRb.getText("FILTER_BAR_VH_SHOW"));}}}if(!this._bDelayRendering){this._oBasicAreaLayout.setVisible(!i&&this.getFilterBarExpanded());}this._oAdvancedPanel.setVisible(i&&this.getFilterBarExpanded());this._adaptButtonsEnablement();return this;};c1.prototype.setUseToolbar=function(i){this.setProperty("useToolbar",i);if(!i){this._adaptNewFilterBarDesign();}else{this._recreateToolbar();}return this;};c1.prototype._recreateToolbar=function(){if(!this._oToolbar){this._bButtonaAdded=false;if(this._oButtonsVLayout){this._oBasicAreaLayout.removeContent(this._oButtonsVLayout);this._oButtonsVLayout.destroy();this._oButtonsVLayout=null;}this._oToolbar=this._createToolbar(true);this.insertContent(this._oToolbar,0);if(this._oVariantManagement){if(this._oVariantManagement instanceof k||((this._oVariantManagement.getId()===(this.getId()+"-variant")))){this._oToolbar.insertContent(this._oVariantManagement,0);}}this._adaptButtonsEnablement();if(this._oBasicSearchFieldContainer){this._oBasicAreaLayout.removeContent(this._oBasicSearchFieldContainer);this._cleanBasicSearchContainer();this.setBasicSearch(this._oBasicSearchField);}this._oHintText=new T({text:this._oRb.getText("FILTER_BAR_NO_FILTERS_ON_FB"),textAlign:z.Center});this._oHintText.setVisible(false);this._oHintText.addStyleClass("sapUiCompFilterBarHint");this._oBasicAreaLayout.addContent(this._oHintText);this._oBasicAreaLayout.setMaxItemWidth(this._oBasicAreaLayout.getMinItemWidth());this._updateToolbarText();}};c1.prototype._cleanBasicSearchContainer=function(){if(this._oBasicSearchFieldContainer){var j=this._oBasicSearchFieldContainer.removeAllContent();if(j){for(var i=0;i<j.length;i++){if(j[i]!==this._oBasicSearchField){j[i].destroy();}}}this._oBasicSearchFieldContainer.destroy();this._oBasicSearchFieldContainer=null;}};c1.prototype.setHeader=function(i){this.setProperty("header",i);if(this.getUseToolbar()){this._addHeaderToToolbar(i);}return this;};c1.prototype._addHeaderToToolbar=function(i){if(this._oToolbar){if(i){if(this._oVariantManagement&&(this._oVariantManagement.getVisible()||this._bHostedVariantManagement)&&(this._oToolbar.indexOfContent(this._oVariantManagement)>-1)){if(!this._oSeparator){if(!O&&!this._bToolbarSeparatorRequested){O=sap.ui.require("sap/m/ToolbarSeparator");if(!O){sap.ui.require(["sap/m/ToolbarSeparator"],e1.bind(this));this._bToolbarSeparatorRequested=true;}}if(O){this._oSeparator=new O(this.getId()+"-HeadSep");}}this._oToolbar.removeContent(this._oSeparator);this._oToolbar.insertContent(this._oSeparator,0);this._oToolbar.setHeight("3rem");}if(!this._oText){this._oText=new T(this.getId()+"-HeadText");this._oText.addStyleClass("sapMH4Style");this._oText.addStyleClass("sapUiCompSmartChartHeader");}this._oText.setText(i);this._oToolbar.removeContent(this._oText);this._oToolbar.insertContent(this._oText,0);}else{if(this._oSeparator){this._oToolbar.removeContent(this._oSeparator);this._oSeparator.destroy();delete this._oSeparator;this._oToolbar.setHeight();}if(this._oText){this._oToolbar.removeContent(this._oText);this._oText.destroy();delete this._oText;}}}};function e1(i){O=i;this._bToolbarSeparatorRequested=false;if(!this._bIsBeingDestroyed){this._addHeaderToToolbar(this.getHeader());}}c1.prototype._isNewFilterBarDesign=function(){if(this.getAdvancedMode()){return false;}if(!this.getUseToolbar()){return true;}return false;};c1.prototype._adaptNewFilterBarDesign=function(){if(this._isNewFilterBarDesign()){this.setFilterBarExpanded(true);if(!this._bDelayRendering){this._oBasicAreaLayout.setVisible(true&&this.getFilterBarExpanded());}if(this._oToolbar){var j=this._oToolbar.getContent();for(var i=0;i<j.length;i++){this._oToolbar.removeContent(j[i]);if(j[i].isA("sap.m.ToolbarSpacer")){j[i].destroy();}}if(!this.getUseToolbar()){this.removeContent(this._oToolbar);this._oToolbar.destroy();this._oToolbar=null;}}if(this._oHintText){this._oBasicAreaLayout.removeContent(this._oHintText);this._oHintText.destroy();this._oHintText=null;}if(this._oHideShowButton){this._oHideShowButton.destroy();this._oHideShowButton=null;}if(!this._bButtonaAdded){this._bButtonaAdded=true;this._addButtonsToBasicArea();}if(this._oBasicSearchField){this.setBasicSearch(this._oBasicSearchField);}this._oBasicAreaLayout.setMinItemWidth(this.getFilterContainerWidth());this._setMaxItemWidth2();}};c1.prototype._addButtonsToBasicArea=function(){var i=new s();if(sap.ui.getCore().getConfiguration().getRTL()){i.addStyleClass("sapUiCompFilterBarFloatLeft");}else{i.addStyleClass("sapUiCompFilterBarFloatRight");}var j=new H();i.addContent(new T());i.addContent(j);j.addContent(this._oClearButtonOnFB);this._oClearButtonOnFB.addStyleClass("sapUiCompFilterBarPaddingRightBtn");j.addContent(this._oRestoreButtonOnFB);this._oRestoreButtonOnFB.addStyleClass("sapUiCompFilterBarPaddingRightBtn");j.addContent(this._oFiltersButton);this._oFiltersButton.addStyleClass("sapUiCompFilterBarPaddingRightBtn");j.addContent(this._oSearchButton);this._updateToolbarText();if(this._isPhone()){i.addStyleClass("sapUiCompFilterBarRemoveMinWidth");this._oBasicAreaLayout.insertContent(i,0);}else{this._oBasicAreaLayout.addEndContent(i);}this._oButtonsVLayout=i;};c1.prototype._addBasicSearchToBasicArea=function(i){if(this._oBasicSearchFieldContainer){this._cleanBasicSearchContainer();}if(i){var j=new L({text:"\u2008"});j.addStyleClass("sapBasicSearchFilter");var n=this._addControlToBasicAreaContainer(null,i,j);if(n){n.setVisible(true);var k1=0;if(this._isPhone()){k1=1;}this._oBasicAreaLayout.insertContent(n,k1);this._oBasicSearchFieldContainer=n;this._oBasicSearchFieldContainer.setWidth("100%");}}};c1.prototype._setCollectiveSearch=function(i){if(this.getAdvancedMode()){if(this._oToolbar){if(this._oVariantManagement){this._oToolbar.removeContent(this._oVariantManagement);this._unregisterVariantManagement(this._oVariantManagement);this._oVariantManagement=null;}if(this._oCollectiveSearch){this._oToolbar.removeContent(this._oCollectiveSearch);}this._oCollectiveSearch=i;this._oToolbar.insertContent(this._oCollectiveSearch,0);this._oToolbar.removeStyleClass("sapUiCompFilterBarToolbarBasicSearchNoVariant");}}};c1.prototype.setBasicSearch=function(i){var j=this;this.setAssociation("basicSearch",i,true);if(typeof i==="string"){i=sap.ui.getCore().byId(i);}if(this._oBasicSearchField&&this._oToolbar){this._oToolbar.removeContent(this._oBasicSearchField);}if(i&&this._isNewFilterBarDesign()){this._addBasicSearchToBasicArea(i);}else{if(i&&this._oToolbar&&(!this._isPhone()||this.getAdvancedMode())){var n=this._indexOfSpacerOnToolbar();this._oToolbar.insertContent(i,n);if(this._isUi2Mode()){i.attachLiveChange(function(k1){j.fireFilterChange(k1);});}}}this._oBasicSearchField=i;return this;};c1.prototype._getBasicSearchValue=function(){if(this._oBasicSearchField&&this._oBasicSearchField.getValue){return this._oBasicSearchField.getValue();}return null;};c1.prototype._indexOfSpacerOnToolbar=function(){var j=this._oToolbar.getContent(),i;if(j){for(i=0;i<j.length;i++){if(j[i]instanceof f){return i;}}}return 0;};c1.prototype.addFilterItem=function(i){var n,j,k1,l1;if(!i){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem' may not be null nor empty");}n=i.getName();if(!n){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem.name' may not be null nor empty");}j=i.getControl();if(!j){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem.control' may not be null nor empty");}this.addAggregation("filterItems",i,true);if(!this._aBasicAreaSelection){this._aBasicAreaSelection=[];}var m1={control:i.getControl(),filterItem:i};this._aBasicAreaSelection.push(m1);l1=i.getId()+"__filterGroupItem";k1=sap.ui.getCore().byId(l1);if(!k1){k1=new F(i.getId()+"__filterGroupItem",{label:i.getLabel(),controlTooltip:i.getControlTooltip(),name:i.getName(),mandatory:i.getMandatory(),visible:i.getVisible(),visibleInFilterBar:i.getVisibleInFilterBar(),partOfCurrentVariant:true,control:i.getControl(),groupName:c1.INTERNAL_GROUP,groupTitle:"",hiddenFilter:i.getHiddenFilter(),entitySetName:i.getEntitySetName(),entityTypeName:i.getEntityTypeName()});}if(i.data('isCustomField')){k1.data('isCustomField',true);}i.attachChange(this._filterItemChange);this.addFilterGroupItem(k1);return this;};c1.prototype.addFilterGroupItem=function(i){var n,j,k1,l1;if(!i){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItem()"+" Expected argument 'oFilterGroupItem' may not be null nor empty");}this.addAggregation("filterGroupItems",i,true);j=i.getGroupName();if(!j){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItems()"+" GroupName may not be null nor empty");}n=i.getName();if(!n){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItems()"+" Name may not be null nor empty");}if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={};}if(!this._mAdvancedAreaFilter[j]){this._mAdvancedAreaFilter[j]={};this._mAdvancedAreaFilter[j].filterItem=null;this._mAdvancedAreaFilter[j].items=[];}if(!this._mAdvancedAreaFilter[j].items){this._mAdvancedAreaFilter[j].items=[];}if(!this._mAdvancedAreaFilter[j].filterItem){this._mAdvancedAreaFilter[j].filterItem=i;}k1={control:i.getControl(),filterItem:i};if(this.getAdvancedMode()||i.getVisibleInFilterBar()){i.setVisibleInFilterBar(true);}else{i.setVisibleInFilterBar(false);}this._mAdvancedAreaFilter[j].items.push(k1);if(!i.getHiddenFilter()){l1=this._addControlToBasicAreaFormContainer(i);if(l1){k1.container=l1;l1.setVisible(i.getVisible()&&i.getVisibleInFilterBar());if(i.getVisibleInFilterBar()){i.setPartOfCurrentVariant(i.getVisibleInFilterBar());}i.attachChange(this._filterGroupItemChange);}if(this.getAdvancedMode()){this._rerenderAA();}else{this._showHintText();}}this._adaptButtonsEnablement();return this;};c1.prototype.removeFilterItem=function(j){var i,n,k1,l1,m1=this.getFilterItems(),n1=this.getFilterGroupItems();if(!m1||!m1.length){return null;}n=this._getRemovedItemAsObject(j,m1);if(!n){return null;}n.detachChange(this._filterItemChange);for(i=0;i<this._aBasicAreaSelection.length;i++){if(this._aBasicAreaSelection[i].filterItem.getId()===n.getId()){this._aBasicAreaSelection.splice(i,1);if(this._aBasicAreaSelection.length===0){this._aBasicAreaSelection=null;}break;}}this.removeAggregation("filterItems",n,true);k1=n.getId()+"__filterGroupItem";l1=this._getRemovedItemAsObject(k1,n1);this._removeFilterGroupItem(l1);return n;};c1.prototype.removeFilterGroupItem=function(i){var j,n=this.getFilterGroupItems();if(!n||!n.length){return null;}j=this._getRemovedItemAsObject(i,n);if(!j){return null;}return this._removeFilterGroupItem(j);};c1.prototype._getRemovedItemAsObject=function(j,n){var i,k1;if(typeof j==="string"){for(i=0;i<n.length;i++){if(n[i].getId()===j){k1=n[i];break;}}}if(typeof j==="number"){if(j<0||j>=n.length){v.warning("sap.ui.comp.filterbar.FilterBar.prototype.removeFilterGroupItems() is called with invalid index "+j);}else{k1=n[j];}}if(typeof j==="object"){k1=j;}return k1;};c1.prototype._removeFilterGroupItem=function(j){var i,n,k1,l1=j.getGroupName();j.detachChange(this._filterGroupItemChange);this.removeAggregation("filterGroupItems",j,true);if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[l1]&&this._mAdvancedAreaFilter[l1].items){n=this._mAdvancedAreaFilter[l1];for(i=0;i<n.items.length;i++){k1=n.items[i];if(k1.filterItem.getId()===j.getId()){k1.container.removeAllContent();k1.container.destroy();n.items.splice(i,1);if(n.filterItem.getId()===j.getId()){if(n.items.length){n.filterItem=n.items[0].filterItem;}else{delete this._mAdvancedAreaFilter[l1];}}break;}}if(this.getFilterGroupItems().length===0){this._mAdvancedAreaFilter=null;this._adaptButtonsEnablement();}}return j;};c1.prototype._addParameter=function(j){var i,n,k1,l1=false,m1=false,n1=c1.INTERNAL_GROUP;j._setParameter(true);j.setVisibleInFilterBar(true);j.setPartOfCurrentVariant(true);this.addAggregation("_parameters",j,true);n={control:j.getControl(),filterItem:j};if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={};}if(!this._mAdvancedAreaFilter[n1]){this._mAdvancedAreaFilter[n1]={};this._mAdvancedAreaFilter[n1].filterItem=null;}if(!this._mAdvancedAreaFilter[n1].items){this._mAdvancedAreaFilter[n1].items=[];}for(i=0;i<this._mAdvancedAreaFilter[n1].items.length;i++){var o1=this._mAdvancedAreaFilter[n1].items[i];if(o1.filterItem._isParameter()){continue;}this._mAdvancedAreaFilter[n1].items.splice(i,0,n);l1=true;break;}if(!l1){this._mAdvancedAreaFilter[n1].items.push(n);if(Object.keys(this._mAdvancedAreaFilter).length>1){m1=true;}}k1=this._addControlToBasicAreaFormContainer(j);if(k1){n.container=k1;k1.setVisible(j.getVisible());j.attachChange(this._filterGroupItemChange.bind(this));}if(l1||m1){this._oBasicAreaLayout.removeContent(k1);if(j.getVisible()){this._addContainerInOrder(n.filterItem,n.container);}}if(!this.getAdvancedMode()){this._showHintText();}this._adaptButtonsEnablement();return this;};c1.prototype._filterItemChange=function(i,j){var n,k1,l1,m1;if(j&&j.oSource&&(j.oSource.isA("sap.ui.comp.filterbar.FilterItem"))){l1=j.getParameter("propertyName");if(l1==="visibleInFilterBar"||l1==="visible"||l1==="label"||l1==="labelTooltip"||l1==="controlTooltip"||l1==="mandatory"){n=this._determineItemByName(j.oSource.getName(),c1.INTERNAL_GROUP);if(n&&n.filterItem){if((l1==="visible")){k1=j.oSource.getVisible();n.filterItem.setVisible(k1);}else if(l1==="visibleInFilterBar"){k1=j.oSource.getVisibleInFilterBar();var n1=this._checkChangePossibleVisibleInFilterBar(n.filterItem,k1);if(n1){n.filterItem.setVisibleInFilterBar(k1);}else{j.oSource.setVisibleInFilterBar(true);}}else if(l1==="label"){n.filterItem.setLabel(j.oSource.getLabel());}else if(l1==="labelTooltip"){n.filterItem.setLabelTooltip(j.oSource.getLabelTooltip());}else if(l1==="controlTooltip"){m1=this.determineControlByFilterItem(n.filterItem,true);if(m1&&m1.setTooltip){m1.setTooltip(n.filterItem.getControlTooltip());}}else if(l1==="mandatory"){k1=j.oSource.getMandatory();n.filterItem.setMandatory(k1);}}}}};c1.prototype._filterGroupItemChange=function(i){var j;var n;if(i&&i.oSource){n=i.getParameter("propertyName");if(n==="visibleInFilterBar"||n==="visible"){j=this._determineItemByName(i.oSource.getName(),i.oSource.getGroupName());if(j){if(n==="visibleInFilterBar"){var k1=i.oSource.getVisibleInFilterBar();var l1=this._checkChangePossibleVisibleInFilterBar(i.oSource,k1);if(!l1){i.oSource.setVisibleInFilterBar(true);k1=true;}if(k1){i.oSource.setPartOfCurrentVariant(true);}if(!this.getAdvancedMode()&&!this._oDialog&&!this._oAdaptFiltersDialog){this._rerenderItem(j);this._adaptLinkText(i.oSource.getGroupName());}}else if(n==="visible"){if(!this._oAdaptFiltersDialog){if(this.getAdvancedMode()&&j.container){j.container.setVisible(true);}else{this._updateToolbarText();this._rerenderGroup(j,i.oSource.getGroupName());}}}this._showHintText();}}else if(n==="groupTitle"){if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[i.oSource.getGroupName()]){if(this._mAdvancedAreaFilter[i.oSource.getGroupName()].formcontainer){this._mAdvancedAreaFilter[i.oSource.getGroupName()].formcontainer.setTitle(i.oSource.getGroupTitle());}else{this._adaptGroupTitle(i.oSource.getGroupName());}}}else if(n==="label"){if(!this._mAdvancedAreaFilter[i.oSource.getGroupName()].formcontainer){this._adaptGroupTitleForFilter(i.oSource);}}else if(n==="mandatory"){if(this._oFilterDialog){this._adaptMandatoryForFilter(i.oSource);}}else if((n==="partOfCurrentVariant")&&this.ensureLoadedValueHelpList){var m1=this.determineFilterItemByName(i.oSource.getName());if(m1&&m1.getPartOfCurrentVariant()){this.ensureLoadedValueHelpList(i.oSource.getName());}}if(this.getAdvancedMode()){this._rerenderAA();}}};c1.prototype._addContainer=function(i){if(i){if(this._oBasicAreaLayout&&!this._oFilterDialog){if(i.container&&(this._oBasicAreaLayout.indexOfContent(i.container)===-1)){this._addContainerInOrder(i.filterItem,i.container);}}}};c1.prototype._removeContainer=function(i){if(i){if(this._oBasicAreaLayout&&!this._oFilterDialog){if(i.container&&(this._oBasicAreaLayout.indexOfContent(i.container)>-1)){this._oBasicAreaLayout.removeContent(i.container);}}}};c1.prototype._addContainerInOrder=function(j,k1){var n,i,l1,m1=this._oBasicAreaLayout.getContent(),n1=-1;if(this._isNewFilterBarDesign()){if(this._isPhone()){n1++;}if(this._oBasicSearchField){n1++;}}if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){var o1=this._mAdvancedAreaFilter[n];if(o1&&o1.items){for(i=0;i<o1.items.length;i++){if(!o1.items[i].container){continue;}if(o1.items[i].container===k1){this._oBasicAreaLayout.insertContent(k1,n1+1);return;}l1=m1.indexOf(o1.items[i].container);if(l1>=0){n1=l1;}}}}}};c1.prototype._checkChangePossibleVisibleInFilterBar=function(i,j){if(i&&i.getMandatory()&&!j){var n=this._hasFilterValue(i);if(!n){i.setVisibleInFilterBar(true);return false;}}return true;};c1.prototype._adaptLinkText=function(i){if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[i]&&this._mAdvancedAreaFilter[i].link){this._setLinkText(i,this._mAdvancedAreaFilter[i].link);}};c1.prototype._hasFilterValue=function(i){var j;if(!this._getTriggerFilterChangeState()&&this.getAllFiltersWithValues){j=this.getAllFiltersWithValues();}else{j=this._getFiltersWithValues();}return this._checkFilterForValue(j,i);};c1.prototype._adaptMandatoryForFilter=function(i){var j;var n=i.getGroupName();if(i){j=this._determineItemByName(i.getName(),n);if(j&&j.checkbox&&j.checkbox.getVisible()){var k1=true;if(i.getMandatory()){var l1=this._hasFilterValue(i);if(!l1){k1=false;i.setVisibleInFilterBar(true);}}j.checkbox.setEnabled(k1);}}};c1.prototype._adaptGroupTitleForFilter=function(i){var j;var n;if(i&&!i.getHiddenFilter()){j=i.getLabel();n=i.getLabelControl(this.getId());if(this.getConsiderGroupTitle()){if(n&&i.getGroupTitle()){n.setText(j+" ("+i.getGroupTitle()+')');}}else{n.setText(j);}}};c1.prototype._adaptGroupTitle=function(j){var i;var n;if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[j]&&this._mAdvancedAreaFilter[j].items){for(i=0;i<this._mAdvancedAreaFilter[j].items.length;i++){n=this._mAdvancedAreaFilter[j].items[i];if(n&&n){this._adaptGroupTitleForFilter(n.filterItem);}}}};c1.prototype._adaptGroupsTitle=function(){var n=null;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n&&n!==c1.INTERNAL_GROUP){this._adaptGroupTitle(n);}}}};c1.prototype.registerGetFiltersWithValues=function(i){this._fRegisterGetFiltersWithValues=i;return this;};c1.prototype.registerFetchData=function(i){this._fRegisteredFetchData=i;return this;};c1.prototype.registerApplyData=function(i){this._fRegisteredApplyData=i;return this;};c1.prototype._isTINAFScenario=function(){if(this._oVariantManagement){if(!this._isUi2Mode()){return true;}}else{if(this._oCollectiveSearch&&this.getAdvancedMode()){return true;}}return false;};c1.prototype.fireInitialise=function(){if(this._isTINAFScenario()){this._createVisibleFilters();if(this.getAdvancedMode()){this._ensureFilterLoaded(null);}this._fireInitialiseEvent();}else{this._initializeVariantManagement();}};c1.prototype.variantsInitialized=function(){this._afterVariantsLoad();this.fireInitialized();};c1.prototype.fireInitialized=function(){this.fireEvent("initialized");};c1.prototype._initializeVariantManagement=function(){this._createVisibleFilters();if(this._oVariantManagement&&this.getPersistencyKey()){if(this._isTINAFScenario()){this._oVariantManagement.initialise(this._initialiseVariants,this);}else{this._fInitialiseVariants=this._initialiseVariants.bind(this);this._oVariantManagement.attachInitialise(this._fInitialiseVariants,this);this._oVariantManagement.initialise();}}else{this._fireInitialiseEvent();}};c1.prototype._fireInitialiseEvent=function(){try{this.fireEvent("initialise");this._showHintText();}catch(i){v.error("error during initialise event handling - "+i.message);}this._bIsInitialized=true;this._updateToolbarText();};c1.prototype._initialiseVariants=function(){this._fireInitialiseEvent();if(this._oVariantManagement){this._oVariantManagement.currentVariantSetModified(false);}};c1.prototype.fireAfterVariantLoad=function(i,j){this._rerenderFilters();var n={context:i,executeOnSelect:j};try{this.fireEvent("afterVariantLoad",n);}catch(ex){v.error("error during 'afterVariantLoad' event handling - "+ex.message);}};c1.prototype.fireBeforeVariantSave=function(i){var j={context:i};var n=this._getConsiderFilterChanges();if(i){this._setConsiderFilterChanges(false);}this.fireEvent("beforeVariantSave",j);if(i){this._setConsiderFilterChanges(n);}};c1.prototype.destroyFilterGroupItems=function(){var i=this.getFilterGroupItems();this._destroyItems(i);return this;};c1.prototype.destroyFilterItems=function(){var i=this.getFilterItems();this._destroyItems(i);return this;};c1.prototype.removeAllFilterItems=function(){var i,j=this.getFilterItems();if(j&&j.length){for(i=0;i<j.length;i++){this.removeFilterItem(j[i]);}}return j;};c1.prototype.removeAllFilterGroupItems=function(){var i,j=[],n=this.getFilterGroupItems();if(n&&n.length){for(i=0;i<n.length;i++){j.push(n[i]);this.removeFilterGroupItem(n[i]);}}return j;};c1.prototype.removeAllFilters=function(){this.removeAllFilterItems();this.removeAllFilterGroupItems();this.removeBasicSearch();};c1.prototype.removeBasicSearch=function(){this.setBasicSearch(null);};c1.prototype.getAllFilterItems=function(j){var i,n=null;var k1=[];var l1,m1;if(!j){this._ensureFilterLoaded(null);}if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){l1=this._mAdvancedAreaFilter[n];if(l1.items){for(i=0;i<l1.items.length;i++){m1=l1.items[i];if(m1&&m1.filterItem&&m1.filterItem.getVisible()){if(j){if(m1.filterItem.getVisibleInFilterBar()||m1.filterItem.getPartOfCurrentVariant()){k1.push(m1.filterItem);}}else{k1.push(m1.filterItem);}}}}}}}return k1;};c1.prototype._clearErrorState=function(){this._resetFiltersInErrorValueState();};c1.prototype.getAggregation=function(n){if(n=="filterGroupItems"&&!this.__bDeleteMode){this._ensureFilterLoaded(null);}return G.prototype.getAggregation.apply(this,arguments);};c1.prototype._getFilterInformation=function(){return[];};c1.prototype._createVisibleFilters=function(){this._getFilters();};c1.prototype._getFilters=function(){this._aFields=this._getFilterInformation();var i,j;if(this._aFields&&this._aFields.length>0){if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={};if(!this.getAdvancedMode()){this._mAdvancedAreaFilter[c1.INTERNAL_GROUP]={};this._mAdvancedAreaFilter[c1.INTERNAL_GROUP].filterItem=null;this._mAdvancedAreaFilter[c1.INTERNAL_GROUP].items=null;}}for(i=0;i<this._aFields.length;i++){j=this._aFields[i];if(j.groupName!==c1.INTERNAL_GROUP){if(!this._mAdvancedAreaFilter[j.groupName]){this._mAdvancedAreaFilter[j.groupName]={};this._mAdvancedAreaFilter[j.groupName].groupTitle=j.groupTitle;this._mAdvancedAreaFilter[j.groupName].filterItem=null;this._mAdvancedAreaFilter[j.groupName].items=[];}}if(j.visibleInAdvancedArea||(j.groupName===c1.INTERNAL_GROUP)){this._instanciateFilterItem(j);}}}this._adaptButtonsEnablement();};c1.prototype.isVisibleInFilterBarByName=function(n){var i,j=this._getFilterMetadata(n);if(j&&j.factory){if((j.hasOwnProperty("visibleInAdvancedArea")&&j.visibleInAdvancedArea)||(j.groupName===c1.INTERNAL_GROUP)){return true;}}else{i=this.determineFilterItemByName(n);if(i){return i.getVisibleInFilterBar();}}return false;};c1.prototype._getFilterMetadata=function(n){if(this._aFields){for(var i=0;i<this._aFields.length;i++){if(this._aFields[i].fieldName===n){return this._aFields[i];}}}return null;};c1.prototype.getNonVisibleCustomFilterNames=function(){if(this._aFields.length>0){return this._getLazyNonVisibleCustomFilterNames();}else{return this._getNonVisibleCustomFilterNames();}};c1.prototype._getLazyNonVisibleCustomFilterNames=function(){var i=this,j=[];this._aFields.forEach(function(n){if(n.factory){if(n.isCustomFilterField&&!n.visibleInAdvancedArea){j.push(n.fieldName);}}else if(i._isNonVisibleCustomFilterNamesByName(n.fieldName,n.groupName)){j.push(n.fieldName);}});return j;};c1.prototype._isNonVisibleCustomFilterNamesByName=function(n,j){var i,k1;if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[j]&&this._mAdvancedAreaFilter[j].items){for(i=0;i<this._mAdvancedAreaFilter[j].items.length;i++){k1=this._mAdvancedAreaFilter[j].items[i];if(k1.filterName&&(k1.filterItem.getName()===n)){return this._isNonVisibleCustomFilterNamesByFilter(k1.filterItem);}}}return false;};c1.prototype._isNonVisibleCustomFilterNamesByFilter=function(i){if(i.data("isCustomField")&&!i.getVisibleInFilterBar()){return true;}return false;};c1.prototype._getNonVisibleCustomFilterNames=function(){var i=this,j=[],n=this.getAllFilterItems();if(n){n.forEach(function(k1){if(i._isNonVisibleCustomFilterNamesByFilter(k1)){j.push(k1.getName());}});}return j;};c1.prototype._ensureFilterLoaded=function(n){var i,j,k1;if(this._aFields&&this._aFields.length>0){for(j=0;j<this._aFields.length;j++){k1=this._aFields[j];if(!k1.factory){continue;}if(n){for(i=0;i<n.length;i++){if(k1.fieldName===n[i].name){if(k1.groupName===n[i].group){this._instanciateFilterItem(k1);break;}else if(k1.groupEntityType===n[i].group){this._instanciateFilterItem(k1);}}}}else{this._instanciateFilterItem(k1);}}if(!n){this._aFields=[];}}};c1.prototype._instanciateFilterItem=function(i){var j=i.factory;if(j){delete i.factory;j.call(i);}};c1.prototype._destroyItems=function(j){if(j&&j.length){for(var i=0;i<j.length;i++){j[i].destroy();}}};c1.prototype._reapplyVisibility=function(j){var i,n=null;var k1;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){var l1=this._mAdvancedAreaFilter[n];if(l1&&l1.items){for(i=0;i<l1.items.length;i++){k1=l1.items[i];if(k1&&k1.filterItem){this._setPersVisibility(j,k1.filterItem);}}if(n!==c1.INTERNAL_GROUP){this._adaptLinkText(n);}}}}}};c1.prototype._setPersVisibility=function(i,j){var n,k1;if(j&&!j.getHiddenFilter()){n=j.getGroupName();k1=this._checkForFilterInfo(i,j);if(this._isTINAFScenario()){if(k1){j.setVisibleInFilterBar(k1.visibleInFilterBar);j.setPartOfCurrentVariant(k1.partOfCurrentVariant);if(k1.hasOwnProperty("visible")){j.setVisible(k1.visible);}}else{j.setVisibleInFilterBar(false);if((n===c1.INTERNAL_GROUP)||j._isParameter()){j.setPartOfCurrentVariant(true);}else{j.setPartOfCurrentVariant(false);}}}else{if(k1&&(k1.visibleInFilterBar!==undefined)){j.setVisibleInFilterBar((k1.visibleInFilterBar));j.setPartOfCurrentVariant((k1.partOfCurrentVariant));}else{if((n!==c1.INTERNAL_GROUP)&&k1&&(k1.group===n)){j.setVisibleInFilterBar((k1!==null));}}}if(n===c1.INTERNAL_GROUP){j.setPartOfCurrentVariant(true);}if(j){var l1=this.determineControlByFilterItem(j,true);if(l1&&l1.getValueState&&(l1.getValueState()!==y.None)){l1.setValueState(y.None);}}}};c1.prototype._checkForFilterInfo=function(n,k1){var i,j,l1=k1.getName(),m1=[k1.getGroupName(),k1.getEntitySetName(),k1.getEntityTypeName()];var n1=[];if(n&&n.length){for(i=0;i<n.length;i++){if(n[i].name===l1){if(m1.indexOf(n[i].group)>-1){n1.push(n[i]);}}}}if(n1.length===1){return n1[0];}else if(n1.length>1){for(j=0;j<m1.length;j++){for(i=0;i<n1.length;i++){if(n1[i].group===m1[j]){return n1[i];}}}}return null;};c1.prototype._createVariantManagement=function(){var i=new k(this.getId()+"-variantUi2",{});var j=new h({type:"filterBar",keyName:"persistencyKey"});j.setControl(this);i.addPersonalizableControl(j);i.addStyleClass("sapUiCompFilterBarMarginLeft");return i;};c1.prototype.fireAssignedFiltersChanged=function(){this.fireEvent("assignedFiltersChanged");};c1.prototype.retrieveFiltersWithValuesAsText=function(){var j,n,k1=this.retrieveFiltersWithValues(),l1,m1=this.getBasicSearchValue();if(m1&&k1){k1.splice(0,0,this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_SEARCH_TERM"));}if(!k1||(k1.length===0)){j=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_ZERO");}else{if(!this._isPhone()){l1=Math.min(5,k1.length);n="";for(var i=0;i<l1;i++){n+=k1[i];if(i<(l1-1)){n+=', ';}}j=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS",[k1.length,n]);if(l1<k1.length){j+=", ...";}}else{j=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_MOBILE",[k1.length]);}}return j;};c1.prototype.retrieveFiltersWithValues=function(){var i,j=[];var n=this._getFiltersWithValues();if(n){for(i=0;i<n.length;i++){if(n[i].getVisible()&&n[i].getPartOfCurrentVariant()){j.push(n[i].getLabel());}}}return j;};c1.prototype._getFiltersWithValues=function(){if(this._fRegisterGetFiltersWithValues){try{return this._fRegisterGetFiltersWithValues();}catch(i){v.error("callback for obtaining the filter count throws an exception");}}return null;};c1.prototype._getFiltersWithValuesCount=function(){var n=0;var i=this.retrieveFiltersWithValues();n=i.length;if(this._oBasicSearchField&&this._oBasicSearchField.getValue&&this._oBasicSearchField.getValue()){n++;}return n;};c1.prototype._checkFilterForValue=function(j,n){var i;if(j){for(i=0;i<j.length;i++){if(j[i]===n){return true;}}}return false;};c1.prototype._handleVisibilityOfToolbar=function(){if(this.getAdvancedMode()&&this._oToolbar){var j=false;var n=this._oToolbar.getContent();for(var i=0;i<n.length;i++){if(n[i]instanceof f){continue;}if(n[i].getVisible&&n[i].getVisible()){j=true;break;}}this._oToolbar.setVisible(j);}};c1.prototype._toggleHideShow=function(){this.setFilterBarExpanded(!this.getFilterBarExpanded());};c1.prototype._updateToolbarText=function(){var i=this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS":"FILTER_BAR_ACTIVE_FILTERS";var j=this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS_ZERO":"FILTER_BAR_ACTIVE_FILTERS_ZERO";var n=this._getFiltersWithValuesCount();var k1=n?(this._oRb.getText(i,[n])):(this._oRb.getText(j));this._oFiltersButton.setText(k1);this._oFiltersButton.setTooltip(k1);this.fireAssignedFiltersChanged();};c1.prototype.setFilterBarExpanded=function(i){var j;if(this.getAdvancedMode()){this.setProperty("filterBarExpanded",i);if(this._oHideShowButton){if(i){this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_VH_HIDE"));this._oHideShowButton.setTooltip(this._oRb.getText("FILTER_BAR_VH_HIDE"));}else{this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_VH_SHOW"));this._oHideShowButton.setTooltip(this._oRb.getText("FILTER_BAR_VH_SHOW"));}}this._calcVisibilityGoButton();this._oAdvancedPanel.setVisible(i);}else{if(this._isPhone()&&this.getUseToolbar()){j=false;}else{j=i;}this.setProperty("filterBarExpanded",j);if(this._isNewFilterBarDesign()){return this;}if(this._isPhone()){if(this._oHideShowButton){this._oHideShowButton.setVisible(false);}this._calcVisibilityGoButton();this._oBasicAreaLayout.setVisible(false);}else{if(this._oHideShowButton){if(j){this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_HIDE"));this._oHideShowButton.setTooltip(this._oRb.getText("FILTER_BAR_HIDE"));}else{this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_SHOW"));this._oHideShowButton.setTooltip(this._oRb.getText("FILTER_BAR_SHOW"));}this._oHideShowButton.setVisible(true);}this._calcVisibilityGoButton();if(this._oHideShowButton){if(this._oHideShowButton.getEnabled()){this._oBasicAreaLayout.setVisible(j);}else{this._oBasicAreaLayout.setVisible(false);}}}}this._updateToolbarText();return this;};c1.prototype._selectionChangedInFilterDialog=function(i,j){this._selectionChangedInFilterDialogByValue(i.getSelected(),j);};c1.prototype._selectionChangedInFilterDialogByValue=function(i,j){j.setVisibleInFilterBar(i);if(this._getConsiderFilterChanges()&&this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(true);}this._bDirtyViaDialog=true;};c1.prototype._mandatoryFilterChange=function(i){if(!i){return;}var j=i.getParameters();if(!j||!j.oSource){return;}var n=this._determineByControl(j.oSource);if(n&&n.checkbox){var k1=n.filterItem;if(!k1.getMandatory()){return;}var l1=this._hasFilterValue(k1);if(k1.getVisibleInFilterBar()){if(l1){n.checkbox.setEnabled(true);}else{n.checkbox.setEnabled(false);}}else{if(!l1){k1.setVisibleInFilterBar(true);n.checkbox.setSelected(true);n.checkbox.setEnabled(false);}}}};c1.prototype._createFiltersAndAdaptBasicArea=function(){var i;this._setConsiderFilterChanges(false);this._recreateBasicAreaContainer(true);i=this._createFilters();this._retrieveVisibleAdvancedItems();this._setConsiderFilterChanges(true);return i;};c1.prototype._determineNotAssignedFiltersCount=function(j){var n=0,i,k1;if(this._mAdvancedAreaFilter[j]&&this._mAdvancedAreaFilter[j].items){for(i=0;i<this._mAdvancedAreaFilter[j].items.length;i++){k1=this._mAdvancedAreaFilter[j].items[i].filterItem;if(!k1.getVisible()||k1.getHiddenFilter()){continue;}if(!k1.getPartOfCurrentVariant()&&!k1.getVisibleInFilterBar()){n++;}}}return n;};c1.prototype._rerenderGroup=function(j,n){var i;var k1;this._rerenderItem(j);this._adaptLinkText(n);if(j.formelement){if(this._mAdvancedAreaFilter[n]&&this._mAdvancedAreaFilter[n].items&&this._mAdvancedAreaFilter[n].formcontainer){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){k1=this._mAdvancedAreaFilter[n].items[i].filterItem;if(k1&&k1.getVisible()){this._mAdvancedAreaFilter[n].formcontainer.setVisible(true);return;}}this._mAdvancedAreaFilter[n].formcontainer.setVisible(false);}}};c1.prototype._setLinkTextAndCount=function(i,j,n){var k1;if(n){k1=this._oRb.getText("FILTER_BAR_SHOW_MORE_FILTERS",[n]);}else{k1=this._oRb.getText("FILTER_BAR_SHOW_CHANGE_FILTERS");}j.setText(k1);};c1.prototype._setLinkText=function(i,j){var n=this._determineNotAssignedFiltersCount(i);this._setLinkTextAndCount(i,j,n);};c1.prototype._createLink=function(i,j){var n,k1=this;n=t.replace(i);var l1=new b(this.getId()+"-link-"+n);this._setLinkText(i,l1);l1.attachPress(function(){k1._createAddRemoveFiltersDialog(i,l1);});return l1;};c1.prototype._isPhone=function(){return!!(D.system.phone);};c1.prototype._isTablet=function(){return!!(D.system.tablet&&!D.system.desktop);};c1.prototype._createForm=function(i){var j=this;var n=new X(this.getId()+"-form",{editable:true,layout:i});n.contentOnAfterRendering=function(k1,l1){X.prototype.contentOnAfterRendering.apply(this,arguments);if(l1.isA("sap.m.MultiInput")){j._adaptStyleSheet(l1);}};return n;};c1.prototype._adaptStyleSheet=function(i){var j;var n;if(i.isA("sap.m.MultiInput")){n=i.$();if(n){j=n.parent().css("overflow");if(j!=="visible"){n.parent().css({"overflow":"visible"});}}}};c1.prototype._addFieldToFiltersDialog=function(i,j,n){var k1,l1,m1,n1;if(!i&&!i.filterItem||i.filterItem.getHiddenFilter()){return;}var o1=this._determineVisibility(i.filterItem);if(i.control.getWidth){i.width=i.control.getWidth();if(i.control.setWidth){i.control.setWidth("100%");}}k1=i.filterItem.getLabelControl(this.getId());if(this.getConsiderGroupTitle()){k1.setText(i.filterItem.getLabel());}l1=new C({tooltip:this._oRb.getText("FILTER_BAR_SHOW_IN_FILTERBAR")});l1.setSelected(i.filterItem.getVisibleInFilterBar());if(i.filterItem.getMandatory()){n1=this._checkFilterForValue(n,i.filterItem);if(!n1&&i.filterItem.getVisibleInFilterBar()){l1.setEnabled(false);}}l1.attachSelect(this._selectionChangedInFilterDialog.bind(this,l1,i.filterItem));if(this._isNewFilterBarDesign()||!this._isPhone()){i.control.setLayoutData(new r({span:"L8 M8 S11"}));l1.setLayoutData(new r({span:"L1 M1 S1"}));}else{i.control.setLayoutData(new r({span:"L8 M8 S12"}));l1.setVisible(false);}m1=new Z({label:k1,fields:[i.control,l1]});m1.setVisible(o1);i.formelement=m1;i.checkbox=l1;j.addFormElement(m1);};c1.prototype._createHeaderAddToFilterBar=function(i){var j;if(this._isNewFilterBarDesign()||!this._isPhone()){j=new L(this.getId()+"-addToFilterBar",{text:this._oRb.getText("FILTER_BAR_SHOW_IN_FILTERBAR")});var n=new _({text:M.escapeSettingsValue(i.getTitle().getText()),level:c.TitleLevel.H5,titleStyle:c.TitleLevel.H5});var k1=new e(this.getId()+"-addToFilterBarToolbar",{content:[n,new f(),j]});i.setToolbar(k1);i.addAriaLabelledBy(n);j.setLabelFor(null);}};c1.prototype._addBasicSearchAddToFilterBar=function(i){var j;if(!this._isPhone()){this._oBasicSearchFieldClone=this._oBasicSearchField.clone();if(this._oToolbar){this._replaceOnToolbar(this._oBasicSearchField,this._oBasicSearchFieldClone);}else{this._addBasicSearchToBasicArea(this._oBasicSearchFieldClone);}}else{if(this.getAdvancedMode()){this._oBasicSearchFieldClone=this._oBasicSearchField.clone();}}if(this._isNewFilterBarDesign()||!this._isPhone()){this._oBasicSearchField.setLayoutData(new r({span:"L8 M8 S11",indent:"L3 M3 S0"}));}else{this._oBasicSearchField.setLayoutData(new r({span:"L8 M8 S12"}));}if(this._isPhone()&&this.getAdvancedMode()){j=new Z({fields:[this._oBasicSearchFieldClone]});}else{j=new Z({fields:[this._oBasicSearchField]});}i.addFormElement(j);};c1.prototype._isGroupEmpty=function(i){var j=true;i.some(function(n){if(n.filterItem&&n.filterItem.getVisible()&&!n.filterItem.getHiddenFilter()){j=false;return true;}return false;});return j;};c1.prototype._createFilters=function(){var j=this,n=null,i,k1;var l1=null,m1,n1,o1;var p1,q1,r1=true,s1;this._oClonedVM=null;var t1=new $();t1.setColumnsL(1);t1.setLabelSpanL(3);t1.setColumnsM(1);t1.setLabelSpanM(3);var u1=this._createForm(t1);u1.addStyleClass("sapUiCompFilterBarDialogForm");if(this._possibleToChangeVariantManagement()&&this._oToolbar){var v1=this._oToolbar.indexOfContent(this._oVariantManagement);if(v1>=0){var w1=m.prototype._setSelection;m.prototype._setSelection=function(){};this._oClonedVM=this._oVariantManagement.clone();m.prototype._setSelection=w1;this._oClonedVM._setSelectionByKey(this._oVariantManagement.getSelectionKey());this._replaceOnToolbar(this._oVariantManagement,this._oClonedVM);l1=new Y();this._oVariantManagement.setLayoutData(new r({span:"L10 M10 S12"}));m1=new Z({fields:this._oVariantManagement});l1.addFormElement(m1);u1.addFormContainer(l1);}u1.addStyleClass("sapUiCompFilterBarGroupTitle");}if(this._oBasicSearchField&&!this._isNewFilterBarDesign()){if(!l1){l1=new Y();u1.addFormContainer(l1);}this._addBasicSearchAddToFilterBar(l1);}this._ensureFilterLoaded(null);var x1=this._getFiltersWithValues();this._fRegisteredFilterChangeHandlers=function(y1){j._mandatoryFilterChange(y1);};this.attachFilterChange(this._fRegisteredFilterChangeHandlers);this._oVariant.content=this.fetchVariant();if(this._oVariantManagement){this._oVariant.key=this._oVariantManagement.getSelectionKey();this._oVariant.modified=this._oVariantManagement.currentVariantGetModified();}this._oInitialVariant={};w(this._oInitialVariant,this._oVariant);for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n].items){if(n===c1.INTERNAL_GROUP){k1=this._oRb.getText("FILTER_BAR_BASIC_GROUP");}else{k1=this._mAdvancedAreaFilter[n].filterItem.getGroupTitle();}q1=new p({text:M.escapeSettingsValue(k1)});l1=new Y({title:M.escapeSettingsValue(q1)});if(r1&&!this._isGroupEmpty(this._mAdvancedAreaFilter[n].items)){r1=false;this._createHeaderAddToFilterBar(l1);if(this._oBasicSearchField&&this._isNewFilterBarDesign()){this._addBasicSearchAddToFilterBar(l1);}}s1=0;this._mAdvancedAreaFilter[n].formcontainer=l1;for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){o1=this._mAdvancedAreaFilter[n].items[i];this._addFieldToFiltersDialog(o1,l1,x1);if(!o1.filterItem.getVisible()){s1++;}}n1=l1.getFormElements();if(n1&&n1.length>0){if((n!==c1.INTERNAL_GROUP)&&!this.getAdvancedMode()){p1=this._createLink(n,q1);if(p1){if(this._isPhone()){p1.setLayoutData(new r({span:"L8 M8 S12"}));}else{p1.setLayoutData(new r({span:"L8 M8 S12",indent:"L3 M3 S0"}));}m1=new Z({fields:[p1]});this._mAdvancedAreaFilter[n].link=p1;l1.addFormElement(m1);}if(s1===n1.length){l1.setVisible(false);}}u1.addFormContainer(l1);}}}return u1;};c1.prototype._replaceOnToolbar=function(i,n){var j;if(this._oToolbar){j=this._oToolbar.indexOfContent(i);if(j>-1){this._oToolbar.insertContent(n,j);this._oToolbar.removeContent(i);}}};c1.prototype._recreateBasicAreaContainer=function(j){var n=null,i;var k1,l1;var m1,n1,o1;if(this._possibleToChangeVariantManagement()&&this._oToolbar&&this._oClonedVM&&this._oVariantManagement){this._replaceOnToolbar(this._oClonedVM,this._oVariantManagement);this._oClonedVM.destroy();this._oClonedVM=null;}if(!this._isPhone()&&this._oToolbar&&this._oBasicSearchFieldClone&&this._oBasicSearchField){this._replaceOnToolbar(this._oBasicSearchFieldClone,this._oBasicSearchField);this._oBasicSearchFieldClone.destroy();this._oBasicSearchFieldClone=null;}var p1=this._oBasicAreaLayout.removeAllContent();if(!j){if(p1){var q1=p1.length;var r1=0;if(this._isNewFilterBarDesign()){if(this._isPhone()){r1++;}else{q1--;}}for(i=r1;i<q1;i++){if(p1[i]!==this._oHintText){p1[i].destroy();}}}}if(this._isNewFilterBarDesign()){this._addBasicSearchToBasicArea(this._oBasicSearchField);this._addButtonsToBasicArea();}for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){m1=this._mAdvancedAreaFilter[n].items[i].filterItem;if(m1.getHiddenFilter()){continue;}o1=null;if(j){if(!m1.getVisible()||!m1.getVisibleInFilterBar()){continue;}n1=this._mAdvancedAreaFilter[n].items[i].container;if(n1){if(n1.$()&&n1.$().width()){o1=n1.$().width();}n1.removeAllContent();n1.destroy();}k1=this._mAdvancedAreaFilter[n].items[i].control.clone();l1=m1.getLabelControl(this.getId()).clone();l1.setLabelFor(null);if(this.getConsiderGroupTitle()){m1.getLabelControl(this.getId()).setText(m1.getLabel());}}else{k1=this._mAdvancedAreaFilter[n].items[i].control;l1=m1.getLabelControl(this.getId());if(this._mAdvancedAreaFilter[n].items[i].width){k1.setWidth("100%");}}n1=this._addControlToBasicAreaContainer(m1,k1,l1);if(n1){n1.setVisible(m1.getVisible()&&m1.getVisibleInFilterBar());this._mAdvancedAreaFilter[n].items[i].container=n1;if(j&&o1){n1.setWidth("100%");}}}}}};c1.prototype._focusOnFirstFilterInError=function(){for(var n in this._mAdvancedAreaFilter){if(this._mAdvancedAreaFilter[n].items){for(var i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){var j=this._mAdvancedAreaFilter[n].items[i];if(j&&j.control&&j.control.getValueState&&j.control.getValueState()==="Error"){this._expandGroup(j);j.control.getDomRef().scrollIntoView();return;}}}}};c1.prototype._searchRequested=function(i){var j,n=false;if(this.verifySearchAllowed){j=this.verifySearchAllowed();if(j.hasOwnProperty("pending")){return;}else if(j.hasOwnProperty("error")||j.hasOwnProperty("mandatory")){n=true;}}if(n){this._bOKFiltersDialogTriggered=false;if(this._oFiltersSearchField&&this._oFiltersSearchField.getValue()){this._resetFilterBarSearch();}this._activateMainContent();this._focusOnFirstFilterInError();}else{this._bOKFiltersDialogTriggered=true;if(!this.isLiveMode||!this.isLiveMode()){this.search();}else{i.close();}}};c1.prototype._activateMainContent=function(){var i=this.getFilterDialogContent();if(i&&(i.length>1)){this.addFilterDialogContent(i[0]);}};c1.prototype.fireSearch=function(i){if(this._bOKFiltersDialogTriggered){if(this._oFilterDialog){this._oFilterDialog.close();}else if(this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.close();}}this.fireEvent("search",i);};c1.prototype._closeDialogAndRestoreFilterBar=function(){this._sSearchCriteriaInFiltersDialog=null;this._oVariant={};if(this._oFilterDialogForm){this._oFilterDialogForm.removeAllFormContainers();}this._recreateBasicAreaContainer();this._deleteProperties();this._adaptGroupsTitle();if(this._fRegisteredFilterChangeHandlers){this.detachFilterChange(this._fRegisteredFilterChangeHandlers);this._fRegisteredFilterChangeHandlers=null;}this._updateToolbarText();};c1.prototype._variantSave=function(i){var j;this._oVariant={};this.fireBeforeVariantSave();if(this._oVariantManagement&&this._oFilterDialog){j=this._oVariantManagement.getSelectionKey();this._oVariant.key=j;this._oVariant.modified=false;this._oVariant.content=this._oVariantManagement.getVariantContent(this,j);}};c1.prototype._afterVariantSave=function(i){this.fireAfterVariantSave();};c1.prototype._variantSavePressed=function(i){this._bVariantSavePressed=true;if(this._oVariantManagement){var j=this._oVariantManagement.getSelectionKey();var n=this._oVariantManagement.getItemByKey(this._oVariantManagement.getSelectionKey());if(!this._oVariantManagement._isIndustrySolutionModeAndVendorLayer()&&((j===this._oVariantManagement.getStandardVariantKey())||(n&&n.getReadOnly&&n.getReadOnly()))){this._oVariantManagement._openSaveAsDialog();}else{this._oVariantManagement._variantSavePressed();}this._bDirtyViaDialog=false;if(this._oInitialVariant&&this._oVariantManagement._getVariantContent){this._oInitialVariant.content=this._oVariantManagement._getVariantContent(this,j);}}};c1.prototype._filterSetInErrorState=function(i){if(this._oFilterDialog&&this._oFilterDialog.isOpen()){if(this._getConsiderFilterChanges()&&this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(true);}this._bDirtyViaDialog=true;}};c1.prototype._cancelFilterDialog=function(i){if(i&&this._oVariantManagement){this._bDirtyViaDialog=this._oVariantManagement._bSaveCanceled;}if(!this.getPersistencyKey()&&(this.getUseSnapshot()===false)){this.fireCancel();return;}if(this._oInitialVariant&&this._oInitialVariant.content&&this._bDirtyViaDialog){this._resetFiltersInErrorValueState();var j=this._retrieveCurrentSelectionSet(false);this._deleteValidatingTokenFlag(j);this.applyVariant(this._oInitialVariant.content,"CANCEL");if(this._oVariantManagement){if(!this._oVariantManagement.isPageVariant()){this._oVariantManagement._setSelectionByKey(this._oInitialVariant.key);}this._oVariantManagement.currentVariantSetModified(this._oInitialVariant.modified);}this.fireCancel();}};c1.prototype._resetFiltersInErrorValueState=function(){var n;n=this._retrieveCurrentSelectionSet(true,true);n.forEach(function(i){if(i.control&&i.control.setValueState&&i.control.getValueState){if(i.control.getValueState()===y.Error){if(i.control.setValue){i.control.setValue("");}i.control.setValueState(y.None);}}});};c1.prototype.showFilterDialog=function(){if(!this._oFilterDialog){this._showFilterDialog();}};c1.prototype.addFilterDialogContent=function(i){if(this._oFilterDialog&&i){var n=this._oFilterDialog.indexOfContent(i);if(n<0){this._oFilterDialog.addContent(i);}return this._setFilterDialogActiveContent(i);}return null;};c1.prototype.getFilterDialogContent=function(){if(this._oFilterDialog){return this._oFilterDialog.getContent();}return null;};c1.prototype._setFilterDialogActiveContent=function(n){var i=false;if(this._oFilterDialog){this.getFilterDialogContent().forEach(function(j){if(n===j){j.setVisible(true);i=true;}else{j.setVisible(false);}});if(i){return n;}}return null;};c1.prototype._getFilterDialogActiveContent=function(){var i=null;if(this._oFilterDialog){this.getFilterDialogContent().some(function(j){if(j.getVisible()){i=j;return true;}return false;});}return i;};c1.prototype.setContentWidth=function(n){if(this._oFilterDialog){this._oFilterDialog.setContentWidth(n+"px");}if(this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.setContentWidth(n+"px");}};c1.prototype.setContentHeight=function(n){if(this._oFilterDialog){this._oFilterDialog.setContentHeight(n+"px");}if(this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.setContentHeight(n+"px");}};c1.prototype._createStructureForAdaptFiltersDialog=function(){var j,k1,l1={filtersOnFilterBar:{items:[]},allFilters:[]};if(this._mAdvancedAreaFilter){for(var n in this._mAdvancedAreaFilter){if(n){j=this._mAdvancedAreaFilter[n];if(j.items){for(var i=0;i<j.items.length;i++){k1=j.items[i];if(!k1.filterItem){continue;}if(k1.filterItem.getHiddenFilter()){continue;}if(k1.filterItem.getVisibleInFilterBar()){l1.filtersOnFilterBar.items.push({name:k1.filterItem.getName()});}var m1=k1.filterItem.getGroupName()?k1.filterItem.getGroupName():c1.INTERNAL_GROUP;var n1=(m1===c1.INTERNAL_GROUP)?this._oRb.getText("FILTER_BAR_BASIC_GROUP"):k1.filterItem.getGroupTitle();var o1=k1.filterItem.getControlTooltip()?k1.filterItem.getControlTooltip():"";l1.allFilters.push({name:k1.filterItem.getName(),label:k1.filterItem.getLabel(),group:m1,groupLabel:n1,tooltip:o1,visibleInDialog:k1.filterItem.getVisible(),filterItem:k1.filterItem});}}}}}return l1;};c1.prototype._restoreControls=function(j){var k1,l1,m1;if(this._fRegisteredFilterChangeHandlers){this.detachFilterChange(this._fRegisteredFilterChangeHandlers);this._fRegisteredFilterChangeHandlers=null;}if(this._mAdvancedAreaFilter){for(var n in this._mAdvancedAreaFilter){if(n){k1=this._mAdvancedAreaFilter[n];if(k1.items){for(var i=0;i<k1.items.length;i++){l1=k1.items[i];if(l1.checkbox){delete l1.checkbox;}if(l1.filterItem&&!l1.filterItem.getHiddenFilter()&&l1.control&&l1.container){if(l1.fnDestroy){l1.control.destroy=l1.fnDestroy;delete l1.fnDestroy;m1=l1.container.getContent();l1.container.removeContent(m1[1]);m1[1].destroy();l1.container.insertContent(l1.control,1);l1.filterItem.detachChange(j);}}}}}}}this._rerenderFilters();};c1.prototype._expandGroup=function(n){if(this._oAdaptFiltersDialog&&this._oAdaptFiltersDialogModel&&this._oGroupPanel&&n&&n.filterItem){var k1=n.filterItem.getGroupName()?n.filterItem.getGroupName():c1.INTERNAL_GROUP;var l1=this._oAdaptFiltersDialogModel.getData().itemsGrouped;for(var i=0;i<l1.length;i++){if(l1[i].group===k1){for(var j=0;j<l1[i].items.length;j++){if(l1[i].items[j].name===n.filterItem.getName()){this._oGroupPanel.setGroupExpanded(l1[i].items[j].group,true);return;}}return;}}}};var f1,g1;c1.prototype._getEntitiesLazy=function(){if(f1&&g1&W){return Promise.resolve();}this.setBusy(true);return sap.ui.getCore().loadLibrary('sap.ui.mdc',{async:true}).then(function(){return new Promise(function(i){sap.ui.require(["sap/ui/mdc/p13n/P13nBuilder","sap/ui/mdc/p13n/panels/GroupPanelBase","sap/m/CustomListItem"],function(j,n,k1){f1=j;g1=n;W=k1;i();this.setBusy(false);}.bind(this));}.bind(this));}.bind(this));};c1.prototype.setShowOldFilterDialog=function(){this._bOldAdaptFilterDialog=true;};c1.prototype._filtersButtonPressed=function(){this._oFiltersButton.focus();if(this._bOldAdaptFilterDialog){this._showFilterDialog();}else{this._showAdaptFilterDialog();}};c1.prototype._showAdaptFilterDialog=function(){return new Promise(function(n){this._getEntitiesLazy().then(function(){if(!this._oAdaptFiltersDialog){var k1=function(t1,u1){for(var i=0;i<t1.length;i++){if(t1[i].group===u1){var o1=t1[i].items;for(var j=0;j<o1.length;j++){if(o1[j].filterItem&&o1[j].filterItem.getVisible()){if(!t1[i].groupVisible){t1[i].groupVisible=true;}return;}}if(t1[i].groupVisible){t1[i].groupVisible=false;}return;}}};var l1=function(j){if(j&&j.oSource&&(j.oSource.isA("sap.ui.comp.filterbar.FilterItem"))){var t1=j.getParameter("propertyName");if(this._oAdaptFiltersDialogModel&&t1){var o1=this._oAdaptFiltersDialogModel.getData().items;for(var i=0;i<o1.length;i++){if(o1[i].hasOwnProperty("filterItem")&&o1[i].filterItem===j.oSource){if(t1==="visible"){var u1=j.oSource.getVisible();if(o1[i].visibleInDialog!=u1){o1[i].visibleInDialog=u1;k1(this._oAdaptFiltersDialogModel.getData().itemsGrouped,o1[i].group);this._oAdaptFiltersDialogModel.checkUpdate();break;}}else if(t1==="visibleInFilterBar"){o1[i].selected=j.oSource.getVisibleInFilterBar();this._oAdaptFiltersDialogModel.checkUpdate();break;}}}}}}.bind(this);this._ensureFilterLoaded(null);var m1=this._createStructureForAdaptFiltersDialog();var n1=f1.prepareP13nData(m1.filtersOnFilterBar,m1.allFilters);this._oAdaptFiltersDialogModel=new J(n1);var o1=this._oAdaptFiltersDialogModel.getData().items;for(var i=0;i<o1.length;i++){if(o1[i].hasOwnProperty("filterItem")){o1[i].filterItem.attachChange(l1);}}this._fRegisteredFilterChangeHandlers=function(j){this._mandatoryFilterChange(j);}.bind(this);this.attachFilterChange(this._fRegisteredFilterChangeHandlers);var p1=function(j){var t1=j.getParameter("reason")==="Add";var u1=j.getParameter("item");if(!u1){return;}if(u1.name==="_BASIC_SEARCH_FIELD"){u1.selected=true;return;}var v1=this._determineItemByName(u1.name,u1.group);if(v1&&v1.filterItem){if(v1.filterItem.getMandatory()&&!t1&&!this._hasFilterValue(v1.filterItem)){u1.selected=true;}else{this._selectionChangedInFilterDialogByValue(u1.selected,v1.filterItem);}}}.bind(this);var q1=new g1({change:p1,expandFirstGroup:true});if(this.getShowRestoreButton()&&this._oVariantManagement&&this._oVariantManagement.getVisible()){q1.setOnReset(this._dialogRestore.bind(this));}this._oGroupPanel=q1;q1.setItemFactory(function(j,t1){var u1,v1,w1,x1;x1=t1.getObject();if(!x1){return undefined;}w1=this._determineItemByName(x1.name,x1.group);if(!w1||!w1.filterItem||!w1.control){return undefined;}u1=w1.filterItem;v1=w1.control;if(!v1){return undefined;}var y1=t.replace(x1.group+"-"+u1.getName()+"-selectFiltersItem");if(w1.container&&w1.container.getContent()[1]===v1){w1.container.removeContent(w1.control);w1.container.insertContent(w1.control.clone(),1);if(w1.control.destroy){w1.fnDestroy=w1.control.destroy;w1.control.destroy=function(){};}}var z1=new L({text:"{label}"});z1.setLabelFor(v1);if(u1&&u1.getMandatory()){v1.setRequired(true);}var A1=new W(y1,{selected:"{selected}",visible:"{visibleInDialog}",content:[z1,v1]});return A1;}.bind(this));q1.setP13nModel(this._oAdaptFiltersDialogModel);var r1=function(j){this._dialogCancel(this._oAdaptFiltersDialog);}.bind(this);var s1=function(j){this._dialogSearch(this._oAdaptFiltersDialog);}.bind(this);f1.createP13nDialog(q1,{id:this.getId()+"-adapt-filters-dialog",title:this._oRb.getText(this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS_DIALOG":"FILTER_BAR_ADV_FILTERS_DIALOG"),verticalScrolling:false,cancel:r1,confirm:{text:this._oRb.getText("FILTER_BAR_GO"),handler:s1}}).then(function(j){this._oAdaptFiltersDialog=j;this._oVariant.content=this.fetchVariant();if(this._oVariantManagement){this._oVariant.key=this._oVariantManagement.getSelectionKey();this._oVariant.modified=this._oVariantManagement.currentVariantGetModified();}this._oInitialVariant={};w(this._oInitialVariant,this._oVariant);this._bOKFiltersDialogTriggered=false;this._oAdaptFiltersDialog.attachBeforeOpen(function(){this.fireFiltersDialogBeforeOpen({newDialog:true});}.bind(this));this._oAdaptFiltersDialog.attachBeforeClose(function(){this._restoreControls(l1);if(!this._bOKFiltersDialogTriggered){this._cancelFilterDialog(false);}}.bind(this));this._oAdaptFiltersDialog.attachAfterClose(function(){this._oBasicAreaLayout.rerender();this._oAdaptFiltersDialogModel=null;this._oGroupPanel=null;this._oVariant={};this._oInitialVariant=null;this._oAdaptFiltersDialog.destroy();this._oAdaptFiltersDialog=null;this._showHintText();this.fireFiltersDialogClosed({context:this._bOKFiltersDialogTriggered?"SEARCH":"CANCEL"});}.bind(this));this._oAdaptFiltersDialog.setParent(this);if(this.$().closest(".sapUiSizeCompact").length>0){this._oAdaptFiltersDialog.addStyleClass("sapUiSizeCompact");}this._oAdaptFiltersDialog.isPopupAdaptationAllowed=function(){return false;};this._oAdaptFiltersDialog.open();n();}.bind(this));return;}n();}.bind(this));}.bind(this));};c1.prototype._showFilterDialog=function(){if(!this._bDialogRequested){if((!R||!Q||!X||!Y||!Z||!$||!_)){R=sap.ui.require("sap/m/Dialog");Q=sap.ui.require("sap/m/OverflowToolbarLayoutData");X=sap.ui.require("sap/ui/layout/form/Form");Y=sap.ui.require("sap/ui/layout/form/FormContainer");Z=sap.ui.require("sap/ui/layout/form/FormElement");$=sap.ui.require("sap/ui/layout/form/ResponsiveGridLayout");_=sap.ui.require("sap/m/Title");if(!R||!Q||!X||!Y||!Z||!$||!_){sap.ui.require(["sap/m/Dialog","sap/m/OverflowToolbarLayoutData","sap/ui/layout/form/Form","sap/ui/layout/form/FormContainer","sap/ui/layout/form/FormElement","sap/ui/layout/form/ResponsiveGridLayout","sap/m/Title"],h1.bind(this));this._bDialogRequested=true;}}}if(!R||!Q||!X||!Y||!Z||!$||!_){return;}if(!this._oFilterDialog){this._oFiltersSearchField=new S({placeholder:this._oRb.getText("FILTER_BAR_SEARCH"),liveChange:function(i){if(this._oFilterDialog){this.fireFiltersDialogSearchForFilters(i.getParameters());this._triggerSearchInFilterDialog(i);}}.bind(this)});this._oFilterDialog=new R(this.getId()+"-adapt-filters-dialog",{stretch:D.system.phone,resizable:true,draggable:true,contentWidth:"60rem",title:this._oRb.getText(this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS_DIALOG":"FILTER_BAR_ADV_FILTERS_DIALOG"),verticalScrolling:true,initialFocus:this._oFiltersSearchField,subHeader:new B({contentMiddle:this._oFiltersSearchField}),beforeOpen:function(){this.fireFiltersDialogBeforeOpen();}.bind(this),beforeClose:function(){if(!this._bOKFiltersDialogTriggered){this._cancelFilterDialog(this._bVariantSaveFiltersDialogTriggered);}delete this._oFilterDialog.bDoNotAddToBasicArea;this._closeDialogAndRestoreFilterBar();}.bind(this),afterClose:function(){this._oBasicAreaLayout.rerender();this._oInitialVariant=null;this._oFilterDialog.destroy();this._oFilterDialog=null;this._showHintText();this.fireFiltersDialogClosed({context:this._bOKFiltersDialogTriggered?"SEARCH":"CANCEL"});}.bind(this)}).addStyleClass("sapUiPopupWithPadding sapUiCompFilterBarDialog sapMH4FontSize sapMH4Style");this._oFilterDialog.isPopupAdaptationAllowed=function(){return false;};this._oFilterDialog.setParent(this);if(this.$().closest(".sapUiSizeCompact").length>0){this._oFilterDialog.addStyleClass("sapUiSizeCompact");}if(!this._isPhone()){this._oFilterDialog.addStyleClass("sapUiCompFilterBarDialogNonPhone");}}this._oFilterDialogForm=this._createFiltersAndAdaptBasicArea();if(!this._oFilterDialogForm){v.error("Content for Advanced Filters Dialog could not be created");return;}this._oFilterDialog.addContent(this._oFilterDialogForm);this._bOKFiltersDialogTriggered=false;this._bVariantSaveFiltersDialogTriggered=false;this._oFilterDialog.bDoNotAddToBasicArea=true;this._addFilterDialogButtons(this._oFilterDialogForm);this._bDirtyViaDialog=false;this._oFilterDialog.open();};function h1(i,j,n,k1,l1,m1,n1){R=i;Q=j;X=n;Y=k1;Z=l1;$=m1;_=n1;this._bDialogRequested=false;if(!this._bIsBeingDestroyed){this._showFilterDialog();}}c1.prototype.isDialogOpen=function(){return this._oFilterDialog?true:false;};c1.prototype._addFilterDialogButtons=function(i){var j=this;var n;var k1=null,l1,m1,n1,o1;n1=new a(this.getId()+"-btnGoFilterDialog",{text:this._oRb.getText("FILTER_BAR_GO"),press:function(){n1.focus();j._dialogSearch(j._oFilterDialog);},layoutData:new Q({priority:a1.NeverOverflow}),type:K.Emphasized});this._oFilterDialog.addButton(n1);if(!this.getAdvancedMode()){if(this._oVariantManagement&&this._oVariantManagement.getVisible()){this._oVariantManagement._delayedControlCreation();if(this._oVariantManagement.oVariantSave){k1=new a(this.getId()+"-btnSaveFilterDialog",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),enabled:this._oVariantManagement.oVariantSave.getEnabled(),press:function(){j._dialogVariantSave(i);},layoutData:new Q({priority:a1.Low})});n=this._oVariantManagement.getModel("save_enablement");k1.setModel(n);k1.bindProperty("enabled","/enabled");this._oFilterDialog.addButton(k1);}}l1=new a(this.getId()+"-btnClearFilterDialog",{text:this._oRb.getText("FILTER_BAR_CLEAR"),visible:this.getShowClearButton(),press:function(){j._dialogClear(i);},layoutData:new Q({priority:a1.Low})});this._oFilterDialog.addButton(l1);m1=new a(this.getId()+"-btnRestoreFilterDialog",{text:this._oRb.getText("FILTER_BAR_RESTORE"),visible:this.getShowRestoreButton(),press:function(){j._dialogRestore();},layoutData:new Q({priority:a1.Low})});if(n){m1.setEnabled(this._oVariantManagement.oVariantSave.getEnabled());m1.setModel(n);m1.bindProperty("enabled","/enabled");}this._oFilterDialog.addButton(m1);o1=new a(this.getId()+"-btnCancelFilterDialog",{text:this._oRb.getText("FILTER_BAR_CANCEL"),press:function(){j._dialogCancel(j._oFilterDialog);},layoutData:new Q({priority:a1.High})});this._oFilterDialog.addButton(o1);}};c1.prototype._adaptMandatoryForVisibleFilters=function(){var j,n=this._retrieveVisibleAdvancedItems();for(var i=0;i<n.length;i++){j=n[i].filterItem;this._adaptMandatoryForFilter(j);}};c1.prototype._dialogSearch=function(i){this.fireFiltersDialogSearch();this._searchRequested(i);};c1.prototype._dialogCancel=function(i){if(i){this._bOKFiltersDialogTriggered=false;this.fireFiltersDialogCancel();i.close();}};c1.prototype._dialogVariantSave=function(i){this._bVariantSaveFiltersDialogTriggered=true;this._variantSavePressed();};c1.prototype._dialogRestore=function(){this.reset();if(this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(false);}this._adaptMandatoryForVisibleFilters();};c1.prototype._dialogClear=function(i){this.clear();this._adaptMandatoryForVisibleFilters();};c1.prototype._createButtons=function(i){var j=this;this._oHideShowButton=new a(this.getId()+"-btnShowHide",{text:this._oRb.getText("FILTER_BAR_HIDE"),tooltip:this._oRb.getText("FILTER_BAR_HIDE"),type:K.Transparent,enabled:false});this._oHideShowButton.attachPress(function(){j._toggleHideShow();});i.addContent(this._oHideShowButton);this._oClearButtonOnFB=new a(this.getId()+"-btnClear",{visible:this.getShowClearOnFB(),text:this._oRb.getText("FILTER_BAR_CLEAR"),tooltip:this._oRb.getText("FILTER_BAR_CLEAR"),type:K.Transparent,enabled:false});this._oClearButtonOnFB.attachPress(function(){j.clear();});i.addContent(this._oClearButtonOnFB);this._oRestoreButtonOnFB=new a(this.getId()+"-btnRestore",{visible:this.getShowRestoreOnFB(),text:this._oRb.getText("FILTER_BAR_RESTORE"),tooltip:this._oRb.getText("FILTER_BAR_RESTORE"),type:K.Transparent,enabled:false});this._oRestoreButtonOnFB.attachPress(function(){j.reset();if(j._oVariantManagement){j._oVariantManagement.currentVariantSetModified(false);}});i.addContent(this._oRestoreButtonOnFB);this._oFiltersButton=new a(this.getId()+"-btnFilters",{visible:this.getShowFilterConfiguration()||this._isPhone(),text:this._oRb.getText("FILTER_BAR_ACTIVE_FILTERS_ZERO"),tooltip:this._oRb.getText("FILTER_BAR_ACTIVE_FILTERS_ZERO"),type:K.Transparent,enabled:false});this._oFiltersButton.attachPress(function(){this._filtersButtonPressed();}.bind(this));i.addContent(this._oFiltersButton);this._oSearchButton=new a(this.getId()+"-btnGo",{visible:this.getShowGoOnFB(),text:this._oRb.getText("FILTER_BAR_GO"),type:K.Emphasized});x.addConfig(this._oSearchButton,{event:"search"},this);this._oSearchButton.attachPress(function(){j._oSearchButton.focus();j.search();});i.addContent(this._oSearchButton);};c1.prototype._createVariantLayout=function(){this._oVariantManagement=this._createVariantManagement();if(this._possibleToChangeVariantManagement()){this._oVariantManagement.setVisible(false);}this._registerVariantManagement();return this._oVariantManagement;};c1.prototype._createToolbar=function(i){var j=new e(this.getId()+"-toolbar");if(!i){var n=this._createVariantLayout();j.addContent(n);}j.addContent(new f());this._createButtons(j);j.addStyleClass("sapUiCompFilterBarToolbar");j.setLayoutData(new r({span:"L12 M12 S12"}));return j;};c1.prototype._replaceVariantManagement=function(i){if(this._oVariantManagement){this._unregisterVariantManagement();if(this._oToolbar&&this._oToolbar.getContent(this._oVariantManagement)){this._oToolbar.removeContent(this._oVariantManagement);}this._oVariantManagement.destroy();}this._oVariantManagement=i;this._registerVariantManagement();this._adaptNewFilterBarDesign();};c1.prototype._createAdvancedAreaForm=function(){if((!X||!Y||!Z||!$)&&!this._bAdvancedRequested){X=sap.ui.require("sap/ui/layout/form/Form");Y=sap.ui.require("sap/ui/layout/form/FormContainer");Z=sap.ui.require("sap/ui/layout/form/FormElement");$=sap.ui.require("sap/ui/layout/form/ResponsiveGridLayout");if(!X||!Y||!Z||!$){sap.ui.require(["sap/ui/layout/form/Form","sap/ui/layout/form/FormContainer","sap/ui/layout/form/FormElement","sap/ui/layout/form/ResponsiveGridLayout"],i1.bind(this));this._bAdvancedRequested=true;}}if(!X||!Y||!Z||!$){return;}var i=new $(this.getId()+"-AdvancedFormLayout");i.addStyleClass("sapUiCompFilterBarPaddingForm");i.setColumnsL(3);i.setColumnsM(2);var j=new X(this.getId()+"-AdvancedForm",{editable:true});j.setLayout(i);if(!this.oInvisibleFormTitle){this.oInvisibleFormTitle=new I({text:this._oRb.getText("ADVANCED_SEARCH_TEXT")});this.addContent(this.oInvisibleFormTitle);}j.addAriaLabelledBy(this.oInvisibleFormTitle);this._oAdvancedPanel.addContent(j);return j;};function i1(i,j,n,k1){X=i;Y=j;Z=n;$=k1;this._bAdvancedRequested=false;if(!this._bIsBeingDestroyed){this._oAdvancedAreaForm=this._createAdvancedAreaForm();this._rerenderAA();}}c1.prototype._addControlToBasicAreaFormContainer=function(i){var j=i.getControl();if(!j){v.error("no Control obtained");return null;}var n=i.getLabelControl(this.getId());if(!n){v.error("no Label obtained");return null;}this._adaptGroupTitleForFilter(i);return this._addControlToBasicAreaContainer(i,j,n);};c1.prototype._addControlToBasicAreaContainer=function(i,j,n){var k1=new s();if(j.setWidth){j.setWidth("100%");}k1.setWidth("100%");if(n){if(!n.hasStyleClass("sapUiCompFilterLabel")){n.addStyleClass("sapUiCompFilterLabel");}k1.addContent(n);if(n.setLabelFor){if(i&&j){n.setLabelFor(j);if(j.setTooltip&&i.getControlTooltip()){j.setTooltip(i.getControlTooltip());}}}}k1.addContent(j);if(!this.getAdvancedMode()&&(!this._oFilterDialog||(!this._oFilterDialog.hasOwnProperty("bDoNotAddToBasicArea")))){if(i&&i.getVisible()&&i.getVisibleInFilterBar()){if(this._isNewFilterBarDesign()){var l1=this._oBasicAreaLayout.getContent();if(this._isPhone()){this._oBasicAreaLayout.addContent(k1);}else{this._oBasicAreaLayout.insertContent(k1,l1.length);}}else{this._oBasicAreaLayout.addContent(k1);}}}return k1;};c1.prototype._rerenderAA=function(){if(this._oAdvancedAreaForm){this._oAdvancedAreaForm.removeAllFormContainers();var i=this._flattenMap();this._layOutAA(i);}};c1.prototype._groupsWithVisibleFilters=function(){var n,j,k1=this._mAdvancedAreaFilter;if(this._mAdvancedAreaFilter&&Object.keys(this._mAdvancedAreaFilter).length>1){k1={};for(var l1 in this._mAdvancedAreaFilter){if(l1&&this._mAdvancedAreaFilter[l1]&&this._mAdvancedAreaFilter[l1].items){n=this._mAdvancedAreaFilter[l1].items.length;for(var i=0;i<this._mAdvancedAreaFilter[l1].items.length;i++){j=this._mAdvancedAreaFilter[l1].items[i].filterItem;if(j&&(j.getHiddenFilter()||!j.getVisible())){n--;}}if(n){k1[l1]={};}}}}return k1;};c1.prototype._layOutAA=function(i){var j=this._groupsWithVisibleFilters();if(j&&Object.keys(j).length>1){this._layOutAAMultipleGroup(i);}else{this._layOutAASingleGroup(i);}};c1.prototype._layOutAAMultipleGroup=function(n){var i,j,k1=0,l1=null,m1=false;for(i=0;i<n.length;i++){if(n[i].control===null){k1++;}}if(this._mAdvancedAreaFilter&&(Object.keys(this._mAdvancedAreaFilter).length===2)&&this._mAdvancedAreaFilter[c1.INTERNAL_GROUP]&&this._mAdvancedAreaFilter[c1.INTERNAL_GROUP].items&&(this._mAdvancedAreaFilter[c1.INTERNAL_GROUP].items.length>0)){m1=true;}var n1=this._oAdvancedAreaForm.getLayout();if(n1){if(k1>=3){n1.setLabelSpanL(5);n1.setLabelSpanM(5);n1.setColumnsL(3);n1.setColumnsM(2);}else if(k1===2){n1.setLabelSpanL(4);n1.setLabelSpanM(5);n1.setColumnsL(2);n1.setColumnsM(2);}else if(k1===1){n1.setLabelSpanL(4);n1.setLabelSpanM(5);n1.setColumnsL(2);n1.setColumnsM(2);}}for(i=0;i<n.length;i++){if(n[i].control===null){l1=new Y();if((Object.keys(this._mAdvancedAreaFilter).length>1)&&!m1){if((k1>=3)&&(n[i].filterItem.getGroupName()===c1.INTERNAL_GROUP)){l1.setTitle(this._oRb.getText("FILTER_BAR_BASIC_GROUP"));}else{l1.setTitle(n[i].filterItem.getGroupTitle());}}this._oAdvancedAreaForm.addFormContainer(l1);j=i+1;while(j<n.length&&(n[j].control)){this._addControlToAdvancedArea(n[j].filterItem,n[j].control,l1);j++;}i=j-1;}}if(k1===1){this._oAdvancedAreaForm.addFormContainer(new Y());}};c1.prototype._layOutAASingleGroup=function(j){var i,n,k1,l1;var m1=j.length-1;var n1=m1>2?2:1;if(n1>1){k1=Math.floor(m1/n1);l1=((k1*n1)<m1);for(i=1;i<n1;i++){n=i*k1;if(l1){++n;}if((n+i)<j.length){j.splice(n+i,0,j[0]);}}}this._layOutAAMultipleGroup(j);};c1.prototype._flattenMap=function(){var n=null,i,j=[],k1;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n].items){k1=false;for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){var l1=this._mAdvancedAreaFilter[n].items[i];if(l1.filterItem&&l1.filterItem.getVisibleInFilterBar()&&l1.filterItem.getVisible()&&!l1.filterItem.getHiddenFilter()){if(!k1){k1=true;j.push({control:null,filterItem:this._mAdvancedAreaFilter[n].filterItem});}j.push({control:l1.control,filterItem:l1.filterItem});}}}}}return j;};c1.prototype._triggerSearchByValue=function(j){var i,n,k1,l1;j=j.replace(/^\s+|\s+$/g,"").toLowerCase();if(this._aListItems){for(i=this._aListItems.length-1;i>=0;i--){l1=this._aListItems[i].getContent();if(l1&&(l1.length>0)){n=l1[0].getText();k1=this._aListItems[i].data("quickinfo");if((n.toLowerCase().indexOf(j)>=0||(k1&&k1.toLowerCase().indexOf(j)>=0))){this._aListItems[i].setVisible(true);}else{this._aListItems[i].setVisible(false);}}}}};c1.prototype._triggerSearch=function(i){if(!i){return;}var j=i.getParameters();if(!j){return;}var n=j.newValue?j.newValue:"";this._triggerSearchByValue(n);};c1.prototype._triggerSearchByValueInFilterDialog=function(j){var n=null,i,k1,l1,m1,n1,o1,p1;j=j.replace(/^\s+|\s+$/g,"").toLowerCase();if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){m1=this._mAdvancedAreaFilter[n];if(m1&&m1.items){o1=0;p1=0;for(i=0;i<m1.items.length;i++){if(m1.items[i]&&m1.items[i].filterItem){n1=m1.items[i].filterItem;if(n1.getHiddenFilter()){++o1;continue;}if(n1.getVisible()){if(j&&m1.items[i].formelement){k1=n1.getLabel();l1=n1.getControlTooltip();if((k1.toLowerCase().indexOf(j)>=0)||(l1&&(l1.toLowerCase().indexOf(j)>=0))){if(n1.getPartOfCurrentVariant()){m1.items[i].formelement.setVisible(true);}else{++p1;}}else{++o1;m1.items[i].formelement.setVisible(false);}}else if(m1.items[i].formelement){m1.items[i].formelement.setVisible(n1.getVisibleInFilterBar()||n1.getPartOfCurrentVariant());if(m1.link&&!m1.link.getVisible()){m1.link.setVisible(true);}}}else{++o1;}}}if(m1&&m1.formcontainer){if(o1===m1.items.length){m1.formcontainer.setVisible(false);}else{m1.formcontainer.setVisible(true);if(m1.link){m1.link.setVisible((j&&(p1===0))?false:true);if(j&&(p1>0)){this._setLinkTextAndCount(n,m1.link,p1);}else{this._setLinkText(n,m1.link);}}}}}}}}};c1.prototype._triggerSearchInFilterDialog=function(i){if(!i){return;}var j=i.getParameters();if(!j){return;}var n=j.newValue?j.newValue:"";this._sSearchCriteriaInFiltersDialog=n;this._triggerSearchByValueInFilterDialog(n);};c1.prototype._generateListItems=function(j,n){if(!W){W=sap.ui.require("sap/m/CustomListItem");if(!W){throw new Error("_generateListItems must only be called via _createAddRemoveFiltersDialog "+this);}}var i;var k1,l1;var m1;var n1=false;if(this.$().closest(".sapUiSizeCompact").length>0){n1=true;}if(j&&this._mAdvancedAreaFilter){l1=this._mAdvancedAreaFilter[j];if(l1&&l1.items){for(i=0;i<l1.items.length;i++){var o1=l1.items[i],p1=t.replace(j+"-"+o1.filterItem.getName()+"-selectFiltersItem");if(o1&&o1.filterItem){if(!o1.filterItem.getVisible()||o1.filterItem.getHiddenFilter()){continue;}k1=new W(p1);k1.setVisible(true);if(!n1){k1.addStyleClass("sapUiCompFilterBarListItem");}else{k1.addStyleClass("sapUiCompFilterBarListItemCompact");}k1.data("quickinfo",o1.filterItem.getControlTooltip()||o1.filterItem.getLabelTooltip());o1.initialPartOfCurrentVariant=o1.filterItem.getPartOfCurrentVariant();o1.initialVisibleInFilterBar=o1.filterItem.getVisibleInFilterBar();k1.data('item',o1);m1=new L({id:p1+"-label"});m1.setText(o1.filterItem.getLabel());m1.setTooltip(o1.filterItem.getControlTooltip()||o1.filterItem.getLabelTooltip());k1.addContent(m1);n.addItem(k1);if(o1.filterItem.getPartOfCurrentVariant()){n.setSelectedItem(k1);}if(o1.filterItem.getMandatory()&&o1.checkbox&&!o1.checkbox.getEnabled()){k1.getModeControl(true).setEnabled(false);}}}}}var q1=this;n.attachSelectionChange(function(r1){if(r1){var s1=r1.getParameter("listItems");if(Array.isArray(s1)){s1.forEach(function(k1){var t1=k1.getModeControl();var o1=k1.data('item');q1._selectionChangedInAddFiltersDialog(t1,o1);});}}});};c1.prototype._rerenderItem=function(i){var j;if(i){j=i.filterItem.getVisible()&&i.filterItem.getVisibleInFilterBar();if(i.container){i.container.setVisible(j);if(!j){this._removeContainer(i);}if(j){this._addContainer(i);}}if(i.formelement){i.formelement.setVisible(i.filterItem.getVisible()&&(i.filterItem.getVisibleInFilterBar()||i.filterItem.getPartOfCurrentVariant()));if(i.checkbox){i.checkbox.setSelected(i.filterItem.getVisibleInFilterBar());}}}};c1.prototype._rerenderFilters=function(){var i;var n=null;var j=null;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n]&&this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){j=this._mAdvancedAreaFilter[n].items[i];this._rerenderItem(j);}}}}this._updateToolbarText();};c1.prototype.rerenderFilters=function(){this._rerenderFilters();};c1.prototype._closeAddRemoveFiltersDialog=function(i,j){if(i&&j){if(this._sSearchCriteriaInFiltersDialog&&this._oFilterDialog){this._triggerSearchByValueInFilterDialog(this._sSearchCriteriaInFiltersDialog);}else{this._setLinkText(i,j);}}};c1.prototype._cancelAddRemoveFiltersDialog=function(j){var i;var n;if(j&&this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[j]&&this._mAdvancedAreaFilter[j].items){for(i=0;i<this._mAdvancedAreaFilter[j].items.length;i++){n=this._mAdvancedAreaFilter[j].items[i];if((n.initialPartOfCurrentVariant!==undefined||n.initialVisibleInFilterBar!==undefined)&&n.filterItem){if(n.filterItem.getHiddenFilter()){continue;}if((n.initialPartOfCurrentVariant!==undefined)&&(n.filterItem.getPartOfCurrentVariant()!==n.initialPartOfCurrentVariant)){n.filterItem.setPartOfCurrentVariant(n.initialPartOfCurrentVariant);this._notifyAboutChangedFilters(n.initialPartOfCurrentVariant,n.control);}if((n.initialVisibleInFilterBar!==undefined)&&(n.filterItem.getVisibleInFilterBar()!==n.initialVisibleInFilterBar)){n.filterItem.setVisibleInFilterBar(n.initialVisibleInFilterBar);}}}}if(this._oVariantManagement&&(this._oVariant.modified2!==undefined)){this._oVariantManagement.currentVariantSetModified(this._oVariant.modified2);}};c1.prototype._sortListItems=function(i,j){var n,k1,l1=i.data('item'),m1=j.data('item');if(l1&&l1.filterItem&&m1&&m1.filterItem){n=l1.filterItem.getLabel();k1=m1.filterItem.getLabel();}return n.localeCompare(k1);};c1.prototype._createAddRemoveFiltersDialog=function(j,n){var i,k1=this;if(!j){return;}if((!R||!W)&&!this._bCustomListItemRequested){W=sap.ui.require("sap/m/CustomListItem");R=sap.ui.require("sap/m/Dialog");if(!R||!W){sap.ui.require(["sap/m/Dialog","sap/m/CustomListItem"],j1.bind(this));this._bCustomListItemRequested=true;this._oFiltersDialogData={groupName:j,link:n};}}if(!R||!W){return;}this._oDialog=new R(this.getId()+"-set-filters-dialog",{stretch:D.system.phone,resizable:true,draggable:true});this._oDialog.addStyleClass("sapUiPopupWithPadding");this._oDialog.addStyleClass("sapUiCompAddRemoveFilterDialog");if(this.$().closest(".sapUiSizeCompact").length>0){this._oDialog.addStyleClass("sapUiSizeCompact");}this._oDialog.setTitle(this._oRb.getText("SELECT_FILTER_FIELDS"));this._oDialog.addStyleClass("sapMH4FontSize");this._oDialog.addStyleClass("sapMH4Style");this._oDialog.setVerticalScrolling(true);var l1=new B();var m1=new S({placeholder:this._oRb.getText("FILTER_BAR_SEARCH")});this._oSearchField=m1;m1.attachLiveChange(function(q1){k1._triggerSearch(q1);});l1.addContentMiddle(m1);this._oDialog.setSubHeader(l1);var n1=new d({mode:b1.MultiSelect});n1.setShowSeparators(E.None);this._oDialog.addContent(n1);this._generateListItems(j,n1);this._aListItems=n1.getItems();if(this._aListItems&&this._aListItems.length>1){this._aListItems.sort(this._sortListItems);}for(i=0;i<this._aListItems.length;i++){n1.addItem(this._aListItems[i]);}if(this._oVariant&&this._oVariantManagement){this._oVariant.modified2=this._oVariantManagement.currentVariantGetModified();}this._bOKButtonAddRemoveFilterDialogTriggered=false;var o1=new a(this.getId()+"-btnOKAddRemoveDialog",{text:this._oRb.getText("FILTER_BAR_OK"),type:sap.m.ButtonType.Emphasized});o1.attachPress(function(){k1._bOKButtonAddRemoveFilterDialogTriggered=true;k1._oDialog.close();});this._oDialog.addAggregation("buttons",o1);this._oDialog.setInitialFocus(this._oSearchField);if(this._sSearchCriteriaInFiltersDialog){this._oSearchField.setValue(this._sSearchCriteriaInFiltersDialog);this._triggerSearchByValue(this._sSearchCriteriaInFiltersDialog);}var p1=new a(this.getId()+"-btnCancelAddRemoveDialog",{text:this._oRb.getText("FILTER_BAR_CANCEL"),press:function(){k1._oDialog.close();}});this._oDialog.addAggregation("buttons",p1);this._oDialog.attachBeforeClose(function(){if(!k1._bOKButtonAddRemoveFilterDialogTriggered){k1._cancelAddRemoveFiltersDialog(j);}k1.rerenderFilters();k1._closeAddRemoveFiltersDialog(j,n);});this._oDialog.attachAfterClose(function(){this._aListItems=null;this._oDialog.destroy();this._oDialog=null;}.bind(this));this._oDialog.open();};function j1(i,j){R=i;W=j;this._bCustomListItemRequested=false;if(!this._bIsBeingDestroyed){this._createAddRemoveFiltersDialog(this._oFiltersDialogData.groupName,this._oFiltersDialogData.link);delete this._oFiltersDialogData;}}c1.prototype._selectionChangedInAddFiltersDialog=function(i,j){var n=i.getSelected();if(!n&&j.filterItem.getMandatory()&&!j.checkbox.getEnabled()){i.setSelected(true);return;}j.filterItem.setPartOfCurrentVariant(n);j.filterItem.setVisibleInFilterBar(n);this._notifyAboutChangedFilters(n,j.control);};c1.prototype._setTriggerFilterChangeState=function(i){this._triggerFilterChangeState=i;};c1.prototype._getTriggerFilterChangeState=function(){return this._triggerFilterChangeState;};c1.prototype._setConsiderFilterChanges=function(i){this._filterChangeSemaphore=i;};c1.prototype._getConsiderFilterChanges=function(){return this._filterChangeSemaphore;};c1.prototype.fireFilterChange=function(i){this._updateToolbarText();if(!this._getTriggerFilterChangeState()){return;}if(this._getConsiderFilterChanges()&&this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(true);}if(this._oFilterDialog&&!(this._oFilterDialog.isOpen())){return;}this._bDirtyViaDialog=true;this.fireEvent("filterChange",i);};c1.prototype._notifyAboutChangedFilters=function(i,j){var n,k1=this._determineByControl(j);if(i){n={"added":j,"filterItem":k1};}else{n={"deleted":j,"filterItem":k1};}this.fireFilterChange(n);};c1.prototype._determineVariantFiltersInfo=function(j,k1){var i;var n=null,l1,m1;var n1=[];if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){if(this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){l1=this._mAdvancedAreaFilter[n].items[i];if(j||l1.filterItem.getVisible()){m1={group:l1.filterItem.getGroupName(),name:l1.filterItem.getName(),partOfCurrentVariant:l1.filterItem.getPartOfCurrentVariant(),visibleInFilterBar:l1.filterItem.getVisibleInFilterBar(),visible:l1.filterItem.getVisible()};if(k1||this._considerFilter(m1)){n1.push(m1);}}}}}}}return n1;};c1.prototype.mergeVariant=function(i,j){var n={};w(n,j);n.filterbar=[];n.filterBarVariant={};w(n.filterbar,i.filterbar);w(n.filterBarVariant,i.filterBarVariant);if(j&&(j.hasOwnProperty("version"))){n.filterbar=this._mergeVariantFields(n.filterbar,j.filterbar);n.filterBarVariant=j.filterBarVariant;}return n;};c1.prototype._mergeVariantFields=function(j,n){var i;n.forEach(function(k1){for(i=0;i<j.length;i++){if((j[i].group===k1.group)&&(j[i].name===k1.name)){j.splice(i,1);break;}}});return j.concat(n);};c1.prototype._isUi2Mode=function(){if(this._oVariantManagement instanceof k){return true;}return false;};c1.prototype._isDeltaHandling=function(){if(this._isUi2Mode()){return false;}return this.getDeltaVariantMode();};c1.prototype._getStandardVariant=function(){return this._oVariantManagement.getStandardVariant(this);};c1.prototype._considerFilter=function(j){if(!this._isDeltaHandling()){return true;}var n=null;var k1=this._getStandardVariant();if(k1&&k1.filterbar){for(var i=0;i<k1.filterbar.length;i++){if((k1.filterbar[i].group===j.group)&&(k1.filterbar[i].name===j.name)){n=k1.filterbar[i];break;}}}if(!n){if(!j.partOfCurrentVariant){return false;}return true;}if((n.partOfCurrentVariant!==j.partOfCurrentVariant)||(n.visibleInFilterBar!==j.visibleInFilterBar)||(n.visible!==j.visible)){return true;}return false;};c1.prototype._addControlToAdvancedArea=function(i,j,n){var k1=new Z({label:i.getLabelControl(this.getId()),fields:[(j!==null)?j:new T()]});n.addFormElement(k1);};c1.prototype._determineVisibility=function(i){var j=false;if(i){j=i.getVisible()&&(i.getVisibleInFilterBar()||i.getPartOfCurrentVariant());j=j&&!i.getHiddenFilter();}return j;};c1.prototype._retrieveVisibleAdvancedItems=function(){var i,n=null,j;var k1=[];if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){if(this._mAdvancedAreaFilter[n]&&this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){j=this._mAdvancedAreaFilter[n].items[i];if(j){if(this._determineVisibility(j.filterItem)){k1.push(j);}}}}}}}return k1;};c1.prototype._retrieveCurrentSelectionSet=function(j,n){var i,k1,l1,m1=[];var n1=this._retrieveVisibleAdvancedItems();for(i=0;i<n1.length;i++){k1=n1[i];if(k1.control&&k1.filterItem&&(n||!k1.filterItem._isParameter())){if(j){l1={name:n1[i].filterItem.getName(),control:n1[i].control};}else{l1=n1[i].control;}m1.push(l1);}}return m1;};c1.prototype.search=function(){this.fireSearch({selectionSet:this._retrieveCurrentSelectionSet(false)});return true;};c1.prototype.clear=function(){var i={};i.selectionSet=this._retrieveCurrentSelectionSet(false);this._deleteValidatingTokenFlag(i.selectionSet);this._clearErrorState();this.fireClear(i);this._updateToolbarText();};c1.prototype._deleteValidatingTokenFlag=function(i){i.forEach(function(j){if(j.hasOwnProperty("__bValidatingToken")){delete j.__bValidatingToken;}});};c1.prototype.reset=function(){var i={};i.selectionSet=this._retrieveCurrentSelectionSet(false);this.fireReset(i);this._resetVariant();};c1.prototype._resetVariant=function(){var i=null,j=null;this._resetFiltersInErrorValueState();var n=this._retrieveCurrentSelectionSet(false);this._deleteValidatingTokenFlag(n);if(this._oVariantManagement){var k1=this._oVariantManagement.getSelectionKey();if(k1){i=this._oVariantManagement.getVariantContent(this,k1);if(this._oVariant){this._oVariant.content=i;this._oVariant.modified=false;if(this.getPersistencyKey()&&this._oInitialVariant){this._oInitialVariant.content=i;this._oInitialVariant.modified=false;this._oInitialVariant.key=k1;}}if(!this.getPersistencyKey()&&(this.getUseSnapshot()===undefined)&&this._oInitialVariant&&this._oInitialVariant.content){j=this._oInitialVariant.content;}if(i||j){this.applyVariant(i||j,"RESET");}}}this._resetFilterBarSearch();};c1.prototype._resetFilterBarSearch=function(){this._sSearchCriteriaInFiltersDialog="";if(this._oFiltersSearchField){this._oFiltersSearchField.setValue(this._sSearchCriteriaInFiltersDialog);this._triggerSearchByValueInFilterDialog(this._sSearchCriteriaInFiltersDialog);}};c1.prototype._applyVariant=function(i,j,n,k1){var l1,m1=null,n1,o1=false;if(i){if(n){n1=this._getTriggerFilterChangeState();this._setTriggerFilterChangeState(false);}this._setConsiderFilterChanges(false);l1=i.filterBarVariant;m1=i.filterbar;this._ensureFilterLoaded(m1);this._applyVariantFields(l1,k1);this._reapplyVisibility(m1);if(this._oBasicSearchField&&this._oBasicSearchField.setValue){this._oBasicSearchField.setValue(""||i.basicSearch);}if(i.executeOnSelection){o1=i.executeOnSelection;}this.fireAfterVariantLoad(j,o1);this._setConsiderFilterChanges(true);this._updateToolbarText();if(o1||(this.getLiveMode&&this.getLiveMode())){this.search();}else{this._clearErrorState();}if(n){this._setTriggerFilterChangeState(n1);}}};c1.prototype._fetchVariantFiltersData=function(i){if(this._fRegisteredFetchData){try{return this._fRegisteredFetchData(i);}catch(j){v.error("callback for fetching data throws an exception");}}else{v.warning("no callback for fetch data supplied");}return null;};c1.prototype._applyVariantFields=function(j,i){if(this._fRegisteredApplyData){try{return this._fRegisteredApplyData(j,i);}catch(n){v.error("callback for applying data throws an exception");}}else{v.warning("no callback for appy data supplied");}};c1.prototype._isStandardVariant=function(){var i=this.getCurrentVariantId();if(!i){return true;}if(this._oVariantManagement){if((i===this._oVariantManagement.getStandardVariantKey())){return true;}if(this._oVariantManagement._oStandardVariant===null){return true;}}return false;};c1.prototype.isCurrentVariantExecuteOnSelectEnabled=function(){if(this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){var i=this.getCurrentVariantId();if(!i){return this._oVariantManagement.getExecuteOnSelectForStandardVariant();}var j=this._oVariantManagement.getItemByKey(i);if(j){return j.getExecuteOnSelection();}}return false;};c1.prototype.fetchVariant=function(){var i,j={},n;if(this._isDeltaHandling()){if(!this._isStandardVariant()){j.version="V3";}}this.fireBeforeVariantFetch();i=this._determineVariantFiltersInfo(true,!j.version);j.filterbar=(!i)?[]:i;j.filterBarVariant=this._fetchVariantFiltersData(j.version);n=this._getBasicSearchValue();if(n){j.basicSearch=n;}if(this._oVariant&&this._oVariant.content){this._oVariant.content=j;}return j;};c1.prototype.applyVariant=function(i,j,n){if(i.hasOwnProperty("version")){i=this.mergeVariant(this._getStandardVariant(),i,j);}this._applyVariant(i,j,n,i.version);};c1.prototype._afterVariantsLoad=function(){if(this._bDelayRendering){this._oBasicAreaLayout.setVisible(this.getFilterBarExpanded());}this._bDelayRendering=false;};c1.prototype.determineMandatoryFilterItems=function(){var i;var j=[];var n=this._retrieveVisibleAdvancedItems();for(i=0;i<n.length;i++){if(n[i].filterItem.getMandatory()===true){if(n[i].control){j.push(n[i].filterItem);}}}return j;};c1.prototype.determineControlByFilterItem=function(j,k1){var i,n=null;var l1,m1;if(!j||(!k1&&j._isParameter())){return null;}if(this._aBasicAreaSelection){for(i=0;i<this._aBasicAreaSelection.length;i++){l1=this._aBasicAreaSelection[i];if(j===l1.filterItem){return l1.control;}}}if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){m1=this._mAdvancedAreaFilter[n];if(m1&&m1.items){for(i=0;i<m1.items.length;i++){l1=m1.items[i];if((k1||!l1.filterItem._isParameter())&&(j===l1.filterItem)){return l1.control;}}}}}}return null;};c1.prototype.determineControlByName=function(n,i){var j=this._determineEnsuredItemByName(n,i);if(j&&j.filterItem&&!j.filterItem._isParameter()){return j.control;}return null;};c1.prototype.determineLabelByName=function(n,i){var j=this._determineEnsuredItemByName(n,i);if(j&&j.filterItem){return j.filterItem._oLabel;}return null;};c1.prototype._determineEnsuredItemByName=function(n,i){if(!i){i=this._determineGroupNameByName(n);}this._ensureFilterLoaded([{name:n,group:i}]);return this._determineItemByName(n,i);};c1.prototype._determineGroupNameByName=function(n){if(this._aFields){for(var i=0;i<this._aFields.length;i++){if(this._aFields[i].fieldName===n){return this._aFields[i].groupName;}}}var j=this._determineFilterItemByName(n);if(j){var k1=j.getGroupName();if(k1!==c1.INTERNAL_GROUP){return k1;}}return null;};c1.prototype._determineItemByName=function(n,j){var i;var k1,l1;var m1=j;if(!n){return null;}if(!m1){m1=c1.INTERNAL_GROUP;}if(this._mAdvancedAreaFilter){l1=this._mAdvancedAreaFilter[m1];if(l1&&l1.items){for(i=0;i<l1.items.length;i++){k1=l1.items[i];if(k1&&k1.filterItem&&(k1.filterItem.getName()===n)){return k1;}}}}return null;};c1.prototype.determineFilterItemByName=function(n){var i=this._determineEnsuredItemByName(n);if(i&&i.filterItem){return i.filterItem;}return null;};c1.prototype._determineFilterItemByName=function(i){var n,j;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){j=this._determineItemByName(i,n);if(j){return j.filterItem;}}}return null;};c1.prototype._determineByControl=function(j){var n=null,i;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){var k1=this._mAdvancedAreaFilter[n];if(k1&&k1.items){for(i=0;i<k1.items.length;i++){if(k1.items[i]&&k1.items[i].control===j){return k1.items[i];}}}}}}return null;};c1.prototype._deleteProperties=function(){var n=null,i;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){var j=this._mAdvancedAreaFilter[n];if(j&&j.items){if(j.formcontainer){j.formcontainer.destroy();delete j.formcontainer;}if(j.link){delete j.link;}for(i=0;i<j.items.length;i++){if(j.items[i]&&j.items[i].checkbox){delete j.items[i].checkbox;}if(j.items[i]&&j.items[i].formelement){delete j.items[i].formelement;}}}}}}};c1.prototype.onAfterRendering=function(i){if(!(this._isPhone()||this._isTablet())){if(this._oHintText&&this._oHintText.getVisible()){this.setFilterBarExpanded(false);}}};c1.prototype._destroyLazyFilterControl=function(){var j,i;if(this._aFields&&(this._aFields.length>0)){if(this._aFields&&this._aFields.length>0){for(j=0;j<this._aFields.length;j++){i=this._aFields[j];if(i.factory){if(i.control){i.control.destroy();}}}}}};c1.prototype._destroyNonVisibleFilterControl=function(){var i,n,j;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n]&&this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){j=this._mAdvancedAreaFilter[n].items[i];if(j&&j.container){if(this._oBasicAreaLayout&&(this._oBasicAreaLayout.indexOfContent(j.container)<0)){if(j.control&&!j.bDestroyed){j.control.destroy();j.bDestroyed=true;}}}}}}}};c1.prototype._destroyFilterControls=function(){if(!this.getAdvancedMode()){this._destroyLazyFilterControl();this._destroyNonVisibleFilterControl();}};c1.prototype._registerVariantManagement=function(){if(this._oVariantManagement){this._oVariantManagement.attachSave(this._variantSave,this);this._oVariantManagement.attachAfterSave(this._afterVariantSave,this);}};c1.prototype._unregisterVariantManagement=function(){if(this._oVariantManagement){if(this._fInitialiseVariants){this._oVariantManagement.detachInitialise(this._fInitialiseVariants);this._fInitialiseVariants=null;}this._oVariantManagement.detachSave(this._variantSave,this);this._oVariantManagement.detachAfterSave(this._afterVariantSave,this);if((!this.getUseToolbar()||this.getAdvancedMode())&&!this._oVariantManagement.getDomRef()){this._oVariantManagement.destroy();}}};c1.prototype.exit=function(){this._unregisterVariantManagement();this._destroyFilterControls();if(this._oHintText&&(this._oAdvancedPanel.indexOfContent(this._oHintText)<0)){this._oHintText.destroy();}window.sessionStorage.removeItem(this.getId());window.sessionStorage.removeItem("semanticDates");G.prototype.exit.apply(this,arguments);if(this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.destroy();this._oAdaptFiltersDialog=null;}if(this._oAdaptFiltersDialogModel){this._oAdaptFiltersDialogModel=null;}if(this._oGroupPanel){this._oGroupPanel=null;}if(this._oDialog){this._oDialog.destroy();this._oDialog=null;}if(this._oFilterDialog){this._oFilterDialog.destroy();this._oFilterDialog=null;}if(this._oFilterDialogForm){this._oFilterDialogForm.destroy();this._oFilterDialogForm=null;}if(this.oModel){this.oModel.destroy();this.oModel=null;}this._aFields=null;this._oHintText=null;this._aBasicAreaSelection=null;this._mAdvancedAreaFilter=null;this._oBasicAreaLayout=null;this._oVariantManagement=null;this._oCollectiveSearch=null;this._oVariant=null;this._fRegisteredFetchData=null;this._fRegisteredApplyData=null;this._fRegisterGetFiltersWithValues=null;this._fRegisteredFilterChangeHandlers=null;this._oSearchButton=null;this._oFiltersButton=null;this._oHideShowButton=null;this._oClearButtonOnFB=null;this._oRestoreButtonOnFB=null;this._oBasicSearchField=null;this._oBasicSearchFieldContainer=null;this._oButtonsVLayout=null;};return c1;});
